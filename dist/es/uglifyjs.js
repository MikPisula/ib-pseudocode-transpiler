!function(_){"use strict";function e(e){return e.split("")}function zn(e,n){return 0<=n.indexOf(e)}function qn(e,n){for(var t=n.length;0<=--t;)if(e(n[t]))return n[t]}function n(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function r(e,n){this.message=e,this.defs=n}function re(e,n,t){if(t)for(var i in e)if(Un(e,i)&&!Un(n,i))throw new r("`"+i+"` is not a supported option",n);for(var i in e)Un(e,i)&&(n[i]=e[i]);return n}function t(e,n){var t,i=0;for(t in n)Un(n,t)&&(e[t]=n[t],i++);return i}function Cn(){}function Mn(){return!1}function Fn(){return!0}function jn(){return this}function Pn(){return null}((r.prototype=Object.create(Error.prototype)).constructor=r).prototype.name="DefaultsError",n(r);var Nn=function(){function e(e,n){for(var t=[],i=0;i<e.length;i++){var r=n(e[i],i);r!==o&&(r instanceof a?t.push.apply(t,r.v):t.push(r))}return t}e.is_op=function(e){return e===o||e instanceof a},e.splice=function(e){return new a(e)};var o=e.skip={};function a(e){this.v=e}return e}();function In(e,n){if(e.indexOf(n)<0)return e.push(n)}function Hn(e,t){return e.replace(/\{([^}]+)\}/g,function(e,n){n=t[n];return n instanceof Wn?n.print_to_string():n})}function Yn(e,n){n=e.indexOf(n);0<=n&&e.splice(n,1)}function Rn(e){Array.isArray(e)||(e=e.split(" "));var n=Object.create(null);return e.forEach(function(e){n[e]=!0}),n}function Bn(e,n){for(var t=e.length;0<=--t;)if(!n(e[t],t))return!1;return!0}function Ln(){this._values=Object.create(null),this._size=0}function Un(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function Vn(e,n,t){for(var i,r=e.parent(-1),o=0;i=e.parent(o++);r=i){if(bt(i))return n&&i.value===r;if(i instanceof xi){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof ki){if(i.condition===r)continue}else{if(i instanceof si)return t;if(i instanceof vi){if(i.expression===r)continue}else if(i instanceof di){if(i.expressions[0]===r)continue}else{if(i instanceof Zn)return!0;if(i instanceof nr){if(i.tag===r)continue}else if(i instanceof wi&&i.expression===r)continue}}return!1}}function i(e,n,t,i){void 0===i&&(i=Wn);var r=n=n?n.split(/\s+/):[];i&&i.PROPS&&(n=n.concat(i.PROPS));var o=["return function AST_",e,"(props){","if(props){"];n.forEach(function(e){o.push("this.",e,"=props.",e,";")}),o.push("}");var a=Object.create(i&&i.prototype);(t.initialize||a.initialize)&&o.push("this.initialize();"),o.push("};");var s,f=new Function(o.join(""))();for(s in f.prototype=a,(f.prototype.CTOR=f).prototype.TYPE=f.TYPE=e,i&&(f.BASE=i).SUBCLASSES.push(f),f.DEFMETHOD=function(e,n){this.prototype[e]=n},f.PROPS=n,f.SELF_PROPS=r,f.SUBCLASSES=[],t)Un(t,s)&&(/^\$/.test(s)?f[s.substr(1)]=t[s]:f.DEFMETHOD(s,t[s]));return void 0!==_&&(_["AST_"+e]=f),f}Ln.prototype={set:function(e,n){return this.has(e)||++this._size,this._values["$"+e]=n,this},add:function(e,n){return this.has(e)?this.get(e).push(n):this.set(e,[n]),this},get:function(e){return this._values["$"+e]},del:function(e){return this.has(e)&&(--this._size,delete this._values["$"+e]),this},has:function(e){return"$"+e in this._values},all:function(e){for(var n in this._values)if(!e(this._values[n],n.substr(1)))return!1;return!0},each:function(e){for(var n in this._values)e(this._values[n],n.substr(1))},size:function(){return this._size},map:function(e){var n,t=[];for(n in this._values)t.push(e(this._values[n],n.substr(1)));return t},clone:function(){var e,n=new Ln;for(e in this._values)n._values[e]=this._values[e];return n._size=this._size,n},toObject:function(){return this._values}},Ln.fromObject=function(e){var n=new Ln;return n._size=t(n._values,e),n};var Y=i("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),Wn=i("Node","start end",{_clone:function(e){if(e){var n=this.clone();return n.transform(new mr(function(e){if(e!==n)return e.clone(!0)}))}return new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){for(var e=this.CTOR;e.prototype._validate.call(this),e=e.BASE;);},validate_ast:function(){var n={};this.walk(new vr(function(e){if(e.validate_visited===n)throw new Error(Hn("cannot reuse {type} from [{file}:{line},{col}]",{type:"AST_"+e.TYPE,file:e.start.file,line:e.start.line,col:e.start.col}));e.validate_visited=n}))}},null);(Wn.log_function=function(n,e){var t;function i(e){t[e]||(t[e]=!0,n(e))}"function"==typeof n?(t=Object.create(null),Wn.info=e?function(e,n){i("INFO: "+Hn(e,n))}:Cn,Wn.warn=function(e,n){i("WARN: "+Hn(e,n))}):Wn.info=Wn.warn=Cn})();var o=[];Wn.enable_validation=function(){Wn.disable_validation(),function e(n){var t;n.SUBCLASSES.forEach(e),Un(n.prototype,"transform")&&(t=n.prototype.transform,n.prototype.transform=function(e,n){e=t.call(this,e,n);if(e instanceof Wn)e.validate();else if(!(null===e||n&&Nn.is_op(e)))throw new Error("invalid transformed value: "+e);return e},o.push(function(){n.prototype.transform=t}))}(this)},Wn.disable_validation=function(){for(var e;e=o.pop();)e()};var Gn=i("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),Jn=i("Debugger",null,{$documentation:"Represents a debugger statement"},Gn),Xn=i("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},Gn),Kn=i("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)"},Gn);function Qn(e){return e instanceof Gn&&!(e instanceof jt)&&!(e instanceof gt)}function a(e,n,t,i,r){if(t=t?"contain":"be",!(e instanceof Wn))throw new Error(n+" must "+t+" AST_Node");if(e instanceof ui)throw new Error(n+" cannot "+t+" AST_DefaultValue");if(e instanceof Di)throw new Error(n+" cannot "+t+" AST_Destructured");if(e instanceof ur&&!r)throw new Error(n+" cannot "+t+" AST_Hole");if(e instanceof gi&&!i)throw new Error(n+" cannot "+t+" AST_Spread");if(Qn(e))throw new Error(n+" cannot "+t+" AST_Statement");if(e instanceof Ii)throw new Error(n+" cannot "+t+" AST_SymbolDeclaration")}function s(e,n){a(e[n],n)}var Zn=i("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){s(this,"body")}},Gn),et=i("BlockScope","enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){e=this._clone(e);return this.enclosed&&(e.enclosed=this.enclosed.slice()),this.functions&&(e.functions=this.functions.clone()),this.variables&&(e.variables=this.variables.clone()),e},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof et))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof ht))throw new Error("must be contained within AST_Scope")}}},Gn);function nt(e,n){e.body.forEach(function(e){e.walk(n)})}var tt=i("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},walk:function(e){var n=this;e.visit(n,function(){nt(n,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!Qn(e))throw new Error("body must contain AST_Statement")})}},et),it=i("BlockStatement",null,{$documentation:"A block statement"},tt),F=i("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!Qn(this.body))throw new Error("body must be AST_Statement")}},et),rt=i("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},walk:function(e){var n=this;e.visit(n,function(){n.label.walk(e),n.body.walk(e)})},clone:function(e){var n,t,i=this._clone(e);return e&&(n=i.label,t=this.label,i.walk(new vr(function(e){return e instanceof Lt?e.label&&e.label.thedef===t?((e.label.thedef=n).references.push(e),!0):void 0:e instanceof ht||void 0}))),i},_validate:function(){if(!(this.label instanceof ue))throw new Error("label must be AST_Label")}},F),ot=i("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},F),at=i("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");s(this,"condition")}},ot),st=i("Do",null,{$documentation:"A `do` statement",walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e),n.condition.walk(e)})}},at),ft=i("While",null,{$documentation:"A `while` statement",walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e)})}},at),ct=i("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},walk:function(e){var n=this;e.visit(n,function(){n.init&&n.init.walk(e),n.condition&&n.condition.walk(e),n.step&&n.step.walk(e),n.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof Wn))throw new Error("init must be AST_Node");if(Qn(this.init)&&!(this.init instanceof ni))throw new Error("init cannot be AST_Statement")}null!=this.condition&&s(this,"condition"),null!=this.step&&s(this,"step")}},ot),ut=i("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},walk:function(e){var n=this;e.visit(n,function(){n.init.walk(e),n.object.walk(e),n.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof ni){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else c(this.init,function(e){if(!(e instanceof vi||e instanceof Ji))throw new Error("init must be assignable: "+e.TYPE)});s(this,"object")}},ot),lt=i("ForIn",null,{$documentation:"A `for ... in` statement"},ut),oe=i("ForOf",null,{$documentation:"A `for ... of` statement"},ut),pt=i("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},oe),dt=i("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.body.walk(e)})},_validate:function(){s(this,"expression")}},F),ht=i("Scope","uses_eval uses_with",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:jn,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},tt),vt=i("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var n=this.body;return xr(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new mr(function(e){if(e instanceof Xn&&"$ORIG"==e.value)return Nn.splice(n)}))},enclose:function(e){var n=(e="string"!=typeof e?"":e).indexOf(":");n<0&&(n=e.length);var t=this.body;return xr(["(function(",e.slice(0,n),'){"$ORIG"})(',e.slice(n+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new mr(function(e){if(e instanceof Xn&&"$ORIG"==e.value)return Nn.splice(t)}))}},ht),mt=i("Lambda","argnames length_read rest uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean/S] whether this function accesses the arguments array"},each_argname:function(n){var t=new vr(function(e){return e instanceof ui?(e.name.walk(t),!0):e instanceof $i?(e.value.walk(t),!0):void(e instanceof Li&&n(e))});this.argnames.forEach(function(e){e.walk(t)}),this.rest&&this.rest.walk(t)},walk:function(n){var e=this;n.visit(e,function(){e.name&&e.name.walk(n),e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),nt(e,n)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){c(e,function(e){if(!(e instanceof Li))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&c(this.rest,function(e){if(!(e instanceof Li))throw new Error("rest must be AST_SymbolFunarg")})}},ht),_t=i("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},mt),gt=i("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},mt);function bt(e){return e instanceof kt||e instanceof Et}function yt(e){return e instanceof Et||e instanceof $t||e instanceof St||e instanceof zt||e instanceof Tt}function wt(e){return e instanceof zt||e instanceof Tt||e instanceof Ct||e instanceof Dt}function xt(e,n){bt(e)&&e.value?e.value.walk(n):nt(e,n)}var kt=i("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(n){var e=this;n.visit(e,function(){e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),e.value?e.value.walk(n):nt(e,n)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(s(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},gt),Et=i("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(n){var e=this;n.visit(e,function(){e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),e.value?e.value.walk(n):nt(e,n)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(s(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},gt),St=i("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Vi))throw new Error("name must be AST_SymbolLambda")}},gt),Tt=i("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Vi))throw new Error("name must be AST_SymbolLambda")}},gt),At=i("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Vi))throw new Error("name must be AST_SymbolLambda")}},gt),Dt=i("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Vi))throw new Error("name must be AST_SymbolLambda")}},gt),Ot=i("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof Ui))throw new Error("name must be AST_SymbolDefun")}},mt),$t=i("AsyncDefun",null,{$documentation:"An asynchronous function definition"},Ot),zt=i("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},Ot),qt=i("Defun",null,{$documentation:"A function definition"},Ot),Ct=i("GeneratorDefun",null,{$documentation:"A generator function definition"},Ot),Mt=i("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},walk:function(n){var e=this;n.visit(e,function(){e.name&&e.name.walk(n),e.extends&&e.extends.walk(n),e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&s(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof Pt))throw new Error("properties must contain AST_ClassProperty")})}},et),Ft=i("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof ce))throw new Error("name must be AST_SymbolDefClass")}},Mt),jt=i("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Wi))throw new Error("name must be AST_SymbolClass")}},Mt),Pt=i("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node] property name (AST_Node for computed property)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof Wn&&n.key.walk(e),n.value&&n.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if("string"!=typeof this.key){if(!(this.key instanceof Wn))throw new Error("key must be string or AST_Node");s(this,"key")}if(null!=this.value&&!(this.value instanceof Wn))throw new Error("value must be AST_Node")}}),Nt=i("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&s(this,"value")}},Pt),ae=i("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof _t))throw new Error("value must be AST_Accessor")}},Pt),se=i("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof _t))throw new Error("value must be AST_Accessor")}},Pt),It=i("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof gt))throw new Error("value must be AST_LambdaExpression");if(bt(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},Pt),Ht=i("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},Gn),Yt=i("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},walk:function(e){var n=this;e.visit(n,function(){n.value&&n.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},Ht),Rt=i("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&s(this,"value")}},Yt),Bt=i("Throw",null,{$documentation:"A `throw` statement",_validate:function(){s(this,"value")}},Yt),Lt=i("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},walk:function(e){var n=this;e.visit(n,function(){n.label&&n.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof le))throw new Error("label must be AST_LabelRef")}},Ht),Ut=i("Break",null,{$documentation:"A `break` statement"},Lt),Vt=i("Continue",null,{$documentation:"A `continue` statement"},Lt),Wt=i("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e),n.alternative&&n.alternative.walk(e)})},_validate:function(){if(s(this,"condition"),null!=this.alternative&&!Qn(this.alternative))throw new Error("alternative must be AST_Statement")}},F),Gt=i("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),nt(n,e)})},_validate:function(){s(this,"expression"),this.body.forEach(function(e){if(!(e instanceof Jt))throw new Error("body must be AST_SwitchBranch[]")})}},tt),Jt=i("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},tt),Xt=i("Default",null,{$documentation:"A `default` switch branch"},Jt),Kt=i("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),nt(n,e)})},_validate:function(){s(this,"expression")}},Jt),Qt=i("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},walk:function(e){var n=this;e.visit(n,function(){nt(n,e),n.bcatch&&n.bcatch.walk(e),n.bfinally&&n.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof Zt))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof ei))throw new Error("bfinally must be AST_Finally")}},tt),Zt=i("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},walk:function(e){var n=this;e.visit(n,function(){n.argname&&n.argname.walk(e),nt(n,e)})},_validate:function(){null!=this.argname&&c(this.argname,function(e){if(!(e instanceof Gi))throw new Error("argname must be AST_SymbolCatch")})}},tt),ei=i("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},tt),ni=i("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},walk:function(n){var e=this;n.visit(e,function(){e.definitions.forEach(function(e){e.walk(n)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},Gn),ti=i("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof oi))throw new Error("definitions must be AST_VarDef[]");c(e.name,function(e){if(!(e instanceof Hi))throw new Error("name must be AST_SymbolConst")})})}},ni),ii=i("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof oi))throw new Error("definitions must be AST_VarDef[]");c(e.name,function(e){if(!(e instanceof Ri))throw new Error("name must be AST_SymbolLet")})})}},ni),ri=i("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof oi))throw new Error("definitions must be AST_VarDef[]");c(e.name,function(e){if(!(e instanceof Bi))throw new Error("name must be AST_SymbolVar")})})}},ni),oi=i("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value&&n.value.walk(e)})},_validate:function(){null!=this.value&&s(this,"value")}}),ai=i("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){if(!(this.body instanceof Ft||this.body instanceof ni||this.body instanceof Ot))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},Gn),si=i("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){this.body instanceof Ft||this.body instanceof Ot||s(this,"body")}},Gn),fe=i("ExportForeign","aliases keys path quote",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[string*] array of aliases to export",keys:"[string*] array of keys to import",path:"[string] the path to import module",quote:"[string?] the original quote character"},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if("string"!=typeof e)throw new Error("aliases must contain string")}),this.keys.forEach(function(e){if("string"!=typeof e)throw new Error("keys must contain string")}),"string"!=typeof this.path)throw new Error("path must be string");if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}}},Gn),fi=i("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof Xi))throw new Error("properties must contain AST_SymbolExport")})}},Gn),ci=i("Import","all default path properties quote",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[string] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified",quote:"[string?] the original quote character"},walk:function(n){var e=this;n.visit(e,function(){e.all&&e.all.walk(n),e.default&&e.default.walk(n),e.properties&&e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof Yi))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof Yi))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key)throw new Error("invalid default key: "+this.default.key)}if("string"!=typeof this.path)throw new Error("path must be string");if(null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof Yi))throw new Error("properties must contain AST_SymbolImport")}),null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}}},Gn),ui=i("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value.walk(e)})},_validate:function(){s(this,"value")}});function f(e,n,t,i){e[n].forEach(function(e){a(e,n,!0,t,i)})}var li=i("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[string/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},walk:function(n){var e=this;n.visit(e,function(){e.expression.walk(n),e.args.forEach(function(e){e.walk(n)})})},_validate:function(){s(this,"expression"),f(this,"args",!0)}}),pi=i("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},li),di=i("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},walk:function(n){var e=this;n.visit(e,function(){e.expressions.forEach(function(e){e.walk(n)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");f(this,"expressions")}});function hi(e){for(;e instanceof vi;)e=e.expression;return e}var vi=i("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},get_property:function(){var e=this.property;return e instanceof tr?e.value:e instanceof yi&&"void"==e.operator&&e.expression instanceof tr?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");s(this,"expression")}}),mi=i("Dot",null,{$documentation:"A dotted property access expression",walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},vi),_i=i("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.property.walk(e)})},_validate:function(){s(this,"property")}},vi),gi=i("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){s(this,"expression")}}),bi=i("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");s(this,"expression")}}),yi=i("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},bi),wi=i("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},bi),xi=i("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},walk:function(e){var n=this;e.visit(n,function(){n.left.walk(e),n.right.walk(e)})},_validate:function(){if(this instanceof Ei||s(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");s(this,"right")}}),ki=i("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.consequent.walk(e),n.alternative.walk(e)})},_validate:function(){s(this,"condition"),s(this,"consequent"),s(this,"alternative")}}),Ei=i("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof Di){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);c(this.left,function(e){if(!(e instanceof vi||e instanceof Ji))throw new Error("left must be assignable: "+e.TYPE)})}}},xi),Si=i("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){s(this,"expression")}}),Ti=i("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},walk:function(e){var n=this;e.visit(n,function(){n.expression&&n.expression.walk(e)})},_validate:function(){if(null!=this.expression)s(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),Ai=i("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},walk:function(n){var e=this;n.visit(e,function(){e.elements.forEach(function(e){e.walk(n)})})},_validate:function(){f(this,"elements",!0,!0)}}),Di=i("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function c(e,n,t){if(e instanceof ui&&t)return c(e.name,n);if(e instanceof Di){if(null!=e.rest&&c(e.rest,n),e instanceof Oi)return e.elements.forEach(function(e){e instanceof ur||c(e,n,!0)});if(e instanceof zi)return e.properties.forEach(function(e){c(e.value,n,!0)})}n(e)}var u,Oi=i("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},walk:function(n){var e=this;n.visit(e,function(){e.elements.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n)})}},Di),$i=i("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof Wn&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof Wn))throw new Error("key must be string or AST_Node");s(this,"key")}if(!(this.value instanceof Wn))throw new Error("value must be AST_Node")}}),zi=i("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof $i))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},Di),qi=i("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof Ci||e instanceof gi))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),Ci=i("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof Wn&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof Wn))throw new Error("key must be string or AST_Node");s(this,"key")}if(!(this.value instanceof Wn))throw new Error("value must be AST_Node")}}),Mi=i("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){s(this,"value")}},Ci),Fi=i("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof gt))throw new Error("value must be AST_LambdaExpression");if(bt(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},Mi),ji=i("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof _t))throw new Error("value must be AST_Accessor")}},Ci),Pi=i("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof _t))throw new Error("value must be AST_Accessor")}},Ci),Ni=i("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),Ii=i("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},Ni),Hi=i("SymbolConst",null,{$documentation:"Symbol defining a constant"},Ii),Yi=i("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[string] the original `export` name"},_validate:function(){if("string"!=typeof this.key)throw new Error("key must be string")}},Hi),Ri=i("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},Ii),Bi=i("SymbolVar",null,{$documentation:"Symbol defining a variable"},Ii),Li=i("SymbolFunarg",null,{$documentation:"Symbol naming a function argument"},Bi),Ui=i("SymbolDefun",null,{$documentation:"Symbol defining a function"},Ii),Vi=i("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},Ii),ce=i("SymbolDefClass",null,{$documentation:"Symbol defining a class"},Hi),Wi=i("SymbolClass",null,{$documentation:"Symbol naming a class expression"},Hi),Gi=i("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},Ii),ue=i("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},Ni),Ji=i("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},Ni),Xi=i("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[string] the `export` alias"},_validate:function(){if("string"!=typeof this.alias)throw new Error("alias must be string")}},Ji),le=i("LabelRef",null,{$documentation:"Reference to a label symbol"},Ni),Ki=i("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},Ni),Qi=i("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},Ki),Zi=i("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},Ki),er=i("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},Zi),nr=i("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node] tag function, or null if absent"},walk:function(n){var e=this;n.visit(e,function(){e.tag&&e.tag.walk(n),e.expressions.forEach(function(e){e.walk(n)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");f(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&s(this,"tag")}}),tr=i("Constant",null,{$documentation:"Base class for all constants",_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),ir=i("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},tr),rr=i("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},tr),or=i("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},tr),ar=i("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},tr),g=i("Atom",null,{$documentation:"Base class for atoms",_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},tr),sr=i("Null",null,{$documentation:"The `null` atom",value:null},g),fr=i("NaN",null,{$documentation:"The impossible value",value:NaN},g),cr=i("Undefined",null,{$documentation:"The `undefined` value",value:void 0},g),ur=i("Hole",null,{$documentation:"A hole in an array",value:void 0},g),lr=i("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},g),pr=i("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},g),dr=i("False",null,{$documentation:"The `false` atom",value:!1},pr),hr=i("True",null,{$documentation:"The `true` atom",value:!0},pr);function vr(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function mr(e,n){vr.call(this),this.before=e,this.after=n}function l(e,n){return Nn(e,function(e){return e.transform(n,!0)})}function p(e,n){e.argnames=l(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.value?e.value=e.value.transform(n):e.body=l(e.body,n)}vr.prototype={visit:function(e,n){this.push(e),!this.callback(e,n||Cn)&&n&&n(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){e instanceof mt?this.directives=Object.create(this.directives):e instanceof Xn&&!this.directives[e.value]&&(this.directives[e.value]=e),this.stack.push(e)},pop:function(){this.stack.pop()instanceof mt&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var n=this.stack,t=n.length;0<=--t;){var i=n[t];if(i instanceof e)return i}},has_directive:function(e){var n=this.directives[e];if(n)return n;var t=this.stack[this.stack.length-1];if(t instanceof ht)for(var i=0;i<t.body.length;++i){var r=t.body[i];if(!(r instanceof Xn))break;if(r.value==e)return r}},loopcontrol_target:function(e){var n,t=this.stack;if(e.label){for(var i=t.length;0<=--i;)if((n=t[i])instanceof rt&&n.label.name==e.label.name)return n.body}else for(i=t.length;0<=--i;)if((n=t[i])instanceof ot||e instanceof Ut&&n instanceof Gt)return n},in_boolean_context:function(){for(var e,n=this.self(),t=0;e=this.parent(t);t++){if(e instanceof ki&&e.condition===n||e instanceof at&&e.condition===n||e instanceof ct&&e.condition===n||e instanceof Wt&&e.condition===n||e instanceof Rt&&e.in_bool||e instanceof di&&e.tail_node()!==n||e instanceof Zn||e instanceof yi&&"!"==e.operator&&e.expression===n)return!0;if(e instanceof xi&&("&&"==e.operator||"||"==e.operator)||e instanceof ki||e.tail_node()===n)n=e;else{if(!(e instanceof Rt))return!1;for(var i,r=e;i=this.parent(++t);r=i)if("Call"==i.TYPE){if(!(r instanceof mt)||r.name)return!1}else if(r instanceof mt)return!1}}}},mr.prototype=new vr,(u=function(e,r){e.DEFMETHOD("transform",function(e,n){var t,i;return e.push(this),void 0===(t=e.before?e.before(this,r,n):t)&&(r(t=this,e),e.after&&void 0!==(i=e.after(t,n))&&(t=i)),e.pop(),t})})(Wn,Cn),u(rt,function(e,n){e.label=e.label.transform(n),e.body=e.body.transform(n)}),u(Zn,function(e,n){e.body=e.body.transform(n)}),u(tt,function(e,n){e.body=l(e.body,n)}),u(st,function(e,n){e.body=e.body.transform(n),e.condition=e.condition.transform(n)}),u(ft,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n)}),u(ct,function(e,n){e.init&&(e.init=e.init.transform(n)),e.condition&&(e.condition=e.condition.transform(n)),e.step&&(e.step=e.step.transform(n)),e.body=e.body.transform(n)}),u(ut,function(e,n){e.init=e.init.transform(n),e.object=e.object.transform(n),e.body=e.body.transform(n)}),u(dt,function(e,n){e.expression=e.expression.transform(n),e.body=e.body.transform(n)}),u(Yt,function(e,n){e.value&&(e.value=e.value.transform(n))}),u(Lt,function(e,n){e.label&&(e.label=e.label.transform(n))}),u(Wt,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n),e.alternative&&(e.alternative=e.alternative.transform(n))}),u(Gt,function(e,n){e.expression=e.expression.transform(n),e.body=l(e.body,n)}),u(Kt,function(e,n){e.expression=e.expression.transform(n),e.body=l(e.body,n)}),u(Qt,function(e,n){e.body=l(e.body,n),e.bcatch&&(e.bcatch=e.bcatch.transform(n)),e.bfinally&&(e.bfinally=e.bfinally.transform(n))}),u(Zt,function(e,n){e.argname&&(e.argname=e.argname.transform(n)),e.body=l(e.body,n)}),u(ni,function(e,n){e.definitions=l(e.definitions,n)}),u(oi,function(e,n){e.name=e.name.transform(n),e.value&&(e.value=e.value.transform(n))}),u(ui,function(e,n){e.name=e.name.transform(n),e.value=e.value.transform(n)}),u(mt,function(e,n){e.name&&(e.name=e.name.transform(n)),e.argnames=l(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.body=l(e.body,n)}),u(kt,p),u(Et,p),u(Mt,function(e,n){e.name&&(e.name=e.name.transform(n)),e.extends&&(e.extends=e.extends.transform(n)),e.properties=l(e.properties,n)}),u(Pt,function(e,n){e.key instanceof Wn&&(e.key=e.key.transform(n)),e.value&&(e.value=e.value.transform(n))}),u(li,function(e,n){e.expression=e.expression.transform(n),e.args=l(e.args,n)}),u(di,function(e,n){e.expressions=l(e.expressions,n)}),u(Si,function(e,n){e.expression=e.expression.transform(n)}),u(Ti,function(e,n){e.expression&&(e.expression=e.expression.transform(n))}),u(mi,function(e,n){e.expression=e.expression.transform(n)}),u(_i,function(e,n){e.expression=e.expression.transform(n),e.property=e.property.transform(n)}),u(gi,function(e,n){e.expression=e.expression.transform(n)}),u(bi,function(e,n){e.expression=e.expression.transform(n)}),u(xi,function(e,n){e.left=e.left.transform(n),e.right=e.right.transform(n)}),u(ki,function(e,n){e.condition=e.condition.transform(n),e.consequent=e.consequent.transform(n),e.alternative=e.alternative.transform(n)}),u(Ai,function(e,n){e.elements=l(e.elements,n)}),u(Oi,function(e,n){e.elements=l(e.elements,n),e.rest&&(e.rest=e.rest.transform(n))}),u($i,function(e,n){e.key instanceof Wn&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),u(zi,function(e,n){e.properties=l(e.properties,n),e.rest&&(e.rest=e.rest.transform(n))}),u(qi,function(e,n){e.properties=l(e.properties,n)}),u(Ci,function(e,n){e.key instanceof Wn&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),u(ai,function(e,n){e.body=e.body.transform(n)}),u(si,function(e,n){e.body=e.body.transform(n)}),u(fi,function(e,n){e.properties=l(e.properties,n)}),u(ci,function(e,n){e.all&&(e.all=e.all.transform(n)),e.default&&(e.default=e.default.transform(n)),e.properties&&(e.properties=l(e.properties,n))}),u(nr,function(e,n){e.tag&&(e.tag=e.tag.transform(n)),e.expressions=l(e.expressions,n)});var j=["abstract async await boolean byte char double enum export final float goto implements import int interface long native package private protected public short static super synchronized this throws transient volatile yield",A="false null true",pe="break case catch class const continue debugger default delete do else extends finally for function if in instanceof let new return switch throw try typeof var void while with"].join(" "),T="return new delete throw else case",pe=Rn(pe),j=Rn(j),T=Rn(T),A=Rn(A),D=/^0b([01]+)$/i,O=/^0x([0-9a-f]+)$/i,$=/^0o?([0-7]+)$/i,z=Rn(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),q="\n\r\u2028\u2029",C="+-*&%=<>!?|~^",de=",;:)}]",M="[{(,;:",P=M+"`)}]",N=q+"  \t\f\v​             　\ufeff",I=Rn(e("./'\"#"+C+P+N));function R(e){return 56320<=e&&e<=57343}function H(e){return 48<=e&&e<=57}function B(e){return!I[e]}function _r(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function gr(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":if("{"==e[1]&&"}"==e.slice(-1))n=e.slice(2,-1);else{if(5!=e.length)return;n=e.slice(1)}return(n=parseInt(n,16))<0||isNaN(n)?void 0:n<65536?String.fromCharCode(n):1114111<n?void 0:String.fromCharCode(55232+(n>>10))+String.fromCharCode(56320+(1023&n));case"v":return"\v";case"x":return 3!=e.length?void 0:(n=parseInt(e.slice(1),16))<0||isNaN(n)?void 0:String.fromCharCode(n);var n;case"\r":case"\n":return"";default:return"0"==e?"\0":"0"<=e[0]&&e[0]<="9"?void 0:e}}function br(e,n,t,i,r){this.message=e,this.filename=n,this.line=t,this.col=i,this.pos=r}function he(e,n,t,i,r){throw new br(e,n,t,i,r)}function ve(e,n,t){return e.type==n&&(null==t||e.value==t)}q=Rn(e(q)),C=Rn(e(C)),de=Rn(e(de)),M=Rn(e(M)),P=Rn(e(P)),N=Rn(e(N)),((br.prototype=Object.create(Error.prototype)).constructor=br).prototype.name="SyntaxError",n(br);var L={};function me(i,r,o,a){var s={text:i,filename:r,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:{},directive_stack:[],read_template:e("Unterminated template literal",function(e){for(var n="";;){var t=u(!0,!0);switch(t){case"\\":t+=u(!0,!0);break;case"`":return void e.push(n);case"$":if("{"==c())return u(),e.push(n),s.regex_allowed=!0}n+=t}})},f=!1;function c(){return s.text.charAt(s.pos)}function u(e,n){var t=s.text.charAt(s.pos++);if(e&&!t)throw L;return q[t]?(s.col=0,s.line++,n||(s.newline_before=!0),"\r"==t&&"\n"==c()&&(s.pos++,t="\n")):s.col++,t}function l(e){for(;0<e--;)u()}function p(e){return s.text.substr(s.pos,e.length)==e}function d(){s.tokline=s.line,s.tokcol=s.col,s.tokpos=s.pos}function h(e,n,t){s.regex_allowed="operator"==e&&!yr[n]||"keyword"==e&&T[n]||"punc"==e&&M[n],"punc"==e&&"."==n?f=!0:t||(f=!1);n={type:e,value:n,line:s.tokline,col:s.tokcol,pos:s.tokpos,endline:s.line,endcol:s.col,endpos:s.pos,nlb:s.newline_before,file:r};return/^(?:num|string|regexp)$/i.test(e)&&(n.raw=i.substring(n.pos,n.endpos)),t||(n.comments_before=s.comments_before,n.comments_after=s.comments_before=[]),s.newline_before=!1,new Y(n)}function v(e){he(e,r,s.tokline,s.tokcol,s.tokpos)}function m(e){return/^0[0-7_]+$/.test(e)}function _(e){var t=!1,i=!1,r=!1,o="."==e,n=function(e){for(var n,t="";(n=c())&&e(n,t);)t+=u();return t}(function(e,n){switch(e){case"x":case"X":return!r&&(r=!0);case"e":case"E":return r||!t&&(t=i=!0);case"+":case"-":return i;case i=!1,".":return!(o||t||r||m(n))&&(o=!0)}return/[_0-9a-dfo]/i.test(e)});m(n=e?e+n:n)?S.has_directive("use strict")&&v("Legacy octal literals are not allowed in strict mode"):n=n.replace(r?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1");e=function(e){if(n=D.exec(e))return parseInt(n[1],2);if(n=O.exec(e))return parseInt(n[1],16);if(n=$.exec(e))return parseInt(n[1],8);var n=parseFloat(e);return n==e?n:void 0}(n);return isNaN(e)&&v("Invalid syntax: "+n),o||t||"n"!=c()?h("num",e):h("bigint",n.toLowerCase()+u())}function g(e){var n=u(!0,e);if("0"<=n&&n<="7")return function(e){var n=c();"0"<=n&&n<="7"&&(e+=u(!0))[0]<="3"&&"0"<=(n=c())&&n<="7"&&(e+=u(!0));if("0"===e)return"\0";0<e.length&&S.has_directive("use strict")&&v("Legacy octal escape sequences are not allowed in strict mode");return String.fromCharCode(parseInt(e,8))}(n);if("u"==n){var t=u(!0,e);if(n+=t,"{"!=t)n+=u(!0,e)+u(!0,e)+u(!0,e);else for(;n+=t=u(!0,e),"}"!=t;);}else"x"==n&&(n+=u(!0,e)+u(!0,e));var i=gr(n);return"string"!=typeof i&&v("Invalid escape sequence: \\"+n),i}var b=e("Unterminated string constant",function(e){for(var n=u(),t="";;){var i=u(!0,!0);if("\\"==i)i=g(!0);else if(q[i])v("Unterminated string constant");else if(i==n)break;t+=i}var r=h("string",t);return r.quote=e,r});function y(e){var n,t=s.regex_allowed,i=function(){for(var e=s.text,n=s.pos;n<s.text.length;++n)if(q[e[n]])return n;return-1}();return-1==i?(n=s.text.substr(s.pos),s.pos=s.text.length):(n=s.text.substring(s.pos,i),s.pos=i),s.col=s.tokcol+(s.pos-s.tokpos),s.comments_before.push(h(e,n,!0)),s.regex_allowed=t,S}var w=e("Unterminated multiline comment",function(){var e=s.regex_allowed,n=function(e,n){if(e=s.text.indexOf(e,s.pos),n&&-1==e)throw L;return e}("*/",!0),n=s.text.substring(s.pos,n).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return l(n.length+2),s.comments_before.push(h("comment2",n,!0)),s.regex_allowed=e,S});function x(){for(var e,n,t=!1,i=!1,r="#"==c()?u():"";e=c();)if(t)"u"!=e&&v("Expecting UnicodeEscapeSequence -- uXXXX"),B(e=g())||v("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),r+=e,t=!1;else if("\\"==e)i=t=!0,u();else{if(!B(e))break;r+=u()}return pe[r]&&i&&(n=r.charCodeAt(0).toString(16).toUpperCase(),r="\\u"+"0000".substr(n.length)+n+r.slice(1)),r}var k=e("Unterminated regular expression",function(e){for(var n,t=!1,i=!1;n=u(!0);)if(q[n])v("Unexpected line terminator");else if(t)e+="\\"+n,t=!1;else if("["==n)i=!0,e+=n;else if("]"==n&&i)i=!1,e+=n;else{if("/"==n&&!i)break;"\\"==n?t=!0:e+=n}var r=x();try{var o=new RegExp(e,r);return o.raw_source=e,h("regexp",o)}catch(e){v(e.message)}});function E(e){return h("operator",function e(n){if(!c())return n;var t=n+c();return z[t]?(u(),e(t)):n}(e||u()))}function e(n,t){return function(e){try{return t(e)}catch(e){if(e!==L)throw e;v(n)}}}function S(e){if(null!=e)return k(e);for(a&&0==s.pos&&p("#!")&&(d(),l(2),y("comment5"));;){if(!function(){for(;N[c()];)u()}(),d(),o){if(p("\x3c!--")){l(4),y("comment3");continue}if(p("--\x3e")&&s.newline_before){l(3),y("comment4");continue}}var n=c();if(!n)return h("eof");var t=n.charCodeAt(0);switch(t){case 34:case 39:return b(n);case 46:return function(){u();var e=c();if("."!=e)return H(e.charCodeAt(0))?_("."):h("punc",".");for(var n=".";n+=".",u(),"."==c(););return h("operator",n)}();case 47:var i=function(){switch(u(),c()){case"/":return u(),y("comment1");case"*":return u(),w()}return s.regex_allowed?k(""):E("/")}();if(i===S)continue;return i}if(H(t))return _();if(P[n])return h("punc",u());if(p("=>"))return h("punc",u()+u());if(C[n])return E();if(35==t||92==t||!I[n])return t=void 0,t=x(),f?h("name",t):A[t]?h("atom",t):pe[t]?z[t]?h("operator",t):h("keyword",t):h("name",t);break}v("Unexpected character '"+n+"'")}return S.context=function(e){return s=e?e:s},S.add_directive=function(e){s.directive_stack[s.directive_stack.length-1].push(e),s.directives[e]?s.directives[e]++:s.directives[e]=1},S.push_directives_stack=function(){s.directive_stack.push([])},S.pop_directives_stack=function(){for(var e=s.directive_stack.pop(),n=e.length;0<=--n;)s.directives[e[n]]--},S.has_directive=function(e){return 0<s.directives[e]},S}var _e=Rn("typeof void delete -- ++ ! ~ - +"),yr=Rn("-- ++"),ge=Rn("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),wr=function(e,n){for(var t=0;t<e.length;)for(var i=e[t++],r=0;r<i.length;r++)n[i[r]]=t;return n}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),be=Rn("atom bigint num regexp string");function xr(e,l){l=re(l,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,shebang:!0,strict:!1,toplevel:null},!0);var h={input:"string"==typeof e?me(e,l.filename,l.html5_comments,l.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function v(e,n){return ve(h.token,e,n)}function p(){return h.peeked||(h.peeked=h.input())}function m(){return h.prev=h.token,h.peeked?(h.token=h.peeked,h.peeked=null):h.token=h.input(),h.in_directives=h.in_directives&&("string"==h.token.type||v("punc",";")),h.token}function _(){return h.prev}function f(e,n,t,i){var r=h.input.context();he(e,r.filename,null!=n?n:r.tokline,null!=t?t:r.tokcol,null!=i?i:r.tokpos)}function a(e,n){f(n,e.line,e.col)}function t(e,n){return e+(void 0===n?"":" «"+n+"»")}function g(e){a(e=null==e?h.token:e,"Unexpected token: "+t(e.type,e.value))}function d(e,n){if(v(e,n))return m();a(h.token,"Unexpected token: "+t(h.token.type,h.token.value)+", expected: "+t(e,n))}function b(e){return d("punc",e)}function s(e){return e.nlb||!Bn(e.comments_before,function(e){return!e.nlb})}function c(){return!l.strict&&(v("eof")||v("punc","}")||s(h.token))}function y(e){v("punc",";")?m():e||c()||b(";")}function u(){b("(");var e=te();return b(")"),e}function n(i){return function(){var e=h.token,n=i.apply(null,arguments),t=_();return n.start=e,n.end=t,n}}function w(){(v("operator","/")||v("operator","/="))&&(h.peeked=null,h.token=h.input(h.token.value.substr(1)))}h.token=m();var x=n(function(){switch(w(),h.token.type){case"string":var e=h.in_directives,n=te();return e&&(n instanceof ir?(o=n.start.raw.slice(1,-1),h.input.add_directive(o),n.value=o):h.in_directives=e=!1),y(),e?new Xn(n):new Zn({body:n});case"num":case"bigint":case"regexp":case"operator":case"atom":return k();case"name":switch(h.token.value){case"async":if(ve(p(),"keyword","function"))return m(),m(),v("operator","*")?(m(),O(zt)):O($t);break;case"await":if(h.in_async)return k();break;case"export":return m(),function(){if(v("operator","*")){m();var e="*";v("name","as")&&(m(),$()||d("name"),e=h.token.value,m()),d("name","from");var n=h.token;return d("string"),y(),new fe({aliases:[e],keys:["*"],path:n.value,quote:n.quote})}if(v("punc","{")){m();for(var t=[],i=[];$();){var r=h.token;m(),i.push(r),v("name","as")?(m(),$()||d("name"),t.push(h.token.value),m()):t.push(r.value),v("punc","}")||b(",")}if(b("}"),v("name","from")){m();n=h.token;return d("string"),y(),new fe({aliases:t,keys:i.map(function(e){return e.value}),path:n.value,quote:n.quote})}return y(),new fi({properties:i.map(function(e,n){ve(e,"name")||a(e,"Name expected");e=L(Xi,e);return e.alias=t[n],e})})}if(v("keyword","default")){m();e=h.token,n=function(){if(v("name","async")){if(ve(p(),"keyword","function"))return m(),m(),v("operator","*")?(m(),z(zt,O(Tt))):z($t,O(St))}else if(v("keyword"))switch(h.token.value){case"class":return m(),z(Ft,T(jt));case"function":return(m(),v("operator","*"))?(m(),z(Ct,O(Dt))):z(qt,O(At))}}();return n?(n.start=e,n.end=_()):(w(),n=te(),y()),new si({body:n})}return new ai({body:q()})}();case"import":var t=p();if("punc"!=t.type||!/^[(.]$/.test(t.value))return m(),function(){var e,n=null,t=V(Yi,!0),i=null;if(t?(t.key="",v("punc",",")&&m()):!v("string"))if(v("operator","*"))m(),d("name","as"),(n=V(Yi)).key="*";else{for(b("{"),i=[];$();){var r;ve(p(),"name","as")?(r=h.token.value,m(),m(),(e=V(Yi)).key=r):(e=V(Yi)).key=e.name,i.push(e),v("punc","}")||b(",")}b("}")}(n||t||i)&&d("name","from");var o=h.token;return d("string"),y(),new ci({all:n,default:t,path:o.value,properties:i,quote:o.quote})}();case"yield":if(h.in_generator)return k()}return(ve(p(),"punc",":")?function(){var n=V(ue);Bn(h.labels,function(e){return e.name!=n.name})||f("Label "+n.name+" defined twice");b(":"),h.labels.push(n);var e=x();h.labels.pop(),e instanceof ot||n.references.forEach(function(e){e instanceof Vt&&a(e.label.start,"Continue label `"+n.name+"` must refer to IterationStatement")});return new rt({body:e,label:n})}:k)();case"punc":switch(h.token.value){case"{":return new it({start:h.token,body:C(),end:_()});case"[":case"(":case"`":return k();case";":return h.in_directives=!1,m(),new Kn;default:g()}case"keyword":switch(h.token.value){case"break":return m(),E(Ut);case"class":return m(),T(Ft);case"const":m();var i=F();return y(),i;case"continue":return m(),E(Vt);case"debugger":return m(),y(),new Jn;case"do":m();n=ie(x);d("keyword","while");var r=u();return y(!0),new st({body:n,condition:r});case"while":return m(),new ft({condition:u(),body:ie(x)});case"for":return m(),function(){var e=v("name","await")&&m();b("(");var n,t=null;if((e||!v("punc",";"))&&(t=v("keyword","const")?(m(),F(!0)):v("keyword","let")?(m(),j(!0)):v("keyword","var")?(m(),P(!0)):te(!0),e?(d("name","of"),n=pt):v("operator","in")?(m(),n=lt):v("name","of")&&(m(),n=oe),n))return t instanceof ni?(1<t.definitions.length&&a(t.start,"Only one variable declaration allowed in for..in/of loop"),n!==lt&&t.definitions[0].value&&a(t.definitions[0].value.start,"No initializers allowed in for..of loop")):Z(t)||(t=ee(t))instanceof Di||a(t.start,"Invalid left-hand side in for..in/of loop"),function(e,n){w();var t=te();return b(")"),new e({init:n,object:t,body:ie(x)})}(n,t);return function(e){b(";");var n=v("punc",";")?null:te();b(";");var t=v("punc",")")?null:te();return b(")"),new ct({init:e,condition:n,step:t,body:ie(x)})}(t)}();case"function":return(m(),v("operator","*"))?(m(),O(Ct)):O(qt);case"if":return m(),function(){var e=u(),n=x(),t=null;v("keyword","else")&&(m(),t=x());return new Wt({condition:e,body:n,alternative:t})}();case"let":m();i=j();return y(),i;case"return":0!=h.in_function||l.bare_returns||f("'return' outside of function"),m();var o=null;return v("punc",";")?m():c()||(o=te(),y()),new Rt({value:o});case"switch":return m(),new Gt({expression:u(),body:ie(M)});case"throw":m(),s(h.token)&&f("Illegal newline after 'throw'");o=te();return y(),new Bt({value:o});case"try":return m(),function(){var e=C(),n=null,t=null;{var i;v("keyword","catch")&&(r=h.token,m(),i=null,v("punc","(")&&(m(),i=W(Gi),b(")")),n=new Zt({start:r,argname:i,body:C(),end:_()}))}{var r;v("keyword","finally")&&(r=h.token,m(),t=new ei({start:r,body:C(),end:_()}))}n||t||f("Missing catch/finally blocks");return new Qt({body:e,bcatch:n,bfinally:t})}();case"var":m();i=P();return y(),i;case"with":return h.input.has_directive("use strict")&&f("Strict mode may not include a with statement"),m(),new dt({expression:u(),body:x()})}}g()});function k(){var e=te();return y(),new Zn({body:e})}function E(e){var n,t=null;null!=(t=!c()?V(le,!0):t)?((n=qn(function(e){return e.name==t.name},h.labels))||a(t.start,"Undefined label "+t.name),t.thedef=n):0==h.in_loop&&f(e.TYPE+" not inside a loop or switch"),y();e=new e({label:t});return n&&n.references.push(e),e}function S(e){if(v("name",e)){e=p();if(e&&!ve(e,"operator","=")&&!("punc"==e.type&&/^[(;}]$/.test(e.value)||s(e)))return m()}}function T(e){var n=h.in_async,t=h.in_generator;h.input.push_directives_stack(),h.input.add_directive("use strict");var i=e===Ft?V(ce):V(Wi,!0),r=null;v("keyword","extends")&&(m(),w(),r=N(!0)),b("{");for(var o=[];!v("punc","}");)if(v("punc",";"))m();else{var a=h.token,s=!!S("static"),f=S("async");if(v("operator","*")){m();var c=v("name")&&/^#/.test(h.token.value),u=B(),l=h.token,p=O(f?Tt:Dt);p.start=l,p.end=_(),o.push(new It({start:a,static:s,private:c,key:u,value:p,end:_()}))}else{c=v("name")&&/^#/.test(h.token.value),u=B();if(v("punc","(")){l=h.token,p=O(f?St:At);p.start=l,p.end=_(),o.push(new It({start:a,static:s,private:c,key:u,value:p,end:_()}))}else{f&&g(f);f=null;if(v("operator","="))m(),h.in_async=!1,h.in_generator=!1,f=ne(),h.in_generator=t,h.in_async=n;else if(!v("punc",";")&&!v("punc","}")){var d=null;switch(u){case"get":d=ae;break;case"set":d=se}if(d){o.push(new d({start:a,static:s,private:v("name")&&/^#/.test(h.token.value),key:B(),value:Y(),end:_()}));continue}}y(),o.push(new Nt({start:a,static:s,private:c,key:u,value:f,end:_()}))}}}return m(),h.input.pop_directives_stack(),h.in_generator=t,h.in_async=n,new e({extends:r,name:i,properties:o})}function A(e){if(e instanceof Ai){var n=null;return e.elements[e.elements.length-1]instanceof gi&&(n=A(e.elements.pop().expression)),new Oi({start:e.start,elements:e.elements.map(A),rest:n,end:e.end})}if(e instanceof Ei)return new ui({start:e.start,name:A(e.left),value:e.right,end:e.end});if(e instanceof ui)return e.name=A(e.name),e;if(e instanceof Oi)return e.elements=e.elements.map(A),e.rest&&(e.rest=A(e.rest)),e;if(e instanceof zi)return e.properties.forEach(function(e){e.value=A(e.value)}),e.rest&&(e.rest=A(e.rest)),e;if(e instanceof ur)return e;if(e instanceof qi){n=null;return e.properties[e.properties.length-1]instanceof gi&&(n=A(e.properties.pop().expression)),new zi({start:e.start,properties:e.properties.map(function(e){return e instanceof Mi||a(e.start,"Invalid destructuring assignment"),new $i({start:e.start,key:e.key,value:A(e.value),end:e.end})}),rest:n,end:e.end})}return e instanceof Li?e:e instanceof Ji?new Li(e):void a(e.start,"Invalid arrow parameter")}function D(e,n,t){var i=h.in_async,r=h.in_generator;h.in_async=t,h.in_generator=!1;var o=h.in_funarg;h.in_funarg=h.in_function;var a,s=e.map(A),f=(f=e.rest||null)&&A(f);h.in_funarg=o,b("=>");var c=h.in_loop,u=h.labels;++h.in_function,h.in_directives=!0,h.input.push_directives_stack(),h.in_loop=0,h.labels=[];e=v("punc","{")?(a=C(),null):(a=[],w(),ne()),o=h.input.has_directive("use strict");h.input.pop_directives_stack(),--h.in_function,h.in_loop=c,h.labels=u,h.in_generator=r,h.in_async=i;e=new(t?Et:kt)({start:n,argnames:s,rest:f,body:a,value:e,end:_()});return o&&e.each_argname(U),e}var O=function(e){var n,t=h.in_async,i=h.in_generator;/Defun$/.test(e.TYPE)?(n=V(Ui),h.in_async=/^Async/.test(e.TYPE),h.in_generator=/Generator/.test(e.TYPE)):(h.in_async=/^Async/.test(e.TYPE),h.in_generator=/Generator/.test(e.TYPE),n=V(Vi,!0)),!n||e===_t||n instanceof Ii||g(_()),b("(");var r=h.in_funarg;h.in_funarg=h.in_function;var o=I(")",!l.strict,!1,function(){return G(Li)});h.in_funarg=r;var a=h.in_loop,s=h.labels;++h.in_function,h.in_directives=!0,h.input.push_directives_stack(),h.in_loop=0,h.labels=[];var f=C(),r=h.input.has_directive("use strict");h.input.pop_directives_stack(),--h.in_function,h.in_loop=a,h.labels=s,h.in_generator=i,h.in_async=t;f=new e({name:n,argnames:o,rest:o.rest||null,body:f});return r&&(n&&U(n),f.each_argname(U)),f};function $(){return v("name")||_r(h.token.value)}function z(e,n){return n.name&&((n=new e(n)).name=new(e===Ft?ce:Ui)(n.name)),n}var q=n(function(){if(v("name","async"))return m(),d("keyword","function"),v("operator","*")?(m(),O(zt)):O($t);if(v("keyword"))switch(h.token.value){case"class":return m(),T(Ft);case"const":m();var e=F();return y(),e;case"function":return(m(),v("operator","*"))?(m(),O(Ct)):O(qt);case"let":m();e=j();return y(),e;case"var":m();e=P();return y(),e}g()});function C(){b("{");for(var e=[];!v("punc","}");)v("eof")&&b("}"),e.push(x());return m(),e}function M(){b("{");for(var e,n,t,i,r=[];!v("punc","}");)v("eof")&&b("}"),v("keyword","case")?(e&&(e.end=_()),n=[],e=new Kt({start:(i=h.token,m(),i),expression:te(),body:n}),r.push(e),b(":")):v("keyword","default")?(e&&(e.end=_()),t&&f("More than one default clause in switch statement"),n=[],e=new Xt({start:(i=h.token,m(),b(":"),i),body:n}),r.push(e),t=e):(n||g(),n.push(x()));return e&&(e.end=_()),m(),r}function i(e,n){for(var t=[];;){var i=h.token,r=W(e),o=null;if(v("operator","=")?(m(),o=ne(n)):!n&&(e===Hi||r instanceof Di)&&f("Missing initializer in declaration"),t.push(new oi({start:i,name:r,value:o,end:_()})),!v("punc",","))break;m()}return t}var F=function(e){return new ti({start:_(),definitions:i(Hi,e),end:_()})},j=function(e){return new ii({start:_(),definitions:i(Ri,e),end:_()})},P=function(e){return new ri({start:_(),definitions:i(Bi,e),end:_()})};var N=function(e){if(v("operator","new"))return u=e,t=h.token,d("operator","new"),(c=v("punc",".")&&ve(p(),"name","target")?(m(),m(),new er):(n=N(!1),c=v("punc","(")?(m(),I(")",!l.strict)):[],new pi({expression:n,args:c}))).start=t,c.end=_(),X(c,u);var n,t,i=h.token;if(v("punc")){switch(i.value){case"`":return X(J(null),e);case"(":if(m(),v("punc",")"))return m(),D([],i);var r=te(!1,!0),o=i.comments_before.length;[].unshift.apply(r.start.comments_before,i.comments_before),i.comments_before.length=0,i.comments_before=r.start.comments_before,0==(i.comments_before_length=o)&&0<i.comments_before.length&&((a=i.comments_before[0]).nlb||(a.nlb=i.nlb,i.nlb=!1)),i.comments_after=r.start.comments_after,r.start=i,b(")");var a=_();return a.comments_before=r.end.comments_before,a.comments_after.forEach(function(e){r.end.comments_after.push(e),e.nlb&&(h.token.nlb=!0)}),a.comments_after.length=0,a.comments_after=r.end.comments_after,r.end=a,v("punc","=>")?D(r instanceof di?r.expressions:[r],i):X(r,e);case"[":return X(H(),e);case"{":return X(R(),e)}g()}if(v("keyword"))switch(i.value){case"class":m();var s=T(jt);return s.start=i,s.end=_(),X(s,e);case"function":return m(),(f=v("operator","*")?(m(),O(Dt)):O(At)).start=i,f.end=_(),X(f,e)}if(v("name")){var f,c=L(Ji,i);if(m(),"async"==c.name){if(v("keyword","function"))return m(),(f=v("operator","*")?(m(),O(Tt)):O(St)).start=i,f.end=_(),X(f,e);if(v("name")&&ve(p(),"punc","=>"))return i=h.token,c=L(Ji,i),m(),D([c],i,!0);if(v("punc","(")){var u=X(c,e);if(!v("punc","=>"))return u;u=u.args;return u[u.length-1]instanceof gi&&(u.rest=u.pop().expression),D(u,i,!0)}}return v("punc","=>")?D([c],i):X(c,e)}if(be[h.token.type])return X(function(){var e,n=h.token,t=n.value;switch(n.type){case"num":isFinite(t)?e=new rr({value:t}):(e=new lr,t<0&&(e=new yi({operator:"-",expression:e})));break;case"bigint":e=new or({value:t});break;case"string":e=new ir({value:t,quote:n.quote});break;case"regexp":e=new ar({value:t});break;case"atom":switch(t){case"false":e=new dr;break;case"true":e=new hr;break;case"null":e=new sr;break;default:g()}break;default:g()}return m(),e.start=e.end=n,e}(),e);g()};function I(e,n,t,i){i=i||ne;for(var r=!0,o=[];!v("punc",e)&&(r?r=!1:b(","),!n||!v("punc",e));)if(t&&v("punc",","))o.push(new ur({start:h.token,end:h.token}));else if(v("operator","...")){if(i!==ne){m(),o.rest=i(),o.rest instanceof ui&&a(o.rest.start,"Invalid rest parameter");break}o.push(new gi({start:h.token,expression:(m(),i()),end:_()}))}else o.push(i());return b(e),o}var H=n(function(){return b("["),new Ai({elements:I("]",!l.strict,!0)})}),Y=n(function(){return O(_t)}),R=n(function(){b("{");for(var e=!0,n=[];!v("punc","}")&&(e?e=!1:b(","),l.strict||!v("punc","}"));){var t=h.token;if(v("operator","*")){m();var i=B(),r=h.token,o=O(Dt);o.start=r,o.end=_(),n.push(new Fi({start:t,key:i,value:o,end:_()}))}else if(v("operator","..."))m(),n.push(new gi({start:t,expression:ne(),end:_()}));else if(ve(p(),"operator","=")){o=V(Ji);m(),n.push(new Mi({start:t,key:t.value,value:new Ei({start:t,left:o,operator:"=",right:ne(),end:_()}),end:_()}))}else if(ve(p(),"punc",",")||ve(p(),"punc","}"))n.push(new Mi({start:t,key:t.value,value:V(Ji),end:_()}));else{i=B();if(v("punc","(")){var a=h.token;(f=O(At)).start=a,f.end=_(),n.push(new Fi({start:t,key:i,value:f,end:_()}))}else if(v("punc",":"))m(),n.push(new Mi({start:t,key:i,value:ne(),end:_()}));else{if("name"==t.type)switch(i){case"async":var s=v("operator","*")&&m();i=B();var f,a=h.token;(f=O(s?Tt:St)).start=a,f.end=_(),n.push(new Fi({start:t,key:i,value:f,end:_()}));continue;case"get":n.push(new Pi({start:t,key:B(),value:Y(),end:_()}));continue;case"set":n.push(new ji({start:t,key:B(),value:Y(),end:_()}));continue}g()}}}return m(),new qi({properties:n})});function B(){var e=h.token;switch(e.type){case"operator":pe[e.value]||g();case"num":case"string":case"name":case"keyword":case"atom":return m(),""+e.value;case"punc":b("[");var n=ne();return b("]"),n;default:g()}}function L(e,n){var t=n.value;switch(t){case"await":h.in_async&&g(n);break;case"super":e=Qi;break;case"this":e=Zi;break;case"yield":h.in_generator&&g(n)}return new e({name:""+t,start:n,end:n})}function U(e){"arguments"!=e.name&&"eval"!=e.name||a(e.start,"Unexpected "+e.name+" in strict mode")}function V(e,n){if(!v("name"))return n||f("Name expected"),null;e=L(e,h.token);return h.input.has_directive("use strict")&&e instanceof Ii&&U(e),m(),e}function W(e){var n=h.token;if(v("punc","[")){m();var t=I("]",!l.strict,!0,function(){return G(e)});return new Oi({start:n,elements:t,rest:t.rest||null,end:_()})}if(v("punc","{")){m();for(var i=!0,r=[],o=null;!v("punc","}")&&(i?i=!1:b(","),l.strict||!v("punc","}"));){var a=h.token;if(v("punc","[")||ve(p(),"punc",":")){var s=B();b(":"),r.push(new $i({start:a,key:s,value:G(e),end:_()}))}else{if(v("operator","...")){m(),o=W(e);break}s=V(e);v("operator","=")&&(m(),s=new ui({start:s.start,name:s,value:ne(),end:_()})),r.push(new $i({start:a,key:a.value,value:s,end:_()}))}}return b("}"),new zi({start:n,properties:r,rest:o,end:_()})}return V(e)}function G(e){var n=h.token,e=W(e);return v("operator","=")?(m(),new ui({start:n,name:e,value:ne(),end:_()})):e}function J(e){for(var n=e?e.start:h.token,t=h.input.context().read_template,i=[],r=[];t(i);)m(),r.push(te()),v("punc","}")||g();return m(),new nr({start:n,expressions:r,strings:i,tag:e,end:_()})}function X(e,n){for(var t=e.start,i=null;;)if(v("operator","?")&&ve(p(),"punc",".")&&(m(),m(),i=e),v("punc","[")){m();var r=te();b("]"),e=new _i({start:t,optional:i===e,expression:e,property:r,end:_()})}else if(n&&v("punc","("))m(),e=new li({start:t,optional:i===e,expression:e,args:I(")",!l.strict),end:_()});else if(i===e||v("punc","."))i!==e&&m(),e=new mi({start:t,optional:i===e,expression:e,property:(r=void 0,r=h.token.value,d("name"),r),end:_()});else{if(!v("punc","`"))break;i&&f("Invalid template on optional chain"),e=J(e)}if(i&&(e.terminal=!0),e instanceof li&&!e.pure)for(var o=(t=e.start).comments_before,a=Un(t,"comments_before_length")?t.comments_before_length:o.length;0<=--a;){var s=/[@#]__PURE__/.exec(o[a].value);if(s){e.pure=s[0];break}}return e}function o(e){var n=h.token;if(h.in_async&&v("name","await"))return h.in_funarg===h.in_function&&f("Invalid use of await in function argument"),h.input.context().regex_allowed=!0,m(),new Si({start:n,expression:o(e),end:_()});if(h.in_generator&&v("name","yield")){h.in_funarg===h.in_function&&f("Invalid use of yield in function argument"),h.input.context().regex_allowed=!0,m();var t=null,i=!1;return v("operator","*")?(m(),t=ne(e),i=!0):(v("punc")?de[h.token.value]:c())||(t=ne(e)),new Ti({start:n,expression:t,nested:i,end:_()})}if(v("operator")&&_e[n.value]){m(),w();e=K(yi,n,o(e));return e.start=n,e.end=_(),e}for(var r=N(!0);v("operator")&&yr[h.token.value]&&!s(h.token);)(r=K(wi,h.token,r)).start=n,r.end=h.token,m();return r}function K(e,n,t){var i=n.value;switch(i){case"++":case"--":Z(t)||a(n,"Invalid use of "+i+" operator");break;case"delete":t instanceof Ji&&h.input.has_directive("use strict")&&a(t.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:i,expression:t})}var Q=function(e,n,t){var i=v("operator")?h.token.value:null,r=null!=(i="in"==i&&t?null:i)?wr[i]:null;if(null!=r&&n<r){m();r=Q(o(t),"**"==i?r-1:r,t);return Q(new xi({start:e.start,left:e,operator:i,right:r,end:r.end}),n,t)}return e};var r=function(e){var n=h.token,t=Q(o(i=e),0,i);if(v("operator","?")){m();var i=ne();return b(":"),new ki({start:n,condition:t,consequent:i,alternative:ne(e),end:_()})}return t};function Z(e){return e instanceof vi&&!e.optional||e instanceof Ji}function ee(e){if(e instanceof Ai){var n=null;if(e.elements[e.elements.length-1]instanceof gi&&!((n=ee(e.elements.pop().expression))instanceof Di||Z(n)))return e;var t=e.elements.map(ee);return Bn(t,function(e){return e instanceof ui||e instanceof Di||e instanceof ur||Z(e)})?new Oi({start:e.start,elements:t,rest:n,end:e.end}):e}if(e instanceof Ei){t=ee(e.left);return t instanceof Di||Z(t)?new ui({start:e.start,name:t,value:e.right,end:e.end}):e}if(!(e instanceof qi))return e;n=null;if(e.properties[e.properties.length-1]instanceof gi&&!((n=ee(e.properties.pop().expression))instanceof Di||Z(n)))return e;for(var i=[],r=0;r<e.properties.length;r++){var o=e.properties[r];if(!(o instanceof Mi))return e;var a=ee(o.value);if(!(a instanceof ui||a instanceof Di||Z(a)))return e;i.push(new $i({start:o.start,key:o.key,value:a,end:o.end}))}return new zi({start:e.start,properties:i,rest:n,end:e.end})}function ne(e){var n=h.token,t=r(e),i=h.token.value;if(v("operator")&&ge[i]){if(Z(t)||"="==i&&(t=ee(t))instanceof Di)return m(),new Ei({start:n,left:t,operator:i,right:ne(e),end:_()});f("Invalid assignment")}return t}function te(e,n){for(var t=h.token,i=[];;){if(n&&v("operator","...")){m(),i.rest=W(Li);break}if(i.push(ne(e)),!v("punc",","))break;if(m(),n&&v("punc",")")&&ve(p(),"punc","=>"))break}return 1!=i.length||i.rest?new di({start:t,expressions:i,end:_()}):i[0]}function ie(e){++h.in_loop;e=e();return--h.in_loop,e}if(l.expression){w();e=te();return d("eof"),e}return function(){var e=h.token,n=[];for(h.input.push_directives_stack();!v("eof");)n.push(x());h.input.pop_directives_stack();var t=_()||e,i=l.toplevel;return i?(i.body=i.body.concat(n),i.end=t):i=new vt({start:e,body:n,end:t}),i}()}function v(e,n,t,i){this.eliminated=0,this.exported=!1,this.global=!1,this.id=e,this.init=i,this.mangled_name=null,this.name=t.name,this.orig=[t],this.references=[],this.replaced=0,this.scope=n,this.undeclared=!1}v.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){var n,t=e.cache&&e.cache.props;this.global&&t&&t.has(this.name)?this.mangled_name=t.get(this.name):this.mangled_name||this.unmangleable(e)||(n=this.redefined(),this.mangled_name=n?n.mangled_name||n.name:function(e,i){var n,t=e.scope,r=m(t,i),o=t.cname_holes,a=Object.create(null),s=[t];e.forEach(function(e){var n=e.scope;do{if(!(s.indexOf(n)<0))break;for(var t in m(n,i))a[t]=!0}while(s.push(n),n=n.parent_scope)});for(var f=0;f<o.length;f++)if(n=S(o[f]),!a[n])return o.splice(f,1),r[n]=!0,n;for(;;)if(n=S(++t.cname),!(r[n]||j[n]||i.reserved.has[n])){if(!a[n])break;o.push(t.cname)}return r[n]=!0,n}(this,e),this.global&&t&&t.set(this.name,this.mangled_name))},redefined:function(){var e=this.defun;if(e){var n=this.name,e=e.variables.get(n)||e instanceof vt&&e.globals.get(n)||this.orig[0]instanceof Hi&&qn(function(e){return e.name==n},e.enclosed);return e&&e!==this?e.redefined()||e:void 0}},unmangleable:function(e){return this.global&&!e.toplevel||this.exported||this.undeclared||!e.eval&&this.scope.pinned()||e.keep_fnames&&(this.orig[0]instanceof Wi||this.orig[0]instanceof ce||this.orig[0]instanceof Ui||this.orig[0]instanceof Vi)}};var kr=Rn("delete ++ --");function Er(e,n){return n instanceof Ei?n.left===e&&e:n instanceof ui?n.name===e&&e:n instanceof Di||n instanceof $i?e:n instanceof ut?n.init===e&&e:n instanceof bi?kr[n.operator]&&n.expression:void 0}function d(e,n){e.enclosed=[],e.parent_scope=n,e.functions=new Ln,e.variables=new Ln,n&&(e.make_def=n.make_def)}function h(e,n){d(e,n),e.uses_eval=!1,e.uses_with=!1}function m(e,n){var t,i=e.names_in_use;return i||(e.cname=-1,e.cname_holes=[],e.names_in_use=i=Object.create(null),t=n.cache&&n.cache.props,e.enclosed.forEach(function(e){e.unmangleable(n)&&(i[e.name]=!0),e.global&&t&&t.has(e.name)&&(i[t.get(e.name)]=!0)})),i}function b(e){return e=re(e,{eval:!1,ie:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),In(e.reserved,"arguments"),e.reserved.has=Rn(e.reserved),e}vt.DEFMETHOD("figure_out_scope",function(u){u=re(u,{cache:null,ie:!1});var l=this,s=null,f=!1,t=0,c=l.parent_scope=null,p=new vr(function(i,e){if(i instanceof Ft){var n=f;return f=p.parent()instanceof ai,i.name.walk(p),f=n,o(function(){i.extends&&i.extends.walk(p),i.properties.forEach(function(e){e.walk(p)})}),!0}if(i instanceof ni){n=f;return f=p.parent()instanceof ai,e(),f=n,!0}if(i instanceof Ot){n=f;return f=p.parent()instanceof ai,i.name.walk(p),f=n,o(function(){i.argnames.forEach(function(e){e.walk(p)}),i.rest&&i.rest.walk(p),nt(i,p)}),!0}if(i instanceof Jt)return i.init_vars(c),e(),!0;if(i instanceof Qt)return o(function(){nt(i,p)}),i.bcatch&&i.bcatch.walk(p),i.bfinally&&i.bfinally.walk(p),!0;if(i instanceof dt){for(var t=c;!(t=t.resolve()).uses_with&&(t.uses_with=!0,t=t.parent_scope););return o(e),!0}if(i instanceof et)return o(e),!0;var r;function o(e){i.init_vars(c);var n=s,t=c;i instanceof ht&&(s=i),c=i,e(),c=t,s=n}function a(e,n){e!==n&&(i.mark_enclosed(u),n=n.find_variable(i.name),i.thedef!==n&&((i.thedef=n).orig.push(i),i.mark_enclosed(u)))}i instanceof Ni&&(i.scope=c),i instanceof ue&&((i.thedef=i).references=[]),i instanceof Gi?c.def_variable(i).defun=s:i instanceof Hi?((r=c.def_variable(i)).defun=s,f&&(r.exported=!0)):i instanceof Ui?(r=s.def_function(i,p.parent()),f&&(r.exported=!0),a(s,c)):i instanceof Li?(s.def_variable(i),a(s,c)):i instanceof Vi?(r=s.def_function(i,"arguments"==i.name?void 0:s),u.ie&&(r.defun=s.parent_scope.resolve())):i instanceof Ri?(r=c.def_variable(i),f&&(r.exported=!0)):i instanceof Bi&&(r=s.def_variable(i,i instanceof Yi?void 0:null),f&&(r.exported=!0),a(s,c))});l.make_def=function(e,n){return new v(++t,this,e,n)},l.walk(p),l.globals=new Ln;var d=[],p=new vr(function(e){if(e instanceof Zt)return e.argname instanceof Di?(d.push(e),e.argname.walk(p),d.pop(),nt(e,p),!0):void 0;if(e instanceof mt)return d.push(e),e.argnames.forEach(function(e){e.walk(p)}),e.rest&&e.rest.walk(p),d.pop(),xt(e,p),!0;if(e instanceof Lt)return e.label&&e.label.thedef.references.push(e),!0;if(e instanceof Ii){var n,t=e.definition();if(t.preinit=t.references.length,e instanceof Gi){if(n=t.redefined())for(var i=e.scope;i&&(In(i.enclosed,n),i!==n.scope);i=i.parent_scope);}else e instanceof Hi&&(n=t.redefined())&&(n.const_redefs=!0);return"arguments"!=e.name?!0:((r=e instanceof Bi&&p.parent())instanceof oi&&!r.value||(a=e.scope.resolve().find_variable("arguments"))&&h(a)&&(a.scope.uses_arguments=3),!0)}if(e instanceof Ji){for(var r,o=e.name,a=e.scope.find_variable(o),s=d.length;0<s&&a&&!((s=d.lastIndexOf(a.scope,s-1))<0);){var f=a.orig[0];if(f instanceof Gi||f instanceof Li||f instanceof Vi){e.in_arg=!0;break}a=a.scope.parent_scope.find_variable(o)}if(a?"arguments"==o&&h(a)&&(Er(e,r=p.parent())?a.scope.uses_arguments=3:a.scope.uses_arguments<2&&!(r instanceof vi&&r.expression===e)?a.scope.uses_arguments=2:a.scope.uses_arguments||(a.scope.uses_arguments=!0)):a=l.def_global(e),"eval"==o)if("Call"==(r=p.parent()).TYPE&&r.expression===e)for(i=e.scope;!(i=i.resolve()).uses_eval&&(i.uses_eval=!0,i=i.parent_scope););else a.undeclared&&(l.uses_eval=!0);if(a.init instanceof Ot&&a.scope!==a.init.name.scope){var c=e.scope;do{if(c===a.init.name.scope)break}while(c=c.parent_scope);c||(a.init=void 0)}return e.thedef=a,e.reference(u),!0}});function h(e){return e.orig[0]instanceof Li&&!(e.orig[1]instanceof Li||e.orig[2]instanceof Li)&&!bt(e.scope)}function i(e,n){var t=e.name,i=e.thedef;if(Bn(i.orig,function(e){return!(e instanceof Hi||e instanceof Ri)})){var r,o=n.find_variable(t);return(o?(r=o.redefined())&&(o=r):o=l.globals.get(t),o?o.orig.push(e):o=n.def_variable(e),o.undeclared&&l.variables.set(t,o),"arguments"==t&&h(i)&&e instanceof Vi)?1:(i.defun=o.scope,i.forEach(function(e){e.redef=i,e.thedef=o,e.reference(u)}),1)}}l.walk(p),u.ie&&l.walk(new vr(function(e){if(e instanceof Gi){var n=e.thedef.defun;return i(e,n=n.name instanceof Vi&&n.name.name==e.name?n.parent_scope.resolve():n),!0}if(e instanceof Vi){n=e.thedef;return i(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:n.init&&(e.thedef.init=n.init):delete n.defun,!0}}))}),vt.DEFMETHOD("def_global",function(e){var n=this.globals,t=e.name;if(n.has(t))return n.get(t);e=this.make_def(e);return e.undeclared=!0,e.global=!0,n.set(t,e),e}),et.DEFMETHOD("init_vars",function(e){d(this,e)}),ht.DEFMETHOD("init_vars",function(e){h(this,e)}),kt.DEFMETHOD("init_vars",function(e){return h(this,e),this}),Et.DEFMETHOD("init_vars",function(e){h(this,e)}),mt.DEFMETHOD("init_vars",function(e){return h(this,e),this.uses_arguments=!1,this.def_variable(new Li({name:"arguments",start:this.start,end:this.end})),this}),Ni.DEFMETHOD("mark_enclosed",function(e){for(var n=this.definition(),t=this.scope;t&&(In(t.enclosed,n),e?e.keep_fnames&&t.functions.each(function(e){In(n.scope.enclosed,e)}):delete t._var_names,t!==n.scope);t=t.parent_scope);}),Ni.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),et.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),et.DEFMETHOD("def_function",function(e,n){var t=this.def_variable(e,n);return(!t.init||t.init instanceof Ot)&&(t.init=n),this.functions.set(e.name,t),t}),et.DEFMETHOD("def_variable",function(e,n){var t=this.variables.get(e.name);return t?(t.orig.push(e),t.init instanceof gt&&(t.init=n)):(t=this.make_def(e,n),this.variables.set(e.name,t),t.global=!this.parent_scope),e.thedef=t}),Ni.DEFMETHOD("unmangleable",function(e){var n=this.definition();return!n||n.unmangleable(e)}),ue.DEFMETHOD("unmangleable",Mn),Ni.DEFMETHOD("definition",function(){return this.thedef}),vt.DEFMETHOD("mangle_names",function(o){o=b(o);var n,r=-1;o.cache&&o.cache.props&&(n=m(this,o),o.cache.props.each(function(e){n[e]=!0}));var a=[],s=new vr(function(n,e){if(n instanceof rt){var t=r;return e(),o.v8&&function(e){var n,t=0;for(;n=e.parent(t++);){if(n instanceof tt)return n instanceof vt&&!o.toplevel;if(n instanceof rt)return!0}}(s)||(r=t),!0}var i;if(n instanceof et)return o.webkit&&n instanceof ot&&n.init instanceof ii&&n.init.definitions.forEach(function(e){e.name.match_symbol(function(e){var n,t,i;e instanceof Ri&&(n=e.definition(),t=e.scope.parent_scope,i=t.def_variable(e),e.thedef=n,t.to_mangle.push(i),n.redefined=function(){return i})})},!0),n.to_mangle=[],n.variables.each(function(e){!function(n){var e=n.orig[0],t=n.redefined();if(!t){if(!(e instanceof Hi))return!1;var i=n.scope.resolve();if(n.scope===i)return!1;if(n.scope.parent_scope.find_variable(e.name))return!1;t=i.def_variable(e),i.to_mangle.push(t)}a.push(n),n.references.forEach(r),(e instanceof Gi||e instanceof Hi)&&r(e);return!0;function r(e){e.thedef=t,e.reference(o),e.thedef=n}}(e)&&n.to_mangle.push(e)}),e(),o.cache&&n instanceof vt&&n.globals.each(f),n instanceof qt&&s.has_directive("use asm")&&((e=new Ji(n.name)).scope=n,e.reference(o)),n.to_mangle.forEach(f),!0;if(n instanceof ue){for(;i=S(++r),j[i];);return n.mangled_name=i,!0}});function f(e){o.reserved.has[e.name]||e.mangle(o)}this.walk(s),a.forEach(f)}),vt.DEFMETHOD("find_colliding_names",function(t){var i=t.cache&&t.cache.props,n=Object.create(j);return t.reserved.forEach(r),this.globals.each(o),this.walk(new vr(function(e){e instanceof et&&e.variables.each(o)})),n;function r(e){n[e]=!0}function o(e){var n=e.name;if(e.global&&i&&i.has(n))n=i.get(n);else if(!e.unmangleable(t))return;r(n)}}),vt.DEFMETHOD("expand_names",function(i){S.reset(),S.sort(),i=b(i);var r=this.find_colliding_names(i),o=0;function n(n){var e,t;n.global&&i.cache||n.unmangleable(i)||i.reserved.has[n.name]||(e=n.redefined(),t=e?e.rename||e.name:function(){for(var e;e=S(o++),r[e];);return e}(),n.rename=t,n.forEach(function(e){e.definition()===n&&(e.name=t)}))}this.globals.each(n),this.walk(new vr(function(e){e instanceof et&&e.variables.each(n)}))}),Wn.DEFMETHOD("tail_node",jn),di.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),vt.DEFMETHOD("compute_char_frequency",function(e){e=b(e),S.reset();var n=Ni.prototype.add_source_map;try{Ni.prototype.add_source_map=function(){this.unmangleable(e)||S.consider(this.name,-1)},e.properties&&(mi.prototype.add_source_map=function(){S.consider(this.property,-1)},_i.prototype.add_source_map=function(){!function e(n){n instanceof ir?S.consider(n.value,-1):n instanceof ki?(e(n.consequent),e(n.alternative)):n instanceof di&&e(n.tail_node())}(this.property)}),S.consider(this.print_to_string(),1)}finally{Ni.prototype.add_source_map=n,delete mi.prototype.add_source_map,delete _i.prototype.add_source_map}S.sort()});var y,w,x,k,E,S=(y=Object.create(null),k=U("0123456789"),E=U("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_"),G.consider=function(e,n){for(var t=e.length;0<=--t;)x[e[t]]+=n},G.sort=function(){w=E.sort(W).concat(k).sort(W)},(G.reset=V)(),G);function U(e){for(var n=[],t=0;t<e.length;t++){var i=e[t];n.push(i),y[i]=-.01*t}return n}function V(){w=null,x=Object.create(y)}function W(e,n){return x[n]-x[e]}function G(e){var n=E[e%54];for(e=Math.floor(e/54);0<=--e;e>>=6)n+=w[63&e];return n}function Sr(e,n){if(!(this instanceof Sr))return new Sr(e,n);mr.call(this,this.before,this.after),this.options=re(e,{annotations:!n,arguments:!n,arrows:!n,assignments:!n,awaits:!n,booleans:!n,collapse_vars:!n,comparisons:!n,conditionals:!n,dead_code:!n,default_values:!n,directives:!n,drop_console:!1,drop_debugger:!n,evaluate:!n,expression:!1,functions:!n,global_defs:!1,hoist_exports:!n,hoist_funs:!1,hoist_props:!n,hoist_vars:!1,ie:!1,if_return:!n,imports:!n,inline:!n,join_vars:!n,keep_fargs:n,keep_fnames:!1,keep_infinity:!1,loops:!n,merge_vars:!n,negate_iife:!n,objects:!n,optional_chains:!n,passes:1,properties:!n,pure_funcs:null,pure_getters:!n&&"strict",reduce_funcs:!n,reduce_vars:!n,rests:!n,sequences:!n,side_effects:!n,spreads:!n,strings:!n,switches:!n,templates:!n,top_retain:null,toplevel:!(!e||!e.top_retain),typeofs:!n,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!n,varify:!n,webkit:!1,yields:!n},!0);n=this.options.evaluate;this.eval_threshold=/eager/.test(n)?1/0:+n;var t=this.options.global_defs;if("object"==typeof t)for(var i in t)/^@/.test(i)&&Un(t,i)&&(t[i.slice(1)]=xr(t[i],{expression:!0}));!0===this.options.inline&&(this.options.inline=3),this.drop_fargs=this.options.keep_fargs?Mn:function(e,n){if(e.length_read)return!1;var t=e.name;if(!t)return n&&"Call"==n.TYPE&&n.expression===e;if(t.fixed_value()!==e)return!1;t=t.definition();if(t.direct_access)return!1;t=t.escaped;return t&&1!=t.depth};var r=this.options.pure_funcs;"function"==typeof r?this.pure_funcs=r:"string"==typeof r?this.pure_funcs=function(e){var n;return e instanceof li?n=e.expression:e instanceof nr&&(n=e.tag),!(n&&r===n.print_to_string())}:Array.isArray(r)?this.pure_funcs=function(e){var n;return e instanceof li?n=e.expression:e instanceof nr&&(n=e.tag),!(n&&zn(n.print_to_string(),r))}:this.pure_funcs=Fn;n=this.options.sequences;this.sequences_limit=1==n?800:0|n;var o=this.options.top_retain;o instanceof RegExp?this.top_retain=function(e){return o.test(e.name)}:"function"==typeof o?this.top_retain=o:o&&("string"==typeof o&&(o=o.split(/,/)),this.top_retain=function(e){return zn(e.name,o)});n=this.options.toplevel;this.toplevel="string"==typeof n?{funcs:/funcs/.test(n),vars:/vars/.test(n)}:{funcs:n,vars:n}}function J(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function Tr(f){f=re(f,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var n,c=Mn;f.comments&&(n=f.comments,"string"==typeof f.comments&&/^\/.*\/[a-zA-Z]*$/.test(f.comments)&&(N=f.comments.lastIndexOf("/"),n=new RegExp(f.comments.substr(1,N-1),f.comments.substr(N+1))),c=n instanceof RegExp?function(e){return"comment5"!=e.type&&n.test(e.value)}:"function"==typeof n?function(e){return"comment5"!=e.type&&n(this,e)}:"some"===n?J:Fn);var i,r,o,a,s,t,u,l=0,p=1,d=0,h=f.indent_start,v=0,m=!0,_=f.source_map&&[],g=!1,b=!1,y=-1;function e(){s=a=!1,t=[];var e=u;return u=i="",e}e();var w=f.ascii_only?function(e,t){return(e=t?e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"}):e).replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var n=e.charCodeAt(0).toString(16);if(n.length<=2&&!t){for(;n.length<2;)n="0"+n;return"\\x"+n}for(;n.length<4;)n="0"+n;return"\\u"+n})}:function(e){for(var n,t="",i=0,r=0;i<e.length;i++){var o=e.charCodeAt(i);if(55296<=(n=o)&&n<=56319){if(R(e.charCodeAt(i+1))){i++;continue}}else if(!R(o))continue;t+=e.slice(r,i)+"\\u"+o.toString(16),r=i+1}return 0==r?e:t+e.slice(r)};function x(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function k(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var E=[null,x,k,function(e,n){return("'"==n?x:k)(e)}][f.quote_style]||function(e,n,t,i){return(i<t?x:k)(e)};function S(t,e){var i=0,r=0;return t=t.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(e,n){switch(e){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return f.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(t.charAt(n+1))?"\\x00":"\\0"}return e}),E(w(t),e,i,r)}var T=_?function(n,t){_.forEach(function(e){e.line+=n,e.col+=t})}:Cn,A=_?function(){_.forEach(function(e){f.source_map.add(e.token.file,e.line,e.col,e.token.line,e.token.col,e.name||"name"!=e.token.type?e.name:e.token.value)}),_=[]}:Cn;function D(e){var n=u.lastIndexOf("\n");v<n&&(v=n);var t=u.slice(0,v),n=u.slice(v);for(T(e,n.length-l),p+=e,d+=e,l=n.length,u=t;e--;)u+="\n";u+=n}var O=f.max_line_len?function(){m?l>f.max_line_len&&Wn.warn("Output exceeds {max_line_len} characters",f):(l>f.max_line_len&&D(1),m=!0,A())}:Cn,$=Rn("( [ + * / - , ."),z=f.beautify||f.comments||f.max_line_len||f.preserve_line||f.shebang||!f.semicolons||f.source_map||f.width?function(e){var n=e.charAt(0);g&&n&&(g=!1,"\n"!=n&&(z("\n"),C())),b&&n&&(b=!1,/[\s;})]/.test(n)||q()),y=-1;var t=i.slice(-1);s&&(s=!1,(":"==t&&"}"==n||(!n||";}".indexOf(n)<0)&&";"!=t)&&(f.semicolons||$[n]?(u+=";",l++,d++):(O(),u+="\n",d++,p++,l=0,/^\s+$/.test(e)&&(s=!0)),f.beautify||(a=!1))),a&&((B(t)&&(B(n)||"\\"==n)||"/"==n&&n==t||("+"==n||"-"==n)&&n==i||"--"==e&&"!"==i||"in"==e&&"/"==t||"--"==i&&">"==n)&&(u+=" ",l++,d++),"<"==t&&"!"==e||(a=!1)),o&&(_.push({token:o,name:r,line:p,col:l}),o=!1,m&&A()),u+=e,d+=e.length;n=e.split(/\r?\n/),t=n.length-1;p+=t,l+=n[0].length,0<t&&(O(),l=n[t].length),i=e}:function(e){var n=e.charAt(0),t=i.slice(-1);s&&(s=!1,(":"==t&&"}"==n||(!n||";}".indexOf(n)<0)&&";"!=t)&&(u+=";",a=!1)),a&&((B(t)&&(B(n)||"\\"==n)||"/"==n&&n==t||("+"==n||"-"==n)&&n==i||"--"==e&&"!"==i||"in"==e&&"/"==t||"--"==i&&">"==n)&&(u+=" "),"<"==t&&"!"==e||(a=!1)),u+=e,i=e},q=f.beautify?function(){z(" ")}:function(){a=!0},C=f.beautify?function(e){g&&z("\n"),z(function e(n,t){if(t<=0)return"";if(1==t)return n;var i=e(n,t>>1);return i+=i,1&t?i+n:i}(" ",e?h-(f.indent_level>>1):h))}:Cn,M=f.beautify?function(e){var n=h;h+=f.indent_level,e(),h=n}:function(e){e()},F=f.max_line_len||f.preserve_line?function(){O(),v=u.length,m=!1}:Cn,j=f.beautify?function(){if(y<0)return z("\n");"\n"!=u[y]&&(u=u.slice(0,y)+"\n"+u.slice(y),d++,p++),y++}:F,P=f.beautify?function(){z(";")}:function(){s=!0};var N=_?function(e,n){o=e,r=n}:Cn;function I(e,n){g||(!e.nlb||!n&&(e=u.lastIndexOf("\n"),/^ *$/.test(u.slice(e+1)))?n&&(b=!0):g=!0)}function H(e){var n=e.value.replace(/[@#]__PURE__/g," ");return(!/^\s*$/.test(n)||/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(z("//"+n),g=!0):"comment2"==e.type&&z("/*"+n+"*/"),1)}return{get:function(){return m||O(),u},reset:e,indent:C,should_break:f.width?function(){return l-h>=f.width}:Mn,has_parens:function(){return"("==i.slice(-1)},newline:j,print:z,space:q,comma:function(){F(),z(","),F(),q()},colon:function(){z(":"),q()},last:function(){return i},semicolon:P,force_semicolon:function(){s&&z(";"),z(";")},to_utf8:w,print_name:function(e){z(w(e.toString(),!0))},print_string:f.inline_script?function(e,n){e=S(e,n).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),z(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,n){z(S(e,n))},with_indent:M,with_block:function(e){z("{"),j(),M(e),C(),z("}")},with_parens:function(e){z("("),F(),e(),F(),z(")")},with_square:function(e){z("["),F(),e(),F(),z("]")},add_mapping:N,option:function(e){return f[e]},prepend_comments:f.comments||f.shebang?function(e){var t,i=this;e instanceof Yt?t=e.value:e instanceof Ti&&(t=e.expression);var r,n,o=(o=s(e))||[];t&&((r=new vr(function(e){if(n=e,!((t=r.parent())instanceof xi?t.left===n:"Call"==t.TYPE?t.expression===n:t instanceof ki?t.condition===n:t instanceof mi?t.expression===n:t instanceof Yt||(t instanceof di?t.expressions[0]===n:t instanceof _i?t.expression===n:t instanceof wi||t instanceof Ti)))return!0;var n,t,e=s(e);e&&(o=o.concat(e))})).push(e),t.walk(r)),0==d&&(0<o.length&&f.shebang&&"comment5"==o[0].type&&(z("#!"+o.shift().value+"\n"),C()),(n=f.preamble)&&z(n.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,"\n"))),o=o.filter(c,e);var a=!1;function s(e){var n=e.start;if(!n){if(!t)return;e.start=n=new Y}e=n.comments_before;if(!e){if(!t)return;n.comments_before=e=[]}if(e._dumped!==i)return e._dumped=i,e}o.forEach(function(e,n){I(e,n),H(e)&&(a=!0)}),a&&I(e.start,!0)}:Cn,append_comments:f.comments?function(e,t){var n,i=e.end;!i||(n=i[t?"comments_before":"comments_after"])&&n._dumped!==this&&(e instanceof Gn||Bn(n,function(e){return!/comment[134]/.test(e.type)}))&&(n._dumped=this,i=u.length,n.filter(c,e).forEach(function(e,n){I(e,n||!t),H(e)}),u.length>i&&(y=i))}:Cn,push_node:function(e){t.push(e)},pop_node:f.preserve_line?function(){var e=t.pop();e.start&&e.start.line>p&&D(e.start.line-p)}:function(){t.pop()},parent:function(e){return t[t.length-2-(e||0)]}}}t(Sr.prototype=new mr,{option:function(e){return this.options[e]},exposed:function(e){if(e.exported)return!0;if(e.undeclared)return!0;if(!(e.global||e.scope.resolve()instanceof vt))return!1;var n=this.toplevel;return!Bn(e.orig,function(e){return n[e instanceof Ui?"funcs":"vars"]})},compress:function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var n=+this.options.passes||1,t=1/0,i=!1,r={ie:this.option("ie")},o=0;o<n;o++)if(e.figure_out_scope(r),(0<o||this.option("reduce_vars"))&&e.reset_opt_flags(this),e=e.transform(this),1<n){var a=0;if(e.walk(new vr(function(){a++})),Wn.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:o,min_count:t,count:a}),a<t)t=a,i=!1;else{if(i)break;i=!0}}return this.option("expression")&&e.process_expression(!1),e},before:function(e,n,t){if(e._squeezed)return e;var i=e instanceof ht;i&&(e.hoist_properties(this),e.hoist_declarations(this),e.process_boolean_returns(this)),n(e,this),n(e,this);var r=e.optimize(this);return!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.merge_variables(this),r.drop_unused(this),n(r,this)),r===e&&(r._squeezed=!0),r}}),function(e){function l(e,n){var t;if(!((i=n.get_property())instanceof Wn)){if(e instanceof Ai){n=e.elements;if("length"==i)return X(n.length,e);"number"==typeof i&&i in n&&(t=n[i])}else if(e instanceof mt){if("length"==i)return e.length_read=!0,X(e.argnames.length,e)}else if(e instanceof qi)for(var i=""+i,r=e.properties,o=r.length;0<=--o;){if(!$n(r[o]))return;t||r[o].key!==i||(t=r[o].value)}return t instanceof Ji&&t.fixed_value()||t}}function ce(e,n,t,i,r,o,a){var s=n.parent(r);if(!(e.option("unsafe")&&s instanceof mi&&(c=i,f=s.property,c instanceof pr?fe.Boolean[f]:c instanceof rr?fe.Number[f]:c instanceof ir?fe.String[f]:"valueOf"!=f&&(c instanceof Ai?fe.Array[f]:c instanceof mt?fe.Function[f]:c instanceof qi?fe.Object[f]:c instanceof ar&&(fe.RegExp[f]&&!c.value.global))))){var f,c=Er(t,s);if(c)return c;if(s instanceof Ai)return ce(e,n,s,s,r+1);if(s instanceof xi)return we[s.operator]?ce(e,n,s,s,r+1):void 0;if(s instanceof li)return!o&&s.expression===t&&!s.is_expr_pure(e)&&(!(i instanceof gt)||!(s instanceof pi)&&i.contains_this());if(s instanceof ki)return s.condition===t?void 0:ce(e,n,s,s,r+1);if(s instanceof ut)return s.init===t;if(s instanceof Mi){if(s.value!==t)return;var u=n.parent(r+1);return ce(e,n,u,u,r+2)}if(s instanceof vi){if(s.expression!==t)return;u=l(i,s);return(!o||a)&&ce(e,n,s,u,r+1)}return s instanceof di&&s.tail_node()===t?ce(e,n,s,i,r+1,o,a):void 0}}function v(e){return e instanceof Mt||e instanceof mt}function c(e){return e instanceof Mt||e instanceof qt||e instanceof At}function ue(e){return"arguments"==e.name&&e.scope.uses_arguments}function le(e){return e.orig[0]instanceof Li||e.orig[1]instanceof Li}function y(e,n){do{if(e===n)return;if(n instanceof ht)return 1}while(n=n.parent_scope)}function pe(e,n,t){var i=e.definition();return(!e.in_arg||!le(i))&&Bn(i.orig,function(e){return e instanceof Hi||e instanceof Ri?n&&cn(n,e):!(t&&e instanceof Vi)})}function de(e,n,t,i){return i instanceof Ei?"="==i.operator&&i.right===t:i instanceof li?i.expression!==t||i instanceof pi:i instanceof Yt?i.value===t&&n.resolve()!==e.scope.resolve():i instanceof oi&&i.value===t}e(Wn,function(e,n){return e}),Wn.DEFMETHOD("equivalent_to",function(e){return this.TYPE==e.TYPE&&this.print_to_string()==e.print_to_string()}),vt.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var n=this.body,t=[],i=0;i<n.length;i++){var r=n[i];r instanceof ai?(n[i]=r=r.body,r instanceof ni?r.definitions.forEach(function(e){e.name.match_symbol(o,!0)}):o(r.name)):r instanceof fi&&(n.splice(i--,1),[].push.apply(t,r.properties))}t.length&&n.push(ve(fi,this,{properties:t}))}function o(e){e instanceof Ii&&((e=ve(Xi,e,e)).alias=e.name,t.push(e))}}),ht.DEFMETHOD("process_expression",function(i,r){var o=this,a=new mr(function(e){if(i&&e instanceof Zn)return r?r(e):ve(Rt,e,{value:e.body});if(!i&&e instanceof Rt)return r?r(e):ve(Zn,e,{body:e.value||ve(yi,e,{operator:"void",expression:ve(rr,e,{value:0})})});if(e instanceof tt){if(e instanceof mt){if(e!==o)return e}else if("awaits"===i&&e instanceof Qt&&e.bfinally)return e;for(var n=e.body.length;0<=--n;){var t=e.body[n];if(!N(t,!0)){e.body[n]=t.transform(a);break}}}else e instanceof Wt?(e.body=e.body.transform(a),e.alternative&&(e.alternative=e.alternative.transform(a))):e instanceof dt&&(e.body=e.body.transform(a));return e});o.transform(a)});var p=/^(0|[1-9][0-9]*)$/;function o(e,n,t){t.assignments=0,t.bool_fn=0,t.cross_loop=!1,t.direct_access=!1,t.escaped=[],t.fixed=!t.const_redefs&&!t.scope.pinned()&&!n.exposed(t)&&!(t.init instanceof gt&&t.init!==t.scope)&&t.init,t.reassigned=0,t.recursive_refs=0,t.references=[],t.should_replace=void 0,t.single_use=void 0}function a(e,n,t){t.variables.each(function(e){o(0,n,e)})}function d(t,i,r){r.fn_defs=[],r.variables.each(function(e){o(0,i,e);var n=e.init;n instanceof Ot&&(r.fn_defs.push(n),n.safe_ids=null),null===e.fixed?(e.safe_ids=t.safe_ids,b(t,e)):e.fixed&&(t.loop_ids[e.id]=t.in_loop,b(t,e))}),r.may_call_this=function(){r.may_call_this=r.contains_this()?Fn:Mn},r.uses_arguments&&r.each_argname(function(e){e.definition().last_ref=!1}),i.option("ie")&&r.variables.each(function(e){var n=e.orig[0].definition();n!==e&&(n.fixed=!1)})}function s(e,n){var t=e.fn_scanning;(e.fn_scanning=n).walk(e),e.fn_scanning=t}function f(t,i){i.enclosed.forEach(function(e){var n;i.variables.get(e.name)!==e&&(x(t,e)||(e.single_use=!1,(n="function"==typeof(n=e.fixed)?n():n)instanceof mt&&Un(n,"safe_ids")||(e.fixed=!1)))})}function h(e,n,t){var i,r;!Un(t,"safe_ids")||!1!==(i=t.safe_ids)&&(t.parent_scope.resolve().may_call_this===Fn?zn(t,e.fn_visited)&&f(e,t):i?(r=zn(t,e.fn_visited),i===e.safe_ids?r||s(e,t):r?f(e,t):t.safe_ids=!1):e.fn_scanning&&e.fn_scanning!==n.scope.resolve()?t.safe_ids=!1:(t.safe_ids=e.safe_ids,s(e,t)))}function m(n,e){var t=e.fn_defs,i=e.may_call_this===Fn?t:t.filter(function(e){return!1===e.safe_ids||(e.safe_ids=n.safe_ids,s(n,e),!1)});g(n),i.forEach(function(e){e.safe_ids=n.safe_ids,s(n,e)}),t.forEach(function(e){delete e.safe_ids}),delete e.fn_defs,delete e.may_call_this}function _(e){e.safe_ids=Object.create(e.safe_ids)}function g(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function b(e,n){e.safe_ids[n.id]={}}function w(e,n){e.references.push(n),!1!==e.last_ref&&(e.last_ref=n)}function x(e,n){if("m"==n.single_use)return!1;var t=e.safe_ids[n.id];return t?(Un(e.safe_ids,n.id)||(t.read=!(!t.read||t.read===e.safe_ids)||e.safe_ids),null==n.fixed?!ue(n)&&((!n.global||"arguments"!=n.name)&&(e.loop_ids[n.id]=null,n.fixed=ve(cr,n.orig[0]),!0)):!t.assign||t.assign===e.safe_ids):n.fixed instanceof Ot}function k(e,n,t){if(!t){if(le(n)&&n.scope.uses_arguments&&!e.has_directive("use strict"))return;if(!Bn(n.orig,function(e){return!(e instanceof Hi)}))return}if(void 0===n.fixed)return t||Bn(n.orig,function(e){return!(e instanceof Ri)});if(!1!==n.fixed){var i=e.safe_ids[n.id];if(n.safe_ids)return n.safe_ids[n.id]=!1,delete n.safe_ids,null===n.fixed||Un(e.safe_ids,n.id)&&!i.read;if(!Un(e.safe_ids,n.id)){if(!i)return;if(i.read){t=e.find_parent(et);if(t instanceof Mt)return;if(n.scope.resolve()!==t.resolve())return}i.assign=!(!i.assign||i.assign===e.safe_ids)||e.safe_ids}if(null!=n.fixed&&i.read){if(i.read!==e.safe_ids)return;if(e.loop_ids[n.id]!==e.in_loop)return}return x(e,n)&&Bn(n.orig,function(e){return!(e instanceof Vi)})}}function E(e,n){var t=ve(Ji,e,e);return t.fixed=n||ve(cr,e),t}function S(e){if(!e)return!1;if(e instanceof Ei){var n=e.operator;return"="==n?S(e.right):!we[n.slice(0,-1)]}return e instanceof di?S(e.tail_node()):e.is_constant()||v(e)||e instanceof Ki}function T(e,n,t,i,r,o,a){var s,f=e.parent(o);if(!r||!r.is_constant()){if(de(n,t,i,f))return n.escaped.push(f),!(1<a)||r&&r.is_constant_expression(t)||(a=1),(!n.escaped.depth||n.escaped.depth>a)&&(n.escaped.depth=a),void(n.scope.resolve()!==t.resolve()&&(n.escaped.cross_scope=!0));if(s=i,(c=f)instanceof Ai||(c instanceof xi?we[c.operator]:c instanceof ki?c.condition!==s:c instanceof di?c.tail_node()===s:c instanceof gi))T(e,n,t,f,f,o+1,a);else if(f instanceof Mi&&f.value===i){var c=e.parent(o+1);T(e,n,t,c,c,o+2,a)}else if(f instanceof vi&&f.expression===i&&(T(e,n,t,f,r=l(r,f),o+1,a+1),r))return;0<o||f instanceof li&&f.expression===i||f instanceof di&&f.tail_node()!==i||f instanceof Zn||f instanceof bi&&!kr[f.operator]||(n.direct_access=!0)}}function A(e){var n;e instanceof _i&&((n=e.expression)instanceof Ji&&(!ue(n=n.definition())||((e=(e=e.property).is_constant()?e.value:e)instanceof Wn||p.test(e))&&(n.reassigned++,(e instanceof Wn?n.scope.argnames:[n.scope.argnames[e]]).forEach(function(e){e instanceof Li&&(e.definition().fixed=!1)}))))}function D(o,t,e,a,n){var s=new vr(function(i){if(i instanceof ui)return O(i),_(o),i.value.walk(o),g(o),(r=a)&&(a=function(){var e,n=r();return ye(n,t)||void 0===(e=tn(t,n,!0))?J(i,[n,i.value]):e instanceof Wn?i:n}),i.name.walk(s),a=r,!0;if(i instanceof Oi){O(i);var r=a;return i.elements.forEach(function(e,n){return e instanceof ur?O(e):(r&&(a=function(){return ve(_i,e,{expression:r(),property:ve(rr,e,{value:n})})}),void e.walk(s))}),i.rest&&(r&&(a=t.option("rests")&&function(){var e=r();return e instanceof Ai?ve(Ai,i,{elements:e.elements.slice(i.elements.length)}):i}),i.rest.walk(s)),a=r,!0}if(i instanceof zi){O(i);r=a;return i.properties.forEach(function(t){O(t),t.key instanceof Wn&&(_(o),t.key.walk(o),g(o)),r&&(a=function(){var e=t.key,n=_i;return"string"==typeof e&&(_r(e)?n=mi:e=X(e,t)),ve(n,t,{expression:r(),property:e})}),t.value.walk(s)}),i.rest&&(a=!1,i.rest.walk(s)),a=r,!0}return n(i,a,function(){for(var e=o.stack.length,n=0,t=s.stack.length-1;n<t;n++)o.stack.push(s.stack[n]);i.walk(o),o.stack.length=e}),!0});e.walk(s)}function u(i,e,r){var o=this;o.inlined=!1;var a=i.parent(),n=yt(o)||wt(o),t=!1;o.walk(new vr(function(e){return n?t=!0:e instanceof Rt?n=!0:e instanceof ht&&e!==o||void 0})),t&&_(i),d(i,r,o);var s=!o.uses_arguments||i.has_directive("use strict");o.argnames.forEach(function(n,e){var t=a.args[e];D(i,r,n,function(){var e=o.argnames.indexOf(n),e=e<0?t:a.args[e];return(e=e instanceof di&&e.expressions.length<2?e.expressions[0]:e)||ve(cr,a)},u)});var f=o.rest;f&&D(i,r,f,r.option("rests")&&function(){return o.rest===f?ve(Ai,o,{elements:a.args.slice(o.argnames.length)}):f},u),xt(o,i);var c=i.safe_ids;return m(i,o),t||(i.safe_ids=c),!0;function u(e,n){var t=e.definition();n&&s&&void 0===t.fixed?(b(i,t),i.loop_ids[t.id]=i.in_loop,t.fixed=n,t.fixed.assigns=[e]):t.fixed=!1}}function O(e){e._squeezed=!1,e._optimized=!1,delete e.fixed,e instanceof ht&&delete e._var_names}function n(t,i){return this.transform(new mr(function(e,n){return e instanceof ui?((e=e.clone()).name=e.name.transform(this),e):e instanceof Di?(n(e=e.clone(),this),e):e instanceof $i?((e=e.clone()).value=e.value.transform(this),e):e.convert_symbol(t,i)}))}function t(e,n){e=ve(e,this,this);return n(e,this),e}function i(n,t){var i=new vr(function(e){return e instanceof ui?(e.value.walk(t),e.name.walk(i),!0):e instanceof $i?(e.key instanceof Wn&&e.key.walk(t),e.value.walk(i),!0):n(e)});this.walk(i)}function r(e){return e(this)}function $(n,t){var i=!1,r=new vr(function(e){return!!i||(e instanceof ui?t?(e.name.walk(r),!0):i=!0:e instanceof $i?!t&&e.key instanceof Wn?i=!0:(e.value.walk(r),!0):n(e)?i=!0:void 0)});return this.walk(r),i}function z(e){return e instanceof zt||e instanceof Tt}function W(e){for(var n,t=0;n=e.parent(t++);)if(n.variables)return n}(se=function(e,n){e.DEFMETHOD("reduce_vars",n)})(Wn,Cn),se(Ei,function(o,e,n){var a=this,s=a.left,f=a.right,t=s instanceof Ji&&s.definition(),i=t||s instanceof Di;switch(a.operator){case"=":return s.equivalent_to(f)&&!s.has_side_effects(n)?(f.walk(o),function e(n){{var t;n instanceof mi?e(n.expression):n instanceof _i?(e(n.expression),n.property.walk(o)):n instanceof Ji?(w(t=n.definition(),n),t.fixed&&(n.fixed=t.fixed,n.fixed.assigns?n.fixed.assigns.push(a):n.fixed.assigns=[a])):n.walk(o)}}(s),a.__drop=!0):t&&f instanceof gt?(u(),f.parent_scope.resolve().fn_defs.push(f),f.safe_ids=null,t.fixed&&a.write_only||h(o,t,f),!0):i?(f.walk(o),u(),!0):void A(s);case"&&=":case"||=":case"??=":return s.walk(o),_(o),i?(f.walk(o),u()):(A(s),f.walk(o)),g(o),!0;default:if(!i)return void A(s);t.assignments++;var r=t.fixed;if(ce(n,o,a,a,0))return void(t.fixed=!1);var c=x(o,t);return f.walk(o),c&&!s.in_arg&&k(o,t)?(w(t,s),b(o,t),t.single_use&&(t.single_use=!1),s.fixed=t.fixed=function(){return ve(xi,a,{operator:a.operator.slice(0,-1),left:E(s,r),right:a.right})},s.fixed.assigns=r&&r.assigns?r.assigns.slice():[],s.fixed.assigns.push(a)):(s.walk(o),t.fixed=!1),!0}function u(){var e=t&&xn(o,t),r=ce(n,o,a,f,0,S(f),e);D(o,n,s,function(){return a.right},function(e,n,t){if(!(e instanceof Ji))return A(e),void t();var i=e.definition();i.assignments++,n&&!r&&!e.in_arg&&k(o,i)?(w(i,e),b(o,i),(s instanceof Di||1==i.orig.length&&i.orig[0]instanceof Ui)&&(i.single_use=!1),o.loop_ids[i.id]=o.in_loop,T(o,i,e.scope,a,f,0,1),e.fixed=i.fixed=n,e.fixed.assigns=[a]):(t(),i.fixed=!1)})}}),se(xi,function(e){if(we[this.operator])return this.left.walk(e),_(e),this.right.walk(e),g(e),!0}),se(et,function(e,n,t){a(0,t,this)}),se(li,function(n,e){var t=this,i=t.expression;if(i instanceof gt){var r=_e(t);return t.args.forEach(function(e){e.walk(n),e instanceof gi&&(r=!1)}),r&&(i.reduce_vars=u),i.walk(n),r&&delete i.reduce_vars,!0}"Call"==t.TYPE&&n.in_boolean_context()&&(i instanceof Ji?i.definition().bool_fn++:i instanceof Ei&&"="==i.operator&&i.left instanceof Ji&&i.left.definition().bool_fn++),i.walk(n);var o=t.optional;o&&_(n),t.args.forEach(function(e){e.walk(n)}),o&&g(n);o=i instanceof Ji&&i.fixed_value();return o instanceof mt?h(n,i.definition(),o):n.find_parent(ht).may_call_this(),!0}),se(Mt,function(n,e,t){var i=this;a(0,t,i),i.extends&&i.extends.walk(n);var r,o=i.properties.filter(function(e){return O(e),e.key instanceof Wn&&e.key.walk(n),e.value});return i.name&&(r=i.name.definition(),((t=n.parent())instanceof ai||t instanceof si)&&(r.single_use=!1),k(n,r,!0)?(b(n,r),n.loop_ids[r.id]=n.in_loop,r.fixed=function(){return i},r.fixed.assigns=[i],an(r)||(r.single_use=!1)):r.fixed=!1),o.forEach(function(e){!e.static||e instanceof Nt&&e.value.contains_this()?(_(n),e.value.walk(n),g(n)):e.value.walk(n)}),!0}),se(ki,function(e){return this.condition.walk(e),_(e),this.consequent.walk(e),g(e),_(e),this.alternative.walk(e),g(e),!0}),se(ui,function(e){return this.name.walk(e),_(e),this.value.walk(e),g(e),!0}),se(st,function(e){var n=e.in_loop;return e.in_loop=this,_(e),this.body.walk(e),en(this,e.parent())&&(g(e),_(e)),this.condition.walk(e),g(e),e.in_loop=n,!0}),se(ct,function(e,n,t){var i=this;a(0,t,i),i.init&&i.init.walk(e);t=e.in_loop;return e.in_loop=i,_(e),i.condition&&i.condition.walk(e),i.body.walk(e),i.step&&(en(i,e.parent())&&(g(e),_(e)),i.step.walk(e)),g(e),e.in_loop=t,!0}),se(ut,function(e,n,t){var i=this;a(0,t,i),i.object.walk(e);var r=e.in_loop;e.in_loop=i,_(e);t=i.init;return t instanceof ni?t.definitions[0].name.mark_symbol(function(e){e instanceof Ii&&((e=e.definition()).assignments++,e.fixed=!1)},e):t instanceof Di||t instanceof Ji?t.mark_symbol(function(e){var n;e instanceof Ji&&(w(n=e.definition(),e),n.assignments++,e.is_immutable()||(n.fixed=!1))},e):t.walk(e),i.body.walk(e),g(e),e.in_loop=r,!0}),se(Wt,function(e){return this.condition.walk(e),_(e),this.body.walk(e),g(e),this.alternative&&(_(e),this.alternative.walk(e),g(e)),!0}),se(rt,function(e){return _(e),this.body.walk(e),g(e),!0}),se(mt,function(e,n,t){var i=this;return Un(i,"safe_ids")&&i.safe_ids!==e.safe_ids||In(e.fn_visited,i)&&(i.inlined=!1,_(e),d(e,t,i),n(),m(e,i),i.name&&T(e,i.name.definition(),i,i.name,i,0,1)),!0}),se(Ot,function(e,n,t){var i=this,r=i.name.definition(),o=e.parent();return(o instanceof ai||o instanceof si)&&(r.single_use=!1),Un(i,"safe_ids")&&i.safe_ids!==e.safe_ids||In(e.fn_visited,i)&&(i.inlined=!1,_(e),d(e,t,i),n(),m(e,i)),!0}),se(_i,function(e){if(this.optional)return this.expression.walk(e),_(e),this.property.walk(e),g(e),!0}),se(Gt,function(n,e,t){a(0,t,this),this.expression.walk(n);var i=!0;return this.body.forEach(function(e){e instanceof Xt||(e.expression.walk(n),i&&(i=!1,_(n)))}),i||g(n),nt(this,n),!0}),se(Jt,function(e){return _(e),nt(this,e),g(e),!0}),se(Gi,function(){this.definition().fixed=!1}),se(Yi,function(){this.definition().fixed=!1}),se(Ji,function(t,e,n){var i=this.definition();w(i,this),1==i.references.length&&!i.fixed&&i.orig[0]instanceof Ui&&(t.loop_ids[i.id]=t.in_loop);var r,o,a=xn(t,i);a&&a.enclosed.forEach(function(e){var n;i!==e&&(e.scope.resolve()===a||(n=e.fixed&&e.fixed.assigns)&&(n[n.length-1]instanceof oi||(e=t.safe_ids[e.id])&&(e.assign=!0)))}),!1===i.fixed?(o=i.redefined())&&y(i.scope,this.scope)&&(o.single_use=!1):void 0!==i.fixed&&x(t,i)?i.fixed&&(this.in_arg&&i.orig[0]instanceof Vi&&(this.fixed=i.scope),r=this.fixed_value(),a?i.recursive_refs++:!r||(o=i,!n.option("unused")||o.scope.pinned()||!1===o.single_use||o.references.length-o.recursive_refs!=1||le(o)&&o.scope.uses_arguments)?i.single_use=!1:(i.in_loop=t.loop_ids[i.id]!==t.in_loop,i.single_use=v(r)&&!r.pinned()&&(!i.in_loop||t.parent()instanceof li)||!i.in_loop&&i.scope===this.scope.resolve()&&r.is_constant_expression()),ce(n,t,this,r,0,S(r),a)&&(i.single_use?i.single_use="m":i.fixed=!1),i.fixed&&t.loop_ids[i.id]!==t.in_loop&&(i.cross_loop=!0),T(t,i,this.scope,this,r,0,1)):i.fixed=!1,this.fixed||(this.fixed=i.fixed),r instanceof mt&&!((n=t.parent())instanceof li&&n.expression===this)&&h(t,i,r)}),se(nr,function(n,e){var t=this.tag;if(t){if(t instanceof gt)return this.expressions.forEach(function(e){e.walk(n)}),t.walk(n),!0;t.walk(n),this.expressions.forEach(function(e){e.walk(n)});var i=t instanceof Ji&&t.fixed_value();return i instanceof mt?h(n,t.definition(),i):n.find_parent(ht).may_call_this(),!0}}),se(vt,function(e,n,t){return this.globals.each(function(e){o(0,t,e)}),_(e),d(e,t,this),n(),m(e,this),!0}),se(Qt,function(e,n,t){var i=this;return a(0,t,i),_(e),nt(i,e),g(e),i.bcatch&&(_(e),i.bcatch.walk(e),g(e)),i.bfinally&&i.bfinally.walk(e),!0}),se(bi,function(e,n){var t=this;if(yr[t.operator]){var i=t.expression;if(i instanceof Ji){var r=i.definition();r.assignments++;var o=r.fixed;return x(e,r)&&!i.in_arg&&k(e,r)?(w(r,i),b(e,r),r.single_use&&(r.single_use=!1),r.fixed=function(){return ve(xi,t,{operator:t.operator.slice(0,-1),left:ve(yi,t,{operator:"+",expression:E(i,o)}),right:ve(rr,t,{value:1})})},r.fixed.assigns=o&&o.assigns?o.assigns.slice():[],r.fixed.assigns.push(t),t instanceof yi?i.fixed=r.fixed:(i.fixed=function(){return ve(yi,t,{operator:"+",expression:E(i,o)})},i.fixed.assigns=o&&o.assigns)):(i.walk(e),r.fixed=!1),!0}A(i)}}),se(oi,function(i,e,n){var t,r=this,o=r.value;return o instanceof gt&&r.name instanceof Ii?(a(),o.parent_scope.resolve().fn_defs.push(o),o.safe_ids=null,(t=r.name.definition()).fixed||h(i,t,o)):o?(o.walk(i),a()):i.parent()instanceof ii&&a(),!0;function a(){D(i,n,r.name,function(){return r.value||ve(cr,r)},function(e,n){var t=e.definition();n&&k(i,t,!0)?(b(i,t),i.loop_ids[t.id]=i.in_loop,t.fixed=n,t.fixed.assigns=[r],(e instanceof Hi&&t.redefined()||!pe(e)&&!an(t))&&(t.single_use=!1)):t.fixed=!1})}}),se(ft,function(e,n){var t=e.in_loop;return e.in_loop=this,_(e),n(),g(e),e.in_loop=t,!0}),vt.DEFMETHOD("reset_opt_flags",function(t){var i=new vr(t.option("reduce_vars")?function(e,n){return O(e),e.reduce_vars(i,n,t)}:O);i.fn_scanning=null,i.fn_visited=[],i.in_loop=null,i.loop_ids=Object.create(null),i.safe_ids=Object.create(null),this.walk(i)}),Ni.DEFMETHOD("fixed_value",function(){var e=this.definition().fixed;return e&&((e=this.fixed?this.fixed:e)instanceof Wn?e:e())}),Ji.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return 1==e.orig.length&&e.orig[0]instanceof Vi}),Wn.DEFMETHOD("convert_symbol",Cn),ui.DEFMETHOD("convert_symbol",n),Di.DEFMETHOD("convert_symbol",n),Ii.DEFMETHOD("convert_symbol",t),Ji.DEFMETHOD("convert_symbol",t),ui.DEFMETHOD("mark_symbol",i),Di.DEFMETHOD("mark_symbol",i),Ii.DEFMETHOD("mark_symbol",r),Ji.DEFMETHOD("mark_symbol",r),Wn.DEFMETHOD("match_symbol",function(e){return e(this)}),ui.DEFMETHOD("match_symbol",$),Di.DEFMETHOD("match_symbol",$);var G=Rn("Infinity NaN undefined");function he(e,n){if(e instanceof Ki)return!0;if(e instanceof vi){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof Ji){if(e.is_immutable())return!1;e=e.fixed_value()}return e?!!e.tail_node().is_constant()||he(e,n):!0}if(e instanceof Ji){if(e.is_immutable())return!0;e=e.definition();return n.exposed(e)&&G[e.name]}return!1}function ve(e,n,t){return t=t||{},n&&(t.start||(t.start=n.start),t.end||(t.end=n.end)),new e(t)}function J(e,n){return 1==n.length?n[0]:ve(di,e,{expressions:n.reduce(q,[])})}function X(e,n){switch(typeof e){case"string":return ve(ir,n,{value:e});case"number":return isNaN(e)?ve(fr,n):isFinite(e)?1/e<0?ve(yi,n,{operator:"-",expression:ve(rr,n,{value:-e})}):ve(rr,n,{value:e}):e<0?ve(yi,n,{operator:"-",expression:ve(lr,n)}):ve(lr,n);case"boolean":return ve(e?hr:dr,n);case"undefined":return ve(cr,n);default:if(null===e)return ve(sr,n,{value:null});if(e instanceof RegExp)return ve(ar,n,{value:e});throw new Error(Hn("Can't handle constant of type: {type}",{type:typeof e}))}}function K(e,n){return n instanceof vi||ge(n)&&"eval"==n.name}function me(e,n,t,i){var r=!1;return"Call"==n.TYPE?r=n.expression===t&&K(0,i):n instanceof nr?r=n.tag===t&&K(0,i):n instanceof yi&&(r="delete"==n.operator||"typeof"==n.operator&&ge(i)),r?J(t,[ve(rr,t,{value:0}),i]):i}function q(e,n){return n instanceof di?e.push.apply(e,n.expressions):e.push(n),e}function C(e){return e instanceof ti||e instanceof Ft||e instanceof ii}function M(e){if(e instanceof Ot){var n=e.name.definition(),t=e.name.scope;return n.scope===t||Bn(n.references,function(e){var n=e.scope;do{if(n===t)return 1}while(n=n.parent_scope)})}return!C(e)}function F(e){if(null===e)return[];if(e instanceof it)return Bn(e.body,M)?e.body:[e];if(e instanceof Kn)return[];if(Qn(e))return[e];throw new Error("Can't convert thing to statement array")}function Q(e){return null===e||(e instanceof Kn||e instanceof it&&0==e.body.length)}function j(e){return Bn(e.body,function(e){return Q(e)||e instanceof qt||e instanceof ri&&ee(e)})}function P(e){return e instanceof ot&&e.body instanceof it?e.body:e}function Z(e){if("Call"!=e.TYPE)return!1;for(;(e=e.expression)instanceof vi;);return e instanceof gt?!bt(e):Z(e)}function _e(e){var n=e.expression;if(n.name)return!1;if(!(e instanceof pi))return!0;var t=!1;return n.walk(new vr(function(e){return!!t||(e instanceof er?t=!0:e instanceof ht&&e!==n||void 0)})),!t}function ge(e){return e instanceof Ji&&e.definition().undeclared}var be=Rn("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet");function ee(e){return Bn(e.definitions,function(e){return!e.value})}function N(e,n){return e instanceof Ft?n&&!e.extends&&Bn(e.properties,function(e){return!(e.key instanceof Wn)&&!(e instanceof Nt&&e.static&&e.value)}):e instanceof ni?(n||e instanceof ri)&&ee(e):e instanceof ai||e instanceof si?N(e.body,n):e instanceof Ot}function I(e,n){var t=e.lastIndexOf(n);if(t<0)return!1;for(;++t<e.length;)if(!N(e[t],!0))return!1;return!0}function H(e,c){var oe,ae,se;!function(){var e=c.self(),n=0;do{if(e instanceof Zt)c.parent(n).bfinally&&((ae=ae||{}).bfinally=!0),n++;else if(e instanceof ei)n++;else if(e instanceof ot)oe=!0;else{if(e instanceof ht){se=e;break}e instanceof Qt&&(ae=ae||{},e.bcatch&&(ae.bcatch=!0),e.bfinally&&(ae.bfinally=!0))}}while(e=c.parent(n++))}();for(var fe,n=10;fe=!1,function e(n){var t=[];for(var i=0;i<n.length;){var r=n[i];if(r instanceof it&&Bn(r.body,M))fe=!0,e(r.body),[].splice.apply(n,[i,1].concat(r.body)),i+=r.body.length;else{if(r instanceof Xn){if(zn(r.value,t)){fe=!0,n.splice(i,1);continue}t.push(r.value)}r instanceof Kn?(fe=!0,n.splice(i,1)):i++}}}(e),c.option("dead_code")&&function(n,t){for(var e,i=t.self(),r=0,o=0,a=n.length;r<a;r++){var s,f=n[r];if(f instanceof Lt?(s=t.loopcontrol_target(f),f instanceof Ut&&!(s instanceof ot)&&P(s)===i||f instanceof Vt&&P(s)===i?f.label&&Yn(f.label.thedef.references,f):n[o++]=f):n[o++]=f,Me(f)){e=n.slice(r+1);break}}n.length=o,fe=o!=a,e&&e.forEach(function(e){Y(t,e,n)})}(e,c),c.option("if_return")&&function(i,r){for(var o=r.self(),e=r.parent(),t=v(function(e){return e instanceof mt}),n=t&&e&&"Call"==e.TYPE,a=function(e){for(var n=0,t=e.length;0<=--t;){var i=e[t];if(i instanceof Wt&&i.body instanceof Rt&&1<++n)return!0}return!1}(i),s=i.length;0<=--s;){var f=i[s],c=w(s),u=i[c];if(t&&!u&&f instanceof Rt){if(!f.value){fe=!0,i.splice(s,1);continue}var l=f.value.tail_node();if(l instanceof yi&&"void"==l.operator){fe=!0,l===f.value?d=l.expression:(d=f.value.clone()).expressions[d.length-1]=l.expression,i[s]=ve(Zn,f,{body:d});continue}}if(f instanceof Wt){var p=Me(f.body);if(g(p)){p.label&&Yn(p.label.thedef.references,p),fe=!0,(f=f.clone()).condition=f.condition.negate(r);var d=y(f.body,p);f.body=ve(it,f,{body:F(f.alternative).concat(b())}),f.alternative=ve(it,f,{body:d}),i[s]=f,i[s]=f.transform(r);continue}if(p&&!f.alternative&&f.body instanceof it&&u instanceof Ht){var h=f.condition.negate(r);if(h.print_to_string().length<=f.condition.print_to_string().length){fe=!0,(f=f.clone()).condition=h,i[c]=f.body,f.body=u,i[s]=f,i[s]=f.transform(r);continue}}var h=Me(f.alternative);if(g(h)){h.label&&Yn(h.label.thedef.references,h),fe=!0,(f=f.clone()).body=ve(it,f.body,{body:F(f.body).concat(b())});d=y(f.alternative,h);f.alternative=ve(it,f.alternative,{body:d}),i[s]=f,i[s]=f.transform(r);continue}r.option("typeofs")&&(p&&!h&&nn(f.condition,null,ve(it,o,{body:i.slice(s+1)})),!p&&h&&nn(f.condition,ve(it,o,{body:i.slice(s+1)})))}f instanceof Wt&&f.body instanceof Rt&&(p=f.body.value,h=f.body.in_bool||u instanceof Rt&&u.in_bool,p||f.alternative||!(t&&!u||u instanceof Rt&&!u.value)?!f.alternative&&u instanceof Rt?(fe=!0,(f=f.clone()).alternative=u,i.splice(s,1,f.transform(r)),i.splice(c,1)):f.alternative||u||!t||!(h||p&&a)?(p=i[function(e){for(var n=e;0<=--n&&N(i[n]););return n}(s)],r.option("sequences")&&t&&!f.alternative&&(!p&&n||p instanceof Wt&&p.body instanceof Rt)&&w(c)==i.length&&u instanceof Zn&&(fe=!0,(f=f.clone()).alternative=ve(it,u,{body:[u,ve(Rt,u,{value:null})]}),i.splice(s,1,f.transform(r)),i.splice(c,1))):(fe=!0,(f=f.clone()).alternative=ve(Rt,f,{value:null}),i.splice(s,1,f.transform(r))):(fe=!0,i[s]=ve(Zn,f.condition,{body:f.condition})))}function v(e){var n,t=o,i=0;do{do{if(e(t))return!0}while((t=r.parent(i++))instanceof Wt&&(n=t))}while((t instanceof it||t instanceof ht)&&I(t.body,n))}function m(n){return v(function(e){return e===n})}function _(e){if(e instanceof Rt)return t&&(!(n=e.value)||n instanceof yi&&"void"==n.operator);if(e instanceof Lt){var n=r.loopcontrol_target(e);return e instanceof Vt?m(P(n)):!(n instanceof ot)&&m(n)}}function g(e){if(_(e)){for(var n=i.length;--n>s;){var t=i[n];if(t instanceof Ft){if(t.name.definition().preinit)return}else if((t instanceof ti||t instanceof ii)&&!Bn(t.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof Ii&&e.definition().preinit})}))return}return 1}}function b(){var n=[],t=!1,e=i.splice(s+1).filter(function(e){return e instanceof Ot?(n.push(e),!1):(C(e)&&(t=!0),!0)});return[].push.apply(t?e:i,n),e}function y(e,n){for(var t,e=F(e),i=e;(t=i[i.length-1])!==n;)i=t.body;return i.pop(),n.value&&i.push(ve(Zn,n.value,{body:n.value.expression})),e}function w(e){for(var n=e+1;n<i.length&&N(i[n]);n++);return n}}(e,c),0<c.sequences_limit&&(function(n,e){if(!(n.length<2)){for(var t=[],i=0,r=0,o=n.length;r<o;r++){var a,s=n[r];s instanceof Zn?(t.length>=e.sequences_limit&&f(),a=s.body,(a=0<t.length?a.drop_side_effect_free(e):a)&&q(t,a)):(N(s)||f(),n[i++]=s)}f(),(n.length=i)!=o&&(fe=!0)}function f(){var e;t.length&&(e=J(t[0],t),n[i++]=ve(Zn,e,{body:e}),t=[])}}(e,c),function(e,n){function t(e){r--,fe=!0;var n=i.body;return J(n,[n,e])}for(var i,r=0,o=0;o<e.length;o++){var a,s=e[o];if(i&&(s instanceof Yt?!s.value&&z(se)||(s.value=t(s.value||ve(cr,s)).optimize(n)):s instanceof ct?s.init instanceof ni||(a=!1,i.body.walk(new vr(function(e){return!!(a||e instanceof ht)||(e instanceof xi&&"in"==e.operator?a=!0:void 0)})),a||(s.init?s.init=t(s.init):(s.init=i.body,r--,fe=!0))):s instanceof lt?C(s.init)||(s.object=t(s.object)):s instanceof Wt?s.condition=t(s.condition):(s instanceof Gt||s instanceof dt)&&(s.expression=t(s.expression))),n.option("conditionals")&&s instanceof Wt){var f=[],c=p(s.body,f),u=p(s.alternative,f);if(!1!==c&&!1!==u&&0<f.length){var l=f.length;f.push(ve(Wt,s,{condition:s.condition,body:c||ve(Kn,s.body),alternative:u})),f.unshift(r,1),[].splice.apply(e,f),o+=l,r+=l+1,fe=!(i=null);continue}}e[r++]=s,i=s instanceof Zn?s:null}e.length=r}(e,c)),c.option("join_vars")&&function(e){for(var r,n=0,t=-1;n<e.length;n++){var i,o,a=e[n],s=e[t];if(a instanceof ni)s&&s.TYPE==a.TYPE?(s.definitions=s.definitions.concat(a.definitions),fe=!0):r&&r.TYPE==a.TYPE&&ee(a)?(r.definitions=r.definitions.concat(a.definitions),fe=!0):a instanceof ri?((o=d(s,a))?(o.length&&(s.body=J(s,o),t++),fe=!0):t++,e[t]=r=a):e[++t]=a;else{if(a instanceof Yt)a.value=f(a.value);else if(a instanceof ct)if(o=l(s,a.init))fe=!0,a.init=o.length?J(a.init,o):null;else{if(s instanceof ri&&(!a.init||a.init.TYPE==s.TYPE)){a.init&&(s.definitions=s.definitions.concat(a.init.definitions)),r=a.init=s,e[t]=c(a),fe=!0;continue}if(r&&a.init&&r.TYPE==a.init.TYPE&&ee(a.init))r.definitions=r.definitions.concat(a.init.definitions),a.init=null,fe=!0;else if(a.init instanceof ri&&(r=a.init,o=d(s,a.init))){if(fe=!0,0==o.length){e[t]=c(a);continue}s.body=J(s,o)}}else if(a instanceof ut)r&&r.TYPE==a.init.TYPE&&(i=r.definitions.slice(),a.init=a.init.definitions[0].name.convert_symbol(Ji,function(e,n){i.push(ve(oi,n,{name:n,value:null})),n.definition().references.push(e)}),r.definitions=i,fe=!0),a.object=f(a.object);else if(a instanceof Wt)a.condition=f(a.condition);else if(a instanceof Zn){if(o=l(s,a.body)){if(fe=!0,!o.length)continue;a.body=J(a.body,o)}}else(a instanceof Gt||a instanceof dt)&&(a.expression=f(a.expression));e[++t]=r?c(a):a}}function f(e){var n=l(s,e,1);if(!n)return e;fe=!0;var t=e.tail_node();return n[n.length-1]!==t&&n.push(t.left),J(e,n)}function c(e){return e.transform(new mr(function(e,n,t){if(e instanceof ni){if(r===e)return e;if(r.TYPE!=e.TYPE)return e;var i=this.parent();return i instanceof ut&&i.init===e?e:ee(e)?(r.definitions=r.definitions.concat(e.definitions),fe=!0,i instanceof ct&&i.init===e?null:t?Nn.skip:ve(Kn,e)):e}return!(e instanceof ai)&&!(e instanceof ht)&&Qn(e)?void 0:e}))}e.length=t+1}(e),c.option("collapse_vars")&&function(o,p){if(se.pinned())return;var d,i,a,s=Object.create(null),h=[],f=Object.create(null),c=o.length,u=new mr(function(e,n){if(P)return e;if(!j)return e!==l[v]?e:++v<l.length?R(e,u):(j=!0,(y=(b?X:W)(e,0))===e&&(P=!0),e);var t=u.parent();if(function(e,n){if(e===C)return!0;if(n instanceof ct&&e!==n.init)return!0;if(e instanceof Ei)return"="!=e.operator&&x.equivalent_to(e.left);if(e instanceof li)return x instanceof vi&&(!!x.equivalent_to(e.expression)&&!(C instanceof gt&&!C.contains_this()));if(e instanceof Mt)return!p.has_directive("use strict");if(e instanceof Jn)return!0;if(e instanceof qt)return T&&x.name===e.name.name;if(e instanceof $i)return e.key instanceof Wn;if(e instanceof at)return!0;if(e instanceof Lt)return!0;if(e instanceof Ji){if(e.is_declared(p)){if(e.fixed_value())return!1;if(pe(e))return!(n instanceof vi&&n.expression===e)&&ue(e.definition())}else if(B(e,n))return!1;return F?S=!1:!0}return e instanceof Qt||e instanceof dt}(e,t))return P=!0,e;if(!w&&L(e,t)&&(w=t),e.single_use&&t instanceof oi&&t.value===e)return e;if(!(e instanceof Ii)&&(E&&x.equivalent_to(e)||S&&(i=S(e,this)))){if(!I||w&&(i||!q||!F))return i||b||(P=!0),e;if(Er(e,t))return b&&!i&&(g=!0),e;if(b)return w&&0==_&&(_=a-N),i||N++,e;if(N++,fe=P=!0,Wn.info("Collapsing {node} [{file}:{line},{col}]",{node:e,file:e.start.file,line:e.start.line,col:e.start.col}),"Binary"==m.TYPE)return ve(Ei,m,{operator:"=",left:m.right.left,right:ve(ki,m,{condition:"&&"==m.operator?m.left:m.left.negate(p),consequent:m.right.right,alternative:e})});if(m instanceof wi)return x instanceof Ji&&(x.definition().fixed=!1),ve(yi,m,m);if(m instanceof oi){var i=m.name.definition();return i.references.length-i.replaced!=1||p.exposed(i)?ve(Ei,m,{operator:"=",left:ve(Ji,m.name,m.name),right:m.value}):(i.replaced++,me(0,t,e,m.value))}for(var r=m;r.write_only&&(r.write_only=!1,r instanceof Ei);)r=r.right;return m}if((U(e,t)||A(e))&&(y=e)instanceof ht&&(P=!0),e instanceof _t){var o=I;return I=!1,n(e,u),I=o,Y(e)}if(e instanceof Di){o=I;return I=!1,n(e,u),I=o,Y(e)}if(e instanceof ui){e.name=e.name.transform(u);o=I;return I=!1,e.value=e.value.transform(u),I=o,Y(e)}if(!(e instanceof et)||e instanceof ht||e.variables&&e.variables.all(function(e){return!z.has(e.name)}))return R(e,u);o=I;return I=!1,R(e,u)||n(e,u),I=o,Y(e)},Y),r=new mr(function(e){if(P)return e;if(!j){if(e!==l[v])return e;switch(v++,l.length-v){case 0:if(j=!0,g)return e;if(e!==m)return e;if(e instanceof oi)return e;H.replaced++;var n=r.parent();return n instanceof di&&n.tail_node()!==e?(b.replaced++,Nn.skip):C;case 1:if(!g&&e.body===m)return j=!0,H.replaced++,b.replaced++,null;default:return R(e,r)}}if(e instanceof Ji&&e.definition()===H){if(Er(e,r.parent()))return e;--N||(P=!0);var t=C.clone();return(t.scope=e.scope,t.reference(),N==_)?(P=!0,ve(Ei,m,{operator:"=",left:e,right:t})):(H.replaced++,t)}return e instanceof Xt||e instanceof ht?e:void 0},te);for(;0<=--c;){0==c&&p.option("unused")&&function(){var e,n,r=p.self();if(r instanceof gt&&!wt(r)&&!r.uses_arguments&&!r.pinned()&&(e=p.parent())instanceof li&&e.expression===r&&_e(e)&&Bn(e.args,function(e){return!(e instanceof gi)})){var o=p.has_directive("use strict");o&&!zn(o,r.body)&&(o=!1);for(var a=yt(r)?function(e){return e instanceof Ni&&"await"==e.name}:function(e){return e instanceof Si&&!t.find_parent(ht)},s=null,t=new vr(function(e,n){if(!l)return!0;if(a(e)||e instanceof Ti)return!(l=null);if(e instanceof Ki&&(o||!s))return!(l=null);if(e instanceof Ji&&r.variables.has(e.name)){var t=e.definition().scope;if(t!==se)for(;t=t.parent_scope;)if(t===se)return!0;l=null}if(e instanceof ht&&!bt(e)){var i=s;return s=e,n(),s=i,!0}}),i=(d=e.args.slice()).length,f=Object.create(null),c=r.argnames.length;0<=--c;){var u=r.argnames[c],l=d[c];if(u instanceof ui&&(n=u.value,u=u.name,d[i+c]=n),u instanceof Di){if(!function n(e,t){if(!t)return!(e instanceof Ni);if(e instanceof ui)return t.has_side_effects(p)||e.value.has_side_effects(p)||n(e.name,ye(t)&&e.value);if(e instanceof Di)return!(!e.rest||!n(e.rest))||(e instanceof Oi?!(t instanceof Ai||t.is_string(p))||!Bn(e.elements,function(e){return!n(e)}):e instanceof zi?!t.is_defined(p)||!Bn(e.properties,function(e){return!(e instanceof Wn&&e.has_side_effects(p))&&!n(e.value)}):void 0)}(u,l))continue;h.length=0;break}u.name in f||(f[u.name]=!0,(l=n?!l||ye(l)?n:null:l)||n?l instanceof mt&&l.pinned()?l=null:l&&l.walk(t):l=ve(cr,u).transform(p),l&&((u=ve(oi,u,{name:u,value:l})).name_index=c,u.arg_index=n?i+c:c,h.unshift([u])))}}}();var l=[];for(V(o[c]);0<h.length;){l=h.pop();var v=0,m=l[l.length-1],_=-1,g=!1,b=null,y=null,w=null,x=function(n){if(n instanceof Ei){var t=n.left;if("="!=n.operator)return t;if(!(t instanceof Ji))return t;var e=t.definition();return se.uses_arguments&&le(e)?t:(p.exposed(e)||(a=Z(e),e.fixed&&t.fixed&&((i=e.references.filter(function(e){return e.fixed===t.fixed}).length-1)<a&&(a=i,_=0)),Q(n.right)),t)}if(n instanceof xi)return n.right.left;if(n instanceof bi)return n.expression;if(n instanceof oi){e=(t=n.name).definition();if(!e.const_redefs&&(zn(t,e.orig)&&(!se.uses_arguments||!le(e)))){var i=e.orig.length-e.eliminated-(f[e.name]||0);return a=Z(e),e.fixed&&(a=Math.min(a,e.references.filter(function(e){if(!e.fixed)return!0;if(!e.fixed.assigns)return!0;e=e.fixed.assigns[0];return e===t||ee(e)===n.value}).length)),1<i&&!(t instanceof Li)?(Q(n.value),ve(Ji,t,t)):Q(n.value)||1==a&&!p.exposed(e)?ve(Ji,t,t):void 0}}else;}(m),k=x&&x.has_side_effects(p),E=x&&!k&&!he(x,p),S=function(n){if(!(n instanceof Ei&&n.right.single_use)){for(var t,i=Object.create(null),e=new vr(function(e){e instanceof Ji&&(i[e.definition().id]=!0)});n instanceof Ei&&"="==n.operator;)n.left.walk(e),n=n.right;if(n instanceof Ki)return o;if(n instanceof Ji){var r=n.evaluate(p);return r===n?o:ne(r,o)}if(n.is_truthy())return ne(!0,Mn);if(n.is_constant()){r=n.evaluate(p);if(!(r instanceof Wn))return ne(r,o)}return x instanceof Ji?!!function e(n){if(n instanceof Ai)return!1;if(n instanceof xi&&we[n.operator])return e(n.left)&&e(n.right);if(n instanceof li)return!1;if(n instanceof ki)return e(n.consequent)&&e(n.alternative);if(n instanceof qi)return!1;return!n.has_side_effects(p)}(n)&&(n.walk(new vr(function(e){if(t)return!0;e instanceof Ji&&i[e.definition().id]&&(t=!0)})),!t&&o):!1}function o(e){return n.equivalent_to(e)}}(m);if(E||S){var T=m.name instanceof Li,A=Mn;if(m.may_throw(p)){if(T&&yt(se))continue;A=ae?function(e){return e.has_side_effects(p)}:t}var D=!1,O=!1,$=!0,z=function(i){var r=new Ln;i instanceof oi&&(i.name.definition().fixed||($=!1),r.add(i.name.name,x));var o=se.uses_arguments&&!p.has_directive("use strict"),a=se instanceof vt,s=new vr(function(e){var n,t;e instanceof Ji?(t=e.fixed_value())||((n=(t=e).definition()).undeclared||!n.assignments&&n.escaped&&!n.escaped.cross_scope||!de(n,e.scope,e,s.parent())&&kn(n)||($=!1)):e instanceof Ki&&(t=e),t&&r.add(e.name,ce(p,s,e,t,0)),o&&e instanceof _i&&(se.each_argname(function(e){p.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||($=!1),r.add(e.name,!0))}),o=!1),a&&("Call"==e.TYPE?O||((t=e.expression)instanceof vi||t instanceof gt&&!t.contains_this()||(O=!0)):e instanceof vi&&function e(n){if(n instanceof Ji&&!(n=n.fixed_value()))return!0;if(n instanceof Ei)return"="==n.operator&&e(n.right);return n instanceof vi||n instanceof Ki}(e.expression)&&(e!==x||i instanceof bi?D=!0:O=!0))});return i.walk(s),r}(m),q=function(e){var n=hi(e);return n instanceof Ji&&n.definition().scope.resolve()===se&&!(oe&&(z.has(n.name)&&z.get(n.name)[0]!==e||m instanceof bi||m instanceof Ei&&"="!=m.operator))}(x),C=ee(m);k=k||!(m instanceof bi)&&C.has_side_effects(p);var M=ae||!q?function(e){return e instanceof Di}:Mn,F=function(e){if(e instanceof bi)return!1;if(k)return!1;if(b)return!0;if(!(x instanceof Ji))return!1;var n;if(e instanceof oi)n=1;else{if("="!=e.operator)return!1;n=2}e=x.definition();return e.references.length-e.replaced==n}(m),j=T,P=!1,N=0,I=!d||!j;if(!I){for(var e=m.arg_index+1;!P&&e<d.length;e++)d[e]&&d[e].transform(u);I=!0}for(var n=c;!P&&n<o.length;n++)o[n].transform(u);if(b){if(!N||N+g<a){h.push(l),i=!0;continue}N==_&&(g=!0);var H=x.definition();P=!1,v=0,j=T;for(n=c;!P&&n<o.length;n++)o[n].transform(r)||o.splice(n--,1);N=m instanceof oi&&m===l[l.length-1]&&H.references.length==H.replaced&&!p.exposed(H),b.last_ref=!1,b.single_use=!1,fe=!0}N&&!function(e){var n=e.name_index;if(0<=n){var t=se.argnames[n];return t instanceof ui?(t.value=ve(rr,t,{value:0}),t.name.definition().fixed=!1):(e=p.parent().args)[n]&&(e[n]=ve(rr,e[n],{value:0}),t.definition().fixed=!1),!0}var i=l.length-1;l[i-1].body===l[i]&&i--;var r=new mr(function(e,n,t){return j||e!==l[v]?e:++v<=i?R(e,r):(j=!0,e instanceof oi?(f[e.name.name]=(f[e.name.name]||0)+1,b&&b.replaced++,(e=e.clone()).value=null,e):t?Nn.skip:null)},te);return j=P=!1,v=0,o[c].transform(r)}(m)&&o.splice(c,1)}}}function Y(e){return P||(y===e&&(P=!0),w===e&&(w=null)),e}function R(e,n){if(!(e instanceof et))return e instanceof Pt&&!e.static?(e.key instanceof Wn&&(e.key=e.key.transform(n)),e):void 0;if(e instanceof ht)return e;if(e instanceof ut)return e.object=e.object.transform(n),P=!0,e;if(e instanceof Gt){e.expression=e.expression.transform(n);for(var t=0;!P&&t<e.body.length;t++){var i=e.body[t];if(i instanceof Kt){if(!j){if(i!==l[v])continue;v++}if(i.expression=i.expression.transform(n),!F)break;S=!1}}return P=!0,e}}function B(e,n){return n instanceof Ei?"="==n.operator&&n.left===e:n instanceof ui?n.name===e:n instanceof Oi||n instanceof $i&&n.value===e}function L(e,n){return n instanceof Ei?n.left!==e&&we[n.operator.slice(0,-1)]:n instanceof xi?n.left!==e&&we[n.operator]:n instanceof li?n.optional&&n.expression!==e:n instanceof Kt?n.expression!==e:n instanceof ki||n instanceof Wt?n.condition!==e:n instanceof _i&&(n.optional&&n.expression!==e)}function U(e,n){if(e instanceof Si)return 1;if("Binary"==e.TYPE)return"in"==e.operator&&!bn(e.right);if(e instanceof li){var t=e.expression;if(t instanceof Ji&&(f=t.definition(),t=t.fixed_value()),!(t instanceof mt))return!e.is_expr_pure(p);if(f&&xn(p,f,t))return 1;if(t.collapse_scanning)return;t.collapse_scanning=!0;var i=I;I=!1;var r=y,o=w;if(Bn(t.argnames,function(e){if(e instanceof ui){if(e.value.transform(u),P)return;e=e.name}return!(e instanceof Di)}))if(bt(t)&&t.value)t.value.transform(u);else for(var a=0;!P&&a<t.body.length;a++){var s=t.body[a];if(s instanceof Rt){s.value&&s.value.transform(u);break}s.transform(u)}else P=!0;return(w=o,y=r,I=i,delete t.collapse_scanning,P)?(P=!1,1):void 0}if(e instanceof Yt){if(ae){if(ae.bfinally)return 1;if(ae.bcatch&&e instanceof Bt)return 1}return k||x instanceof vi||re(x)}if(e instanceof At)return p.option("ie")&&e.name&&z.has(e.name.name);if(e instanceof Ki)return ie(e);if(e instanceof vi){if(k)return 1;i=e.expression;if(i instanceof Ji&&ue(i.definition()))return 1;if(p.option("unsafe")){if(ge(i)&&be[i.name])return;if(ke(i))return}return $?!b&&((ae||!q)&&(!e.optional&&i.may_throw_on_access(p))):1}if(e instanceof gi)return 1;if(e instanceof Ji){if(ie(e))return!B(e,n);if(k&&re(e))return 1;var f=e.definition();return(ae||f.scope.resolve()!==se)&&!pe(e)}if(e instanceof nr)return!e.is_expr_pure(p);if(e instanceof oi)return M(e.name)||(e.value||n instanceof ii)&&e.name.match_symbol(function(e){return e instanceof Ii&&(z.has(e.name)||k&&re(e))},!0);if(e instanceof Ti)return 1;e=Er(e.left,e);return e&&(e instanceof vi||(M(e)||e.match_symbol(function(e){return e instanceof Ji&&(z.has(e.name)||D&&p.exposed(e.definition()))},!0)))}function V(e,n){var t,i,r;l.push(e),e instanceof Ai?e.elements.forEach(function(e){V(e,n)}):e instanceof Ei?((t=e.left)instanceof Di||h.push(l.slice()),V(t),V(e.right),t instanceof Ji&&"="==e.operator&&(s[t.name]=(s[t.name]||0)+1)):e instanceof Si?V(e.expression,n):e instanceof xi?(r=we[e.operator],n&&r&&"??"!=e.operator&&e.right instanceof Ei&&"="==e.right.operator&&!(e.right.left instanceof Di)&&h.push(l.slice()),V(e.left,!r&&n),V(e.right,n)):e instanceof li?(V(e.expression),e.args.forEach(V)):e instanceof Kt?V(e.expression):e instanceof ki?(V(e.condition),V(e.consequent,n),V(e.alternative,n)):e instanceof ni?e.definitions.forEach(V):e instanceof mi?V(e.expression):e instanceof at?(V(e.condition),e.body instanceof tt||V(e.body)):e instanceof Yt?e.value&&V(e.value):e instanceof ct?(e.init&&V(e.init,!0),e.condition&&V(e.condition),e.step&&V(e.step,!0),e.body instanceof tt||V(e.body)):e instanceof ut?(V(e.object),e.body instanceof tt||V(e.body)):e instanceof Wt?(V(e.condition),e.body instanceof tt||V(e.body),!e.alternative||e.alternative instanceof tt||V(e.alternative)):e instanceof qi?e.properties.forEach(function(e){l.push(e),e.key instanceof Wn&&V(e.key),e instanceof Mi&&V(e.value,n),l.pop()}):e instanceof di?(i=e.expressions.length-(n?0:1),e.expressions.forEach(function(e,n){V(e,n<i)})):e instanceof Zn?V(e.body,!0):e instanceof gi?V(e.expression):e instanceof _i?(V(e.expression),V(e.property)):e instanceof Gt?(V(e.expression),e.body.forEach(V)):e instanceof bi?yr[e.operator]?h.push(l.slice()):V(e.expression):e instanceof oi?(e.name instanceof Bi&&(e.value?(r=e.name.definition()).references.length>r.replaced&&h.push(l.slice()):f[e.name.name]=(f[e.name.name]||0)+1),e.value&&V(e.value)):e instanceof Ti&&e.expression&&V(e.expression),l.pop()}function W(e,n){var t=u.parent(n);return t instanceof Ai||t instanceof Ei||t instanceof Si||t instanceof xi||t instanceof li||t instanceof Kt||t instanceof ki?e:t instanceof ni?K(t,n+1):t instanceof Yt||t instanceof Wt||t instanceof ot||t instanceof Ci||t instanceof vi?e:t instanceof di?(t.tail_node()===e?W:K)(t,n+1):t instanceof Zn?K(t,n+1):t instanceof gi||t instanceof Gt||t instanceof bi||t instanceof oi||t instanceof Ti?e:null}function G(e,n,t){for(var i;i=e,(e=u.parent(++t))instanceof Ei&&e.operator.slice(0,-1)==n||e instanceof xi&&e.operator==n;);return i}function J(e,n,t,i,r){var o=I;I=!1;var a=y,s=w,f=u.stack;return u.stack=[i],e.transform(u),u.stack=f,w=s,y=a,I=o,P?(P=!1,t):n(i,r+1)}function X(e,n){var t=u.parent(n);if(t instanceof Ai)return X(t,n+1);if(t instanceof Ei)return A(t)||t.left.match_symbol(function(e){return e instanceof Ji&&(x.name==e.name||b.name==e.name)})?e:t.left!==e&&we[i=t.operator.slice(0,-1)]?G(t,i,n):X(t,n+1);if(t instanceof xi)return t.left!==e&&we[i=t.operator]?G(t,i,n):X(t,n+1);if(t instanceof li)return t;if(t instanceof Kt)return t.expression!==e?e:X(t,n+1);if(t instanceof ki)return t.condition!==e?e:X(t,n+1);if(t instanceof ni)return K(t,n+1);if(t instanceof st)return e;if(t instanceof Yt)return K(t,n+1);if(t instanceof ct)return t.init!==e&&t.condition!==e?e:X(t,n+1);if(t instanceof ut)return t.init!==e?e:X(t,n+1);if(t instanceof Wt)return t.condition!==e?e:X(t,n+1);if(t instanceof Ci){var i=u.parent(n+1);return Bn(i.properties,function(e){return e instanceof Mi})?X(i,n+2):i}return t instanceof vi?t.expression===e?X(t,n+1):e:t instanceof di?(t.tail_node()===e?X:K)(t,n+1):t instanceof Zn?K(t,n+1):t instanceof gi?X(t,n+1):t instanceof Gt?t.expression!==e?e:X(t,n+1):t instanceof bi?"delete"==t.operator?e:X(t,n+1):t instanceof oi?t.name.match_symbol(function(e){return e instanceof Ii&&(x.name==e.name||b.name==e.name)})?e:X(t,n+1):t instanceof ft?t.condition!==e?e:X(t,n+1):t instanceof Ti?X(t,n+1):null}function K(n,t){var i=u.parent(t);if(U(n,i))return n;if(L(n,i))return n;if(i instanceof Ai)return K(i,t+1);if(i instanceof Ei)return r(i.left);if(i instanceof Si)return n;if(i instanceof xi)return K(i,t+1);if(i instanceof li)return K(i,t+1);if(i instanceof Kt)return K(i,t+1);if(i instanceof ki)return K(i,t+1);if(i instanceof ni)return K(i,t+1);if(i instanceof Yt)return K(i,t+1);if(i instanceof Wt)return K(i,t+1);if(i instanceof ot)return n;if(i instanceof Ci){var e=u.parent(t+1);return Bn(e.properties,function(e){return e instanceof Mi})?K(e,t+2):e}if(i instanceof vi){e=i.expression;return e===n?K(i,t+1):J(e,K,n,i,t)}return i instanceof di||i instanceof Zn?K(i,t+1):i instanceof gi?n:i instanceof Gt||i instanceof bi?K(i,t+1):i instanceof oi?r(i.name):i instanceof Ti?n:null;function r(e){return A(i)?n:e!==n&&e instanceof Di?J(e,K,n,i,t):K(i,t+1)}}function Q(e){if(i)i=!1;else if(!(a<1)){var n=e instanceof Ei&&"="==e.operator?e.left:e;if(n instanceof Ji){var t=n.definition();if(!t.undeclared&&!ue(t)){if(n!==e){if(he(n,p))return;if(t.references.length-t.replaced<2)return;e=m.clone();e[e instanceof Ei?"right":"value"]=n,0<=m.name_index&&(e.name_index=m.name_index,e.arg_index=m.arg_index),m=e}return b=t}}}}function Z(e){return e.references.length-e.replaced-(s[e.name]||0)}function ee(e){if(e instanceof Ei)return e.right;if(e instanceof xi){var n=e.clone();return n.right=e.right.right,n}return e instanceof oi?e.value:void 0}function ne(t,i){return function(e,n){if(n.in_boolean_context()){if(t&&e.is_truthy()&&!e.has_side_effects(p))return!0;if(e.is_constant()){n=e.evaluate(p);if(!(n instanceof Wn))return!n==!t}}return i(e)}}function te(e){if(e instanceof di)switch(e.expressions.length){case 0:return null;case 1:return me(0,this.parent(),e,e.expressions[0])}}function ie(e){e=z.get(e.name);if(e&&!Bn(e,function(e){return!e}))return e[0]!==x||void(S=!1)}function re(e){e=e.definition();return!(1==e.orig.length&&e.orig[0]instanceof Ui)&&(e.scope.resolve()!==se||(!(!O||!p.exposed(e))||!Bn(e.references,function(e){return e.scope.resolve()===se})))}function t(e,n){if(e instanceof Ei)return t(e.left,!0);if(e instanceof bi)return t(e.expression,!0);if(e instanceof oi)return e.value&&t(e.value);if(n){if(e instanceof mi)return t(e.expression,!0);if(e instanceof _i)return t(e.expression,!0);if(e instanceof Ji)return e.definition().scope.resolve()!==se}return!1}}(e,c),fe&&0<n--;);return e;function p(e,n){if(!(e instanceof it))return e;for(var t=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof ri&&ee(r))n.push(r);else{if(t||C(r))return!1;t=r}}return t}function u(e){return e instanceof Ei?[e]:e instanceof di?e.expressions.slice():void 0}function l(e,n,t){var i=u(n);if(i){for(var r=!1,o=i.length-1;0<=--o;){var a,s=i[o];s instanceof Ei&&"="==s.operator&&s.left instanceof Ji&&(a=i.slice(o+1),v(s.left,s.right,a)&&(r=!0,i=i.slice(0,o+1).concat(a)))}if(e instanceof ni){t=t||0;for(o=e.definitions.length;0<=--o;){var f=e.definitions[o];if(f.value){v(f.name,f.value,i)&&(r=!0),function(e,n,t){if(c.option("conditionals")&&!(e.name instanceof Di)){for(var i=!1,r=e.name.definition();n.length>t;){var o=hn(c,r,e.value,n[0]);if(!o)break;e.value=o,n.shift(),i=!0}return i}}(f,i,t)&&(r=!0);break}}e instanceof ri&&h(e.definitions,i,t)&&(r=!0)}return r&&i}}function d(e,n){if(e instanceof Zn&&!ee(n)){var t=u(e.body);if(t){e=[];if(h(e,t.reverse(),0))return n.definitions=e.reverse().concat(n.definitions),t.reverse()}}}function h(e,n,t){for(var i=!1;n.length>t;){var r=n[0];if(!(r instanceof Ei))break;if("="!=r.operator)break;var o=r.left;if(!(o instanceof Ji))break;if(ge(o))break;if(o.scope.resolve()!==se)break;var a=o.definition();if(a.scope!==se)break;if(a.orig.length>a.eliminated+1)break;if("SymbolVar"!=a.orig[0].TYPE)break;o=ve(Bi,o,o);e.push(ve(oi,r,{name:o,value:r.right})),a.orig.push(o),a.replaced++,n.shift(),i=!0}return i}function v(e,n,t){if(n instanceof qi){var i=!1;do{var r=t[0];if(!(r instanceof Ei))break;if("="!=r.operator)break;if(!(r.left instanceof vi))break;var o=r.left.expression;if(!(o instanceof Ji))break;if(e.name!=o.name)break;if(!r.right.is_constant_expression(se))break;var a=r.left.property;if((a=a instanceof Wn?a.evaluate(c):a)instanceof Wn)break;o="__proto__"==(a=""+a)||c.has_directive("use strict")?function(e){e=e.key;return"string"==typeof e&&e!=a&&"__proto__"!=e}:function(e){var n=e.key;return e instanceof Pi||e instanceof ji?"string"==typeof n&&n!=a:"__proto__"!==n}}while(Bn(n.properties,o)&&(n.properties.push(ve(Mi,r,{key:a,value:r.right})),t.shift(),i=!0,t.length));return i}}}function Y(i,r,o){var a,s=!1;function f(e){a?(a.push(e),M(e)||(a.required=!0)):o.push(e)}r.walk(new vr(function(e,n){if(e instanceof Ft)return e.extends=null,e.properties=[],f(e),!0;if(e instanceof ni){var t=[];return e.remove_initializers(i,t)&&Wn.warn("Dropping initialization in unreachable code [{file}:{line},{col}]",e.start),0<t.length&&(e.definitions=t,f(e)),!0}if(e instanceof Ot)return f(e),!0;if(e instanceof ht)return!0;if(e instanceof et){t=a;return a=[],n(),a.required?o.push(ve(it,r,{body:a})):a.length&&[].push.apply(o,a),a=t,!0}e instanceof Lt||(s=!0)})),s&&Wn.warn("Dropping unreachable code [{file}:{line},{col}]",r.start)}function ye(e,n){return e.is_undefined||e instanceof cr||e instanceof yi&&"void"==e.operator&&!(n&&e.expression.has_side_effects(n))}function R(e,n,t){switch(e){case"-":return n.is_negative_zero()&&(!(t instanceof tr)||0==t.value);case"&&":case"||":return n.is_negative_zero()||t.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}function B(e,n){return n||/strict/.test(e.option("pure_getters"))}function L(e,n,t){switch(n){case"&&":return t.left.is_defined(e)&&t.right.is_defined(e);case"||":return t.left.is_truthy()||t.right.is_defined(e);case"??":return t.left.is_defined(e)||t.right.is_defined(e);default:return!0}}Ji.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&be[this.name]}),(se=function(e,n){e.DEFMETHOD("is_truthy",n)})(Wn,Mn),se(Ai,Fn),se(Ei,function(){return"="==this.operator&&this.right.is_truthy()}),se(mt,Fn),se(qi,Fn),se(ar,Fn),se(di,function(){return this.tail_node().is_truthy()}),se(Ji,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=Mn;e=e.is_truthy();return delete this.is_truthy,e}),(se=function(e,n){e.DEFMETHOD("is_negative_zero",n)})(Wn,Fn),se(Ai,Mn),se(Ei,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():R(e.slice(0,-1),this.left,this.right)}),se(xi,function(){return R(this.operator,this.left,this.right)}),se(tr,function(){return 0==this.value&&1/this.value<0}),se(mt,Mn),se(qi,Mn),se(ar,Mn),se(di,function(){return this.tail_node().is_negative_zero()}),se(Ji,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=Fn;e=e.is_negative_zero();return delete this.is_negative_zero,e}),se(yi,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator}),se=function(e,n){e.DEFMETHOD("_dot_throw",n)},Wn.DEFMETHOD("may_throw_on_access",function(e,n){return!e.option("pure_getters")||this._dot_throw(e,n)}),se(Wn,B),se(Ai,Mn),se(Ei,function(e){var n=this.operator,t=this.left,i=this.right;return"="!=n?we[n.slice(0,-1)]&&(t._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(t instanceof Ji)||(!(i instanceof xi&&"||"==i.operator&&t.name==i.left.name)||i.right._dot_throw(e)))}),se(xi,function(e){return we[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),se(Mt,Mn),se(ki,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),se(tr,Mn),se(mi,function(e,n){if(!B(e,n))return!1;n=this.expression;return n instanceof Ji&&(n=n.fixed_value()),!("prototype"==this.property&&v(n))}),se(mt,Mn),se(sr,Fn),se(qi,function(n,t){return B(n,t)&&!Bn(this.properties,function(e){return e instanceof Mi&&("__proto__"!==e.key||!e.value._dot_throw(n,t))})}),se(Ki,function(e,n){return B(e,n)&&!this.scope.resolve().new}),se(di,function(e){return this.tail_node()._dot_throw(e)}),se(Ji,function(e,n){if(this.is_undefined)return!0;if(!B(e,n))return!1;if(ge(this)&&this.is_declared(e))return!1;if(this.is_immutable())return!1;n=this.definition();if(ue(n)&&!n.scope.rest&&Bn(n.scope.argnames,function(e){return e instanceof Li}))return 2<n.scope.uses_arguments;n=this.fixed_value();return!n||(this._dot_throw=Fn,n._dot_throw(e)?(delete this._dot_throw,!0):(this._dot_throw=Mn,!1))}),se(yi,function(){return"void"==this.operator}),se(wi,Mn),se(cr,Fn),(se=function(e,n){e.DEFMETHOD("is_defined",n)})(Wn,Mn),se(Ai,Fn),se(Ei,function(e){var n=this.operator;return"="==n?this.right.is_defined(e):L(e,n.slice(0,-1),this)}),se(xi,function(e){return L(e,this.operator,this)}),se(ki,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),se(tr,Fn),se(ur,Mn),se(mt,Fn),se(qi,Fn),se(di,function(e){return this.tail_node().is_defined(e)}),se(Ji,function(e){if(this.is_undefined)return!1;if(ge(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var n=this.fixed_value();if(!n)return!1;this.is_defined=Mn;e=n.is_defined(e);return delete this.is_defined,e}),se(yi,function(){return"void"!=this.operator}),se(wi,Fn),se(cr,Mn),function(e){e(Wn,Mn),e(Ei,function(e){return"="==this.operator&&this.right.is_boolean(e)});var n=Rn("in instanceof == != === !== < <= >= >");e(xi,function(e){return n[this.operator]||we[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(pr,Fn);var t=Rn("every hasOwnProperty isPrototypeOf propertyIsEnumerable some");e(li,function(e){if(!e.option("unsafe"))return!1;e=this.expression;return e instanceof mi&&(t[e.property]||"test"==e.property&&e.expression instanceof ar)}),e(ki,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(pi,Mn),e(di,function(e){return this.tail_node().is_boolean(e)}),e(Ji,function(e){var n=this.fixed_value();if(!n)return!1;this.is_boolean=Mn;e=n.is_boolean(e);return delete this.is_boolean,e});var i=Rn("! delete");e(yi,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_boolean",n)}),function(e){e(Wn,Mn);var n=Rn("- * / % ** & | ^ << >> >>>");e(Ei,function(e){return n[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(xi,function(e){return!!n[this.operator]||"+"==this.operator&&((this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e)))});var t=Rn(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toExponential","toFixed","toPrecision"]);e(li,function(e){if(!e.option("unsafe"))return!1;e=this.expression;return e instanceof mi&&(t[e.property]||ge(e.expression)&&"Math"==e.expression.name)}),e(ki,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(pi,Mn),e(rr,Fn),e(di,function(e){return this.tail_node().is_number(e)}),e(Ji,function(e){var n=this.fixed_value();if(!n)return!1;this.is_number=Mn;e=n.is_number(e);return delete this.is_number,e});var i=Rn("+ - ~ ++ --");e(bi,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_number",n)}),function(e){e(Wn,Mn),e(Ei,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(xi,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))});var n=Rn(["charAt","substr","substring","toLowerCase","toString","toUpperCase","trim"]);e(li,function(e){if(!e.option("unsafe"))return!1;e=this.expression;return e instanceof mi&&n[e.property]}),e(ki,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(di,function(e){return this.tail_node().is_string(e)}),e(ir,Fn),e(Ji,function(e){var n=this.fixed_value();if(!n)return!1;this.is_string=Mn;e=n.is_string(e);return delete this.is_string,e}),e(nr,function(e){return!this.tag||En(e,this.tag)}),e(yi,function(){return"typeof"==this.operator})}(function(e,n){e.DEFMETHOD("is_string",n)});var we=Rn("&& || ??");function U(e){Wn.warn("global_defs {node} redefined [{file}:{line},{col}]",{node:e,file:e.start.file,line:e.start.line,col:e.start.col})}function ne(e,n,t){return n.print_to_string().length-e.print_to_string().length<(t||0)?n:e}function V(e,n,t){return ne(ve(Zn,e,{body:e}),ve(Zn,n,{body:n}),t).body}function te(e,n,t,i){return(Vn(e)?V:ne)(n,t,i)}function ie(n){var t=Object.create(null);return Object.keys(n).forEach(function(e){t[e]=Rn(n[e])}),t}function re(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof Xn))return t}}function oe(){return this.value?ve(Rt,this.value,{value:this.value}):re(this.body)}function ae(e,n){var t=n.evaluate(e);return t===n?n:te(e,n,X(t,n).optimize(e),e.eval_threshold)}se=function(e,n){e.DEFMETHOD("_find_defs",n)},vt.DEFMETHOD("resolve_defines",function(o){return o.option("global_defs")?(this.figure_out_scope({ie:o.option("ie")}),this.transform(new mr(function(e){var n=e._find_defs(o,"");if(n){for(var t,i=0,r=e;(t=this.parent(i++))&&t instanceof vi&&t.expression===r;)r=t;if(!Er(r,t))return n;U(e)}}))):this}),se(Wn,Cn),se(mi,function(e,n){return this.expression._find_defs(e,"."+this.property+n)}),se(Ii,function(e){this.definition().global&&Un(e.option("global_defs"),this.name)&&U(this)}),se(Ji,function(e,n){if(this.definition().global){e=e.option("global_defs"),n=this.name+n;return Un(e,n)?function n(e,t){if(e instanceof Wn)return e.clone(!0);if(Array.isArray(e))return ve(Ai,t,{elements:e.map(function(e){return n(e,t)})});if(e&&"object"==typeof e){var i,r=[];for(i in e)Un(e,i)&&r.push(ve(Mi,t,{key:i,value:n(e[i],t)}));return ve(qi,t,{properties:r})}return X(e,t)}(e[n],this):void 0}}),kt.DEFMETHOD("first_statement",oe),Et.DEFMETHOD("first_statement",oe),mt.DEFMETHOD("first_statement",function(){return re(this.body)}),mt.DEFMETHOD("length",function(){for(var e=this.argnames,n=0;n<e.length&&!(e[n]instanceof ui);n++);return n});var se=["constructor","toString","valueOf"],fe=ie({Array:["indexOf","join","lastIndexOf","slice"].concat(se),Boolean:se,Function:se,Number:["toExponential","toFixed","toPrecision"].concat(se),Object:se,RegExp:["exec","test"].concat(se),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(se)}),xe=ie({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]});function ke(e){if(e instanceof mi){var n=e.expression;if(ge(n)){var t=xe[n.name];return t&&(t[e.property]||"Math"==n.name&&"random"==e.property)}}}function Ee(e){return ve(yi,e,{operator:"!",expression:e})}function Se(e,n,t){e=Ee(e);if(t){t=ve(Zn,n,{body:n});return ne(e,t)===t?n:e}return ne(e,n)}!function(e){e(Wn,Mn),e(tr,Fn),e(ar,Mn);var n=Rn("! ~ - + void");e(yi,function(){return n[this.operator]&&this.expression instanceof tr})}(function(e,n){e.DEFMETHOD("is_constant",n)}),function(e){Wn.DEFMETHOD("evaluate",function(e,n){if(!e.option("evaluate"))return this;var t=[],e=this._eval(e,n,t,1);return t.forEach(function(e){delete e._eval}),!n&&e&&!(e instanceof RegExp)&&("function"==typeof e||"object"==typeof e)?this:e});var d=new vr(function(e){e instanceof Ei&&f(e.left),e instanceof bi&&yr[e.operator]&&f(e.expression)});function f(e){e instanceof Oi?e.elements.forEach(f):e instanceof zi?e.properties.forEach(function(e){f(e.value)}):e instanceof vi?f(e.expression):e instanceof Ji&&e.definition().references.forEach(function(e){delete e._eval})}e(Gn,function(){throw new Error(Hn("Cannot evaluate a statement [{file}:{line},{col}]",this.start))}),e(_t,jn),e(or,jn),e(Mt,jn),e(Wn,jn),e(tr,function(){return this.value}),e(Ei,function(e,n,t,i){var r=this.left;if(!n){if(!(r instanceof Ji))return this;if(!Un(r,"_eval")){if(!r.fixed)return this;var o=r.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==r)return this;if("m"==o.single_use)return this}}o=this.operator,o=!Un(r,"_eval")&&r instanceof Ji&&r.fixed&&r.definition().fixed?r:"="==o?this.right:ve(xi,this,{operator:o.slice(0,-1),left:r,right:this.right});r.walk(d);i=o._eval(e,n,t,i);return"object"==typeof i?this:(f(r),i)}),e(di,function(e,n,t,i){if(!n)return this;for(var r=this.expressions,o=0,a=r.length-1;o<a;o++)r[o].walk(d);var s=r[a],i=s._eval(e,n,t,i);return i===s?this:i}),e(mt,function(e){if(e.option("unsafe")){e=function(){};return e.node=this,e.toString=function(){return"function(){}"},e}return this}),e(Ai,function(e,n,t,i){if(e.option("unsafe")){for(var r=[],o=0;o<this.elements.length;o++){var a=this.elements[o];if(a instanceof ur)return this;var s=a._eval(e,n,t,i);if(a===s)return this;r.push(s)}return r}return this});var c=Rn("__proto__ toString valueOf");e(qi,function(e,n,t,i){if(e.option("unsafe")){for(var r={},o=0;o<this.properties.length;o++){var a=this.properties[o];if(!(a instanceof Mi))return this;var s=a.key;if(s instanceof Wn&&(s=s._eval(e,n,t,i))===a.key)return this;if(c[s])return this;if(r[s]=a.value._eval(e,n,t,i),r[s]===a.value)return this}return r}return this});var u=Rn("! typeof void");e(yi,function(e,n,t,i){var r=this.expression,o=this.operator;if(e.option("typeofs")&&"typeof"==o&&(r instanceof mt||r instanceof Ji&&r.fixed_value()instanceof mt))return"function";var a=r instanceof Ji&&r.definition();u[o]||a&&a.fixed||i++,r.walk(d);var s=r._eval(e,n,t,i);if(s===r)return n&&"void"==o?void 0:this;switch(o){case"!":return!s;case"typeof":return s instanceof RegExp?this:typeof s;case"void":return;case"~":return~s;case"-":return-s;case"+":return+s;case"++":case"--":if(!a)return this;if(!n){if(a.undeclared)return this;if(a.last_ref!==r)return this}return Un(r,"_eval")&&(s=+(o[0]+1)+ +s),f(r),s}return this}),e(wi,function(e,n,t,i){var r=this.expression;if(r instanceof Ji){if(!Un(r,"_eval")){if(!r.fixed)return this;if(!n){var o=r.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==r)return this}}}else if(!n)return this;r instanceof Ji&&r.definition().fixed||i++,r.walk(d);i=r._eval(e,n,t,i);return i===r?this:(f(r),+i)});var l=Rn("&& || === !==");e(xi,function(e,n,t,i){l[this.operator]||i++;var r=this.left._eval(e,n,t,i);if(r===this.left)return this;if(this.operator==(r?"||":"&&"))return r;var o,a=this.right._eval(e,n&&!(r&&"object"==typeof r),t,i);if(a===this.right)return this;switch(this.operator){case"&&":o=r&&a;break;case"||":o=r||a;break;case"??":o=null==r?a:r;break;case"|":o=r|a;break;case"&":o=r&a;break;case"^":o=r^a;break;case"+":o=r+a;break;case"-":o=r-a;break;case"*":o=r*a;break;case"/":o=r/a;break;case"%":o=r%a;break;case"<<":o=r<<a;break;case">>":o=r>>a;break;case">>>":o=r>>>a;break;case"==":o=r==a;break;case"===":o=r===a;break;case"!=":o=r!=a;break;case"!==":o=r!==a;break;case"<":o=r<a;break;case"<=":o=r<=a;break;case">":o=a<r;break;case">=":o=a<=r;break;case"**":o=Math.pow(r,a);break;case"in":if(a&&"object"==typeof a&&Un(a,r)){o=!0;break}default:return this}if(isNaN(o))return e.find_parent(dt)?this:o;if(e.option("unsafe_math")&&!n&&o&&"number"==typeof o&&("+"==this.operator||"-"==this.operator)){n=Math.max(0,s(r),s(a));if(n<16)return+o.toFixed(n)}return o;function s(e){e=/(\.[0-9]*)?(e.+)?$/.exec(+e);return(e[1]||".").length-1-(e[2]||"").slice(1)}}),e(ki,function(e,n,t,i){var r=this.condition._eval(e,n,t,i);if(r===this.condition)return this;r=r?this.consequent:this.alternative,i=r._eval(e,n,t,i);return i===r?this:i}),e(Ji,function(e,n,t,i){var r,o=this.fixed_value();if(!o)return this;if(Un(o,"_eval"))r=o._eval();else{if(this._eval=jn,r=o._eval(e,n,t,i),delete this._eval,r===o)return this;o._eval=function(){return r},t.push(o)}return r&&"object"==typeof r&&!function(n,e){var t=n.definition().escaped;switch(t.length){case 0:return 1;case 1:var i=!1;return t[0].walk(new vr(function(e){return!!i||(e===n?i=!0:e instanceof ht||void 0)})),i;default:return e<=t.depth}}(this,i)?this:r});var h={Array:Array,Math:Math,Number:Number,Object:Object,String:String},s=ie({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),p=Rn("global ignoreCase multiline source");function v(e,n,t,i,r){for(var o=[],a=0;a<e.length;a++){var s=e[a],f=s._eval(n,t,i,r);if(s===f)return;o.push(f)}return o}e(vi,function(e,n,t,i){if(e.option("unsafe")){var r,o=this.expression;if(!ge(o)&&(null==(r=o._eval(e,n,t,i+1))||r===o))return this;var a=this.property;if(a instanceof Wn&&(a=a._eval(e,n,t,i))===this.property)return this;if(void 0===r){i=s[o.name];if(!i||!i[a])return this;r=h[o.name]}else if(r instanceof RegExp){if(!p[a])return this}else if("object"==typeof r){if(!Un(r,a))return this}else if("function"==typeof r)switch(a){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[a]}return this}),e(li,function(i,r,o,a){var e=this.expression,n=e instanceof Ji?e.fixed_value():e;if(n instanceof kt||n instanceof qt||n instanceof At){if(n.evaluating)return this;if(n.name&&0<n.name.definition().recursive_refs)return this;if(this.is_expr_pure(i))return this;var s=v(this.args,i,r,o,a);if(!Bn(n.argnames,function(e,n){if(e instanceof ui){if(!s)return;if(void 0!==s[n])return;var t=e.value._eval(i,r,o,a);if(t===e.value)return;s[n]=t,e=e.name}return!(e instanceof Di)}))return this;if(n.rest instanceof Di)return this;if(!s&&!r)return this;var t=n.first_statement();if(!(t instanceof Rt)){if(r){n.walk(d);var f=!1;if(n.evaluating=!0,nt(n,new vr(function(e){return!!f||(e instanceof Rt?(e.value&&void 0!==e.value._eval(i,!0,o,a)&&(f=!0),!0):e instanceof ht&&e!==n||void 0)})),delete n.evaluating,!f)return}return this}if(!(u=t.value))return;var c=[];return s&&(!Bn(n.argnames,function(e,n){return p(e,s[n])})||n.rest&&!p(n.rest,s.slice(n.argnames.length)))&&!r||(n.evaluating=!0,u=u._eval(i,r,o,a),delete n.evaluating),c.forEach(function(e){delete e._eval}),u===t.value?this:u}if(i.option("unsafe")&&e instanceof vi){var u,t=e.property;if(t instanceof Wn&&(t=t._eval(i,r,o,a))===e.property)return this;e=e.expression;if(ge(e)){var l=xe[e.name];if(!l||!l[t])return this;u=h[e.name]}else{if(null==(u=e._eval(i,r,o,a+1))||u===e)return this;l=fe[u.constructor.name];if(!l||!l[t])return this;if(u instanceof RegExp&&u.global&&!(e instanceof ar))return this}if(!(s=v(this.args,i,r,o,a)))return this;if("replace"==t&&"function"==typeof s[1])return this;try{return u[t].apply(u,s)}catch(e){Wn.warn("Error evaluating {code} [{file}:{line},{col}]",{code:this,file:this.start.file,line:this.start.line,col:this.start.col})}finally{u instanceof RegExp&&(u.lastIndex=0)}}return this;function p(e,n){var t=(e=e instanceof ui?e.name:e).definition();if(t.orig[t.orig.length-1]!==e)return!1;var i=n;return t.references.forEach(function(e){e._eval=function(){return i},c.push(e)}),!0}}),e(pi,jn),e(nr,function(e,n,t,i){if(!e.option("templates"))return this;if(this.tag){if(!En(e,this.tag))return this;f=function(e){return e}}var r=v(this.expressions,e,n,t,i);if(!r)return this;for(var o=!1,a=f(this.strings[0]),s=0;s<r.length;s++)a+=r[s]+f(this.strings[s+1]);return o?(this._eval=jn,this):a;function f(e){return e.replace(/\\(u\{[^}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,n){n=gr(n);return"string"!=typeof n&&(o=!0),n})}})}(function(e,n){e.DEFMETHOD("_eval",n)}),(se=function(e,t){e.DEFMETHOD("negate",function(e,n){return t.call(this,e,n)})})(Wn,function(){return Ee(this)}),se(Gn,function(){throw new Error("Cannot negate a statement")}),se(xi,function(e,n){var t=this.clone(),i=this.operator;if(e.option("unsafe_comps"))switch(i){case"<=":return t.operator=">",t;case"<":return t.operator=">=",t;case">=":return t.operator="<",t;case">":return t.operator="<=",t}switch(i){case"==":return t.operator="!=",t;case"!=":return t.operator="==",t;case"===":return t.operator="!==",t;case"!==":return t.operator="===",t;case"&&":return t.operator="||",t.left=t.left.negate(e,n),t.right=t.right.negate(e),Se(this,t,n);case"||":return t.operator="&&",t.left=t.left.negate(e,n),t.right=t.right.negate(e),Se(this,t,n)}return Ee(this)}),se(jt,function(){return Ee(this)}),se(ki,function(e,n){var t=this.clone();return t.consequent=t.consequent.negate(e),t.alternative=t.alternative.negate(e),Se(this,t,n)}),se(gt,function(){return Ee(this)}),se(di,function(e){var n=this.expressions.slice();return n.push(n.pop().negate(e)),J(this,n)}),se(yi,function(){return"!"==this.operator?this.expression:Ee(this)});var Te=Rn("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),Ae=Rn("Map Set WeakMap WeakSet");function De(e){for(;(e=e.tail_node())instanceof Ji;)if(!(e=e.fixed_value()))return!0;return!(e instanceof Ai||"Binary"==e.TYPE&&!we[e.operator]||e instanceof tr||e instanceof mt||e instanceof qi&&Bn(e.properties,function(e){return!(e instanceof Pi||e instanceof gi)})||e instanceof Ki||e instanceof bi)}function Oe(e,n,t){return!Bn(e,t?function(e){return e instanceof gi?!t(e,n):!e.has_side_effects(n)}:function(e){return!e.has_side_effects(n)})}function $e(e,n){return!e.expression.is_string(n)||e.expression.has_side_effects(n)}function ze(e,n){for(var t=e.length;0<=--t;)if(e[t].may_throw(n))return!0;return!1}function qe(e,n){return!!e.may_throw(n)||(!((e=e instanceof Ji?e.fixed_value():e)instanceof mt)||(!!ze(e.argnames,n)||(!!ze(e.body,n)||bt(e)&&e.value&&e.value.may_throw(n))))}function Ce(e,n){for(var t=e.length;0<=--t;)if(!e[t].is_constant_expression(n))return!1;return!0}function Me(e){return e&&e.aborts()}function Fe(){var e=this.body.length;return 0<e&&Me(this.body[e-1])}li.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var n=this.expression;if(ge(n)){if(Te[n.name])return!0;if(this instanceof pi&&Ae[n.name])return!0}if(ke(n))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),nr.DEFMETHOD("is_expr_pure",function(e){var n=this.tag;if(!n)return!0;if(e.option("unsafe")){if(ge(n)&&Te[n.name])return!0;if(n instanceof mi&&ge(n.expression)){var t=xe[n.expression.name];return t&&(t[n.property]||"Math"==n.expression.name&&"random"==n.property)}}return!e.pure_funcs(this)}),Wn.DEFMETHOD("is_call_pure",Mn),li.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var n=this.expression;if(!(n instanceof mi))return!1;var t,i=n.expression,r=n.property;if(i instanceof Ai)t=fe.Array;else if(i.is_boolean(e))t=fe.Boolean;else if(i.is_number(e))t=fe.Number;else if(i instanceof ar)t=fe.RegExp;else if(i.is_string(e)){if(t=fe.String,"replace"==r){i=this.args[1];if(i&&!i.is_string(e))return!1}}else n.may_throw_on_access(e)||(t=fe.Object);return t&&t[r]}),(se=function(e,n){e.DEFMETHOD("has_side_effects",n)})(Wn,Fn),se(Ai,function(e){return Oe(this.elements,e,$e)}),se(Ei,function(e){var n=this.left;if(!(n instanceof vi))return!0;var t=n.expression;return!(t instanceof Ki)||!t.scope.resolve().new||n instanceof _i&&n.property.has_side_effects(e)||this.right.has_side_effects(e)}),se(xi,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||"in"==this.operator&&!bn(this.right)}),se(tt,function(e){return Oe(this.body,e)}),se(li,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||Oe(this.args,e,$e)}),se(Kt,function(e){return this.expression.has_side_effects(e)||Oe(this.body,e)}),se(Mt,function(e){var n=this.extends;return!(!n||c(n=n instanceof Ji?n.fixed_value():n))||Oe(this.properties,e)}),se(Pt,function(e){return this.key instanceof Wn&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),se(ki,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),se(tr,Mn),se(ni,function(e){return Oe(this.definitions,e)}),se(Oi,function(e){return Oe(this.elements,e)}),se($i,function(e){return this.key instanceof Wn&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),se(zi,function(e){return Oe(this.properties,e)}),se(mi,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),se(Kn,Mn),se(Wt,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),se(rt,function(e){return this.body.has_side_effects(e)}),se(mt,Mn),se(qi,function(e){return Oe(this.properties,e,function(e,n){e=e.expression;return De(e)||e.has_side_effects(n)})}),se(Ki,Mn),se(Ci,function(e){return this.key instanceof Wn&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),se(di,function(e){return Oe(this.expressions,e)}),se(Zn,function(e){return this.body.has_side_effects(e)}),se(_i,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),se(Gt,function(e){return this.expression.has_side_effects(e)||Oe(this.body,e)}),se(Ii,Mn),se(Ji,function(e){return!this.is_declared(e)||!pe(this,e)}),se(nr,function(e){return!this.is_expr_pure(e)||Oe(this.expressions,e)}),se(Qt,function(e){return Oe(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),se(bi,function(e){return kr[this.operator]||this.expression.has_side_effects(e)}),se(oi,function(){return this.value}),(se=function(e,n){e.DEFMETHOD("may_throw",n)})(Wn,Fn),se(tr,Mn),se(Di,Fn),se(Kn,Mn),se(mt,Mn),se(Ki,Mn),se(Ii,Mn),se(Ai,function(e){return ze(this.elements,e)}),se(Ei,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof Ji)&&this.left.may_throw(e)}),se(xi,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||"in"==this.operator&&!bn(this.right)}),se(tt,function(e){return ze(this.body,e)}),se(li,function(e){if(ze(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=Fn;e=qe(this.expression,e);return delete this.may_throw,e}),se(Kt,function(e){return this.expression.may_throw(e)||ze(this.body,e)}),se(ki,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),se(ui,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),se(ni,function(e){return ze(this.definitions,e)}),se(mi,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),se(Wt,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),se(rt,function(e){return this.body.may_throw(e)}),se(qi,function(e){return ze(this.properties,e)}),se(Ci,function(e){return this.value.may_throw(e)||this.key instanceof Wn&&this.key.may_throw(e)}),se(Rt,function(e){return this.value&&this.value.may_throw(e)}),se(di,function(e){return ze(this.expressions,e)}),se(Zn,function(e){return this.body.may_throw(e)}),se(_i,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),se(Gt,function(e){return this.expression.may_throw(e)||ze(this.body,e)}),se(Ji,function(e){return!this.is_declared(e)||!pe(this,e)}),se(nr,function(e){if(ze(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=Fn;e=qe(this.tag,e);return delete this.may_throw,e}),se(Qt,function(e){return(this.bcatch?this.bcatch.may_throw(e):ze(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),se(bi,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof Ji)}),se(oi,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),(se=function(e,n){e.DEFMETHOD("is_constant_expression",n)})(Wn,Mn),se(Ai,function(e){return Ce(this.elements,e)}),se(xi,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&("in"!=this.operator||bn(this.right))}),se(Mt,function(e){var n=this.extends;return!(n&&!c(n))&&Ce(this.properties,e)}),se(Pt,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),se(tr,Fn),se(mt,function(i){var r=this,o=!0,a=[];return r.walk(new vr(function(e,n){if(!o)return!0;if(e instanceof et)return e===r?void 0:(a.push(e),n(),a.pop(),!0);if(e instanceof Ji){if(r.inlined||e.redef)return!(o=!1);if(r.variables.has(e.name))return!0;var t=e.definition();if(zn(t.scope,a))return!0;if(i&&!t.redefined()){n=i.find_variable(e.name);if(n?n===t:t.undeclared)return o="f",!0}return!(o=!1)}return e instanceof Ki?(bt(r)&&Bn(a,function(e){return!(e instanceof ht)||bt(e)})&&(o=!1),!0):void 0})),o}),se(qi,function(e){return Ce(this.properties,e)}),se(Ci,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),se(bi,function(e){return this.expression.is_constant_expression(e)}),(se=function(e,n){e.DEFMETHOD("aborts",n)})(Gn,Pn),se(Ht,jn),se(it,Fe),se(Jt,Fe),se(Wt,function(){return this.alternative&&Me(this.body)&&Me(this.alternative)&&this});var je=Rn(["use asm","use strict"]);function Pe(e,n,t){switch(e.body.length){case 0:return t?Nn.skip:ve(Kn,e);case 1:var i=e.body[0];return M(i)?n instanceof ot&&i instanceof Ot?e:i:e}return e}function Ne(e,n){n.option("rests")&&(e.uses_arguments||e.rest instanceof Oi&&n.drop_fargs(e,n.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest))}function Ie(e,n){if(!n.option("arrows"))return e;Ne(e,n);var t=H(e.value?[e.first_statement()]:e.body,n);switch(t.length){case 1:var i=t[0];if(i instanceof Rt){e.body.length=0,e.value=i.value;break}default:e.body=t,e.value=null}return e}e(Xn,function(e,n){return!n.option("directives")||je[e.value]&&n.has_directive(e.value)===e?e:ve(Kn,e)}),e(Jn,function(e,n){return n.option("drop_debugger")?ve(Kn,e):e}),e(rt,function(e,n){return n.option("dead_code")&&e.body instanceof Ut&&n.loopcontrol_target(e.body)===e.body?ve(Kn,e):n.option("unused")&&0==e.label.references.length?e.body:e}),e(tt,function(e,n){return e.body=H(e.body,n),e}),e(it,function(e,n){return e.body=H(e.body,n),Pe(e,n.parent())}),e(mt,function(e,n){return Ne(e,n),e.body=H(e.body,n),e}),e(kt,Ie),e(Et,Ie),e(At,function(n,e){Ne(n,e),n.body=H(n.body,e);var t=e.parent();if(e.option("inline"))for(var i=0;i<n.body.length;i++){var r=n.body[i];if(!(r instanceof Xn)){if(r instanceof Rt){if(i!=n.body.length-1)break;var o=r.value;if(!o||"Call"!=o.TYPE)break;if(o.is_expr_pure(e))break;var a=o.expression;if(a instanceof Ji){if(n.name&&n.name.definition()===a.definition())break;a=a.fixed_value()}if(!(a instanceof qt||a instanceof At))break;if(a.uses_arguments)break;if(a===o.expression){if(a.parent_scope!==n)break;if(!Bn(a.enclosed,function(e){return e.scope!==n}))break}if(a.name&&(t instanceof It||t instanceof Fi)&&t.value===e.self())break;if(a.contains_this())break;var s=a.argnames.length;if(0<s&&e.option("inline")<2)break;if(s>n.argnames.length)break;if(!Bn(n.argnames,function(e){return e instanceof Li}))break;if(!Bn(o.args,function(e){return!(e instanceof gi)}))break;for(var f=0;f<s;f++){var c=o.args[f];if(!(c instanceof Ji))break;if(c.definition()!==n.argnames[f].definition())break}if(f<s)break;for(;f<o.args.length&&!o.args[f].has_side_effects(e);f++);if(f<o.args.length)break;if(s<n.argnames.length&&!e.drop_fargs(n,t)){if(!e.drop_fargs(a,o))break;for(;a.argnames.push(a.make_var(Li,a,"argument_"+s)),++s<n.argnames.length;);}return o.expression}break}}return n});var He=Rn("arguments await yield");function Ye(e,n){for(var t=n.length;0<=--t;)n[t]||(n[t]=ve(ur,e))}function Re(e,n){var t=ve(jt,e,e);return t.name=n?null:ve(Wi,e.name,e.name),t}function Be(e,n){var t;switch(e.CTOR){case $t:t=St;break;case zt:t=Tt;break;case qt:t=At;break;case Ct:t=Dt}var i=ve(t,e,e);return i.name=n?null:ve(Vi,e.name,e.name),i}function Le(n,t){n.walk(new vr(function(e){return e instanceof Rt?(t(e),!0):e instanceof ht&&e!==n||void 0}))}function Ue(e){var n=Object.create(null);return Le(e,function(e){e=e.value;(e=e&&e.tail_node())instanceof Ji&&(e=e.definition().id,n[e]=(n[e]||0)+1)}),n}function Ve(e,n,t){return e.bool_fn+(n[e.id]||0)===e.references.length-e.replaced&&!t.exposed(e)}function We(e,i){Le(e,function(e){e.in_bool=!0;var n,t=e.value;t&&((n=tn(i,t))?n instanceof Wn||(t=t.drop_side_effect_free(i),e.value=t?J(e.value,[t,ve(rr,e.value,{value:1})]):ve(rr,e.value,{value:1})):(t=t.drop_side_effect_free(i),e.value=t?J(e.value,[t,ve(rr,e.value,{value:0})]):null))})}function Ge(e,n){if(!e.name||!n.option("ie"))return 1;e=e.name.definition();return!n.exposed(e)&&Bn(e.references,function(e){return!(e instanceof Ji)})}function Je(e,n,t,i){for(var r=e.length,o=[],a=!1,s=0;s<r;s++){var f=e[s],c=i&&f instanceof gi?i(f,n,t):f.drop_side_effect_free(n,t);c!==f&&(a=!0),c&&(o.push(c),t=!1)}return o.length?a?o:e:null}function Xe(e,n,t){var i=e.expression;return i.is_string(n)?i.drop_side_effect_free(n,t):e}function Ke(e){return e instanceof gi?ve(Ai,e,{elements:[e]}):e}function Qe(o,n){var e,t=bt(n),i=yt(n),r=!1;if(t&&o.option("arrows")?n.value?i&&!yn(o,n.value)||(n.value=n.value.drop_side_effect_free(o)):r=!0:(n instanceof St||n instanceof At)&&(r=!n.name||(e=n.name.definition()).references.length==e.replaced),r&&(n.process_expression(!1,function(e){var n=e.value;if(n){if(i&&!yn(o,n))return e;n=n.drop_side_effect_free(o,!0)}return n?ve(Zn,e,{body:n}):ve(Kn,e)}),Le(n,function(e){var n=e.value;n&&(i&&!yn(o,n)||(e.value=n.drop_side_effect_free(o)))})),i&&o.option("awaits")){r&&n.process_expression("awaits",function(e){var n=e.body;if(n instanceof Si){if(yn(o,n.expression)){if(!(n=n.expression.drop_side_effect_free(o,!0)))return ve(Kn,e);e.body=n}}else if(n instanceof di){for(var t=n.expressions,i=t.length;0<=--i;){var r=t[i];if(!(r instanceof Si))break;if(!yn(o,r.expression))break;if(t[i]=r.expression.drop_side_effect_free(o))break}switch(i){case-1:return ve(Kn,e);case 0:e.body=t[0];break;default:t.length=i+1}}return e});var a,s=!r&&n.name||t&&n.value&&!yn(o,n.value),f=new vr(function(e){return!!s||(f.parent()===n&&e.may_throw(o)||e instanceof Si||e instanceof pt?s=!0:e instanceof Rt?e.value&&!yn(o,e.value)?s=!0:void 0:e instanceof ht&&e!==n||void 0)});if(n.walk(f),!s){switch(n.CTOR){case Et:a=kt;break;case St:a=At;break;case Tt:a=Dt}return ve(a,n,n)}}return r&&n.clone()}function Ze(e,n,t){for(var i=[],r=[],o=e.properties,a=0;a<o.length;a++){var s=o[a];if(s.key instanceof Wn&&i.push(s.key),s.static&&s.value&&s instanceof Nt&&s.value.has_side_effects(n)){if(s.value.contains_this())return e;r.push(s.value)}}var f=e.extends;if(f&&((f=!c(f=f instanceof Ji?f.fixed_value():f))||i.unshift(e.extends)),i=Je(i,n,t),r=Je(r,n,t=i?!1:t),!i){if(!f&&!r)return null;i=[]}return f&&((f=Re(e,!0)).properties=[],i.length&&f.properties.push(ve(It,e,{key:J(e,i),value:ve(At,e,{argnames:[],body:[]}).init_vars(f)})),i=[f]),r&&i.push(ve(li,e,{expression:ve(kt,e,{argnames:[],body:[],value:J(e,r)}).init_vars(e.parent_scope),args:[]})),J(e,i)}function en(n,e,t){t=t||Lt;var i=!1,r=new vr(function(e){return!!(i||e instanceof ht)||(e instanceof t&&r.loopcontrol_target(e)===n?i=!0:void 0)});return e instanceof rt&&r.push(e),r.push(n),n.body.walk(r),i}function nn(e,n,t){if(e instanceof xi)if(e.left instanceof ir){if(e.right instanceof yi&&"typeof"==e.right.operator){var i=e.right.expression;if(ge(i)){var r,o,a,s="undefined"==e.left.value;switch(e.operator){case"==":r=s?t:n;break;case"!=":r=s?n:t;break;default:return}r&&(o=i.definition(),a=new vr(function(e){if(e instanceof ht){var n=a.parent();return n instanceof li&&n.expression===e?void 0:!0}e instanceof Ji&&e.definition()===o&&(e.defined=!0)}),r.walk(a))}}}else switch(e.operator){case"&&":nn(e.left,n),nn(e.right,n);break;case"||":nn(f(e.left),t),nn(f(e.right),t)}function f(e){if(e instanceof xi)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function tn(e,n,t){return!!n.truthy||!(n.falsy&&!t)&&(!!n.is_truthy()||n.evaluate(e,!0))}function rn(e,n){var t,i=0,r=!1,o=e.self();if(!Qn(o))for(;;){if(t=o,(o=e.parent(i++))instanceof xi){var a=o.operator;if(!we[a])return;var s=o.left;if(s===t)continue;if(f(s))switch(a){case"&&":n[r?"falsy":"truthy"]=!0;break;case"||":case"??":n[r?"truthy":"falsy"]=!0}}else if(o instanceof ki){a=o.condition;if(a===t)continue;if(f(a))switch(t){case o.consequent:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}}else{if(o instanceof Yt)break;if(o instanceof Wt)break;if(o instanceof di){if(o.expressions[0]===t)continue}else if(o instanceof Zn)break}return}for(;;){if(t=o,(o=e.parent(i++))instanceof it){if(o.body[0]===t)continue}else if(o instanceof Wt&&f(o.condition))switch(t){case o.body:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}return}function f(e){return n.equivalent_to(e)||e instanceof yi&&("!"==e.operator&&(n.equivalent_to(e.expression)&&(r=!0)))}}function on(r){return function(n,t){var i=!1;return this.definitions.forEach(function(e){e.value&&(i=!0),e.name.match_symbol(function(e){e instanceof Ii&&t.push(ve(oi,e,{name:e,value:r(n,e)}))},!0)}),i}}function an(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof Vi?3:2)}function sn(e,n){if(e.exposed(n))return!0;for(var t=n.scope.resolve(),i=n.scope;i!==t;)if((i=i.parent_scope).var_names()[n.name])return!0}function fn(e){return ve(ri,e,{definitions:e.definitions.map(function(e){return ve(oi,e,{name:e.name.convert_symbol(Bi,function(e,n){var t=e.definition();t.orig[t.orig.indexOf(n)]=e;e=t.scope.resolve();t.scope!==e&&((t.scope=e).variables.set(t.name,t),e.enclosed.push(t),e.var_names()[t.name]=!0)}),value:e.value})})})}function cn(e,n){if(!n.fixed_value())return!1;n=n.definition();return an(n)&&kn(n)&&!sn(e,n)}function un(e,n){return n.option("varify")&&Bn(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof Ii)return!cn(n,e)},!0)})?fn(e):e}function ln(e,n){if(n.option("optional_chains")&&e.terminal)do{var t=e.expression;if(e.optional){var i=tn(n,t,!0);if(null==i)return ve(yi,e,{operator:"void",expression:t}).optimize(n);i instanceof Wn||(e.optional=!1)}}while(("Call"==(e=t).TYPE||e instanceof vi)&&!e.terminal)}function pn(e){var n=e.expression;if(!(n instanceof di))return e;var t=n.expressions.slice(),n=e.clone();return n.expression=t.pop(),t.push(n),J(e,t)}function dn(e,t,n){var i=e.expression,r=i instanceof Ji?i.fixed_value():i;if(r instanceof mt&&(!r.uses_arguments&&!r.pinned()&&!(n&&n.indexOf(r)<0)&&Bn(s=e.args,function(e){return!(e instanceof gi)}))){var o=r.argnames,i=r===i&&!r.name;if(r.rest){if(!i||!t.option("rests"))return;for(var a=o.length,s=s.slice(0,a);s.length<a;)s.push(ve(cr,e).optimize(t));s.push(ve(Ai,e,{elements:e.args.slice(a)})),o=o.concat(r.rest),r.rest=null}else s=s.slice(),o=o.slice();for(var f=0,c=0,u=i&&t.option("default_values"),l=i&&t.drop_fargs(r,e)?function(e,n){return!e||(e instanceof Oi?0==e.elements.length&&!e.rest&&n instanceof Ai:e instanceof zi?0==e.properties.length&&!e.rest&&n&&!n.may_throw_on_access(t):e.__unused)}:Mn,p=[],d=0;d<s.length;d++){var h=o[d];if(u&&h instanceof ui&&s[d].is_defined(t)&&(o[d]=h=h.name),!h||"__unused"in h){var v=s[d].drop_side_effect_free(t);if(l(h)){h&&o.splice(d,1),s.splice(d,1),v&&p.push(v),d--;continue}if(v)p.push(v),s[f++]=J(e,p),p=[];else if(h){if(!p.length){s[f++]=ve(rr,s[d],{value:0});continue}s[f++]=J(e,p),p=[]}}else{if(l(h,s[d])){v=s[d].drop_side_effect_free(t);o.splice(d,1),s.splice(d,1),v&&p.push(v),d--;continue}p.push(s[d]),s[f++]=J(e,p),p=[]}c=f}for(;d<o.length;d++)l(o[d])&&o.splice(d--,1);r.argnames=o,s.length=c,e.args=s,p.length&&(r=J(e,p),s.push(s.length<o.length?ve(yi,e,{operator:"void",expression:r}):r))}}function hn(t,i,e,n){if(n instanceof xi&&("&&"==n.operator||"||"==n.operator)&&n.right instanceof Ei&&"="==n.right.operator&&n.right.left instanceof Ji&&n.right.left.definition()===i&&!e.has_side_effects(t)&&r(n.left)&&r(n.right.right))return i.replaced++,"&&"==n.operator?ve(ki,n,{condition:n.left,consequent:n.right.right,alternative:e}):ve(ki,n,{condition:n.left,consequent:e,alternative:n.right.right});function r(e){if(!e.has_side_effects(t)){var n=!1;return e.walk(new vr(function(e){return!!n||(e instanceof Ji&&e.definition()===i?n=!0:void 0)})),!n}}}ht.DEFMETHOD("merge_variables",function(l){if(l.option("merge_vars")){var p,d,h={},v=this,a=[],s=[],f=0,m=new Ln,_=Object.create(null),c=Object.create(null),g=new vr(function(i,e){if(i instanceof Ei){var n=i.left,t=i.right;if(n instanceof Di){t.walk(g);var r=new vr(function(e){if(!(e instanceof Di))return e instanceof ui?(x(),e.value.walk(g),k(),e.name.walk(r)):e instanceof $i?e.key instanceof Wn?(x(),(h.block=e).key.walk(g),e.value.walk(r),k()):e.value.walk(r):e instanceof Ji?E(e):e.walk(g),!0});return n.walk(r),!0}return we[i.operator.slice(0,-1)]?(n.walk(g),x(),t.walk(g),n instanceof Ji&&E(n),k(),!0):n instanceof Ji?("="!=i.operator&&E(n,!0),t.walk(g),E(n),!0):void 0}if(i instanceof xi)return we[i.operator]?(i.left.walk(g),x(),i.right.walk(g),k(),!0):void 0;var o,a;if(i instanceof Ut)return(o=g.loopcontrol_target(i))instanceof ot||S(o),!0;if(i instanceof li){n=(f=i.expression).tail_node();return n instanceof gt?(f!==n&&f.expressions.slice(0,-1).forEach(function(e){e.walk(g)}),i.args.forEach(function(e){e.walk(g)}),n.walk(g),!0):(e(),u(f))}if(i instanceof ki)return i.condition.walk(g),x(),i.consequent.walk(g),k(),x(),i.alternative.walk(g),k(),!0;if(i instanceof Vt)return(o=g.loopcontrol_target(i))instanceof st&&S(o),!0;if(i instanceof st){x(),h.block=i,h.loop=!0;var s=h;return i.body.walk(g),h.inserted===i&&(h=s),i.condition.walk(g),k(),!0}if(i instanceof ct)return i.init&&i.init.walk(g),x(),h.block=i,h.loop=!0,i.condition&&i.condition.walk(g),i.body.walk(g),i.step&&i.step.walk(g),k(),!0;if(i instanceof ut)return i.object.walk(g),x(),h.block=i,h.loop=!0,i.init.walk(g),i.body.walk(g),k(),!0;if(i instanceof Wt)return i.condition.walk(g),x(),i.body.walk(g),k(),i.alternative&&(x(),i.alternative.walk(g),k()),!0;if(i instanceof rt){x(),h.block=i;s=h;return i.body.walk(g),h.inserted===i&&(h=s),k(),!0}if(i instanceof ht)return x(),(h.block=i)===v&&(d=h),i instanceof mt&&(i.name&&(_[i.name.definition().id]=!1),r=i.uses_arguments&&!g.has_directive("use strict")?function(e){e instanceof Li&&(_[e.definition().id]=!1)}:function(e){e instanceof Li&&E(e)},a=new vr(function(e){if(e instanceof Ii&&(_[e.definition().id]=!1),e instanceof Ji){var n=e.definition(),t=i.variables.get(e.name);return t&&(t===n||n.undeclared||i.parent_scope.find_variable(e.name)===n)?(_[n.id]=!1,_[t.id]=!1):(t=h,k(),E(e,!0),h=t),!0}}),i.argnames.forEach(function(e){e.mark_symbol(r,a)}),i.rest&&i.rest.mark_symbol(r,a)),xt(i,g),k(),!0;if(i instanceof _i){var f=i.expression;return i.optional?(f.walk(g),x(),i.property.walk(g),k()):e(),u(f)}if(i instanceof Gt){i.expression.walk(g);s=h;return i.body.forEach(function(e){e instanceof Xt||(e.expression.walk(g),s===h&&x())}),h=s,i.body.forEach(function(e){x(),h.block=i;var n=h;nt(e,g),h.inserted===i&&(h=n),k()}),!0}if(i instanceof Hi||i instanceof Ri)return!(_[i.definition().id]=!1);if(i instanceof Ji)return E(i,!0),!0;if(i instanceof Qt){f=p,s=h;return nt(p=i,g),h=s,i.bcatch&&(i.bcatch.argname&&i.bcatch.argname.mark_symbol(function(e){e instanceof Gi&&(e=e.definition(),_[e.id]=!1,(e=e.redefined())&&(_[e.id]=!1))},g),i.bfinally||(p=f)?nt(i.bcatch,g):(x(),nt(i.bcatch,g),k())),p=f,h=s,i.bfinally&&i.bfinally.walk(g),!0}if(i instanceof bi){if(!yr[i.operator])return;var c=i.expression;return c instanceof Ji?(E(c,!0),!0):void 0}if(i instanceof oi){c=i.value;return c?c.walk(g):c=h.block instanceof ut&&h.block.init===g.parent(),i.name.mark_symbol(c?function(e){if(e instanceof Ii)return e instanceof Bi?E(e):_[e.definition().id]=!1,!0}:function(e){if(e instanceof Ii){var n=e.definition().id;return e instanceof Bi?n in _?_[n]&&_[n].push(e):m.add(n,e):_[n]=!1,!0}},g),!0}return i instanceof ft?(x(),h.block=i,h.loop=!0,e(),k(),!0):void 0;function u(e){return!l.option("ie")||(e=hi(e))instanceof Ji&&e.walk(g),!0}});g.directives=Object.create(l.directives),v.walk(g);for(var e=Object.create(null);a.length&&s.length;){var n=a.pop(),t=n.definition;if(t.id in c&&_[t.id]){for(var i={start:_[t.id].start};t.id in e;)t=e[t.id];i.end=_[t.id].end;var r=[];do{var o=s.pop();if(o&&!(o.index>n.index)){var u=o.definition.id,b=_[u];if(b){if(i.start.block===b.start.block&&A(i,b)&&(!i.start.loop&&kn(t)||A(b,i))&&(!l.option("webkit")||le(t)===le(o.definition))&&Bn(b,function(e){return e.scope.find_variable(t.name)===t})){var y=[],w=[];b.forEach(function(e){e.thedef=t,e.name=t.name,(e instanceof Ji?w:y).push(e)}),t.orig=y.concat(t.orig),t.references=w.concat(t.references),t.fixed=o.definition.fixed&&t.fixed,e[u]=t;break}r.unshift(o)}}}while(s.length);r.length&&(s=s.concat(r))}}}function x(){h=Object.create(h)}function k(){h=Object.getPrototypeOf(h)}function E(e,n){var t,i,r=e.definition(),o=h;if(p&&(x(),o=h,k()),r.id in _){if(!(i=_[r.id]))return;if(i.start.block!==o.block)return _[r.id]=!1;if(i.push(e),i.end=o,r.id in c)s[c[r.id]]=null;else if(!n)return}else{if((t=v.variables.get(r.name))!==r)return t&&d===o&&(_[t.id]=!1),_[r.id]=!1;if(l.exposed(r)||He[e.name])return _[r.id]=!1;if((i=m.get(r.id)||[]).push(e),_[r.id]=i,!n)return i.start=o,a.push({index:f++,definition:r});if(o.block!==v)return _[r.id]=!1;i.start=d}c[r.id]=s.length,s.push({index:f++,definition:r})}function S(e){for(var n=[];;){if(Un(h,"block")){var t=h.block;if((t=t instanceof rt?t.body:t)===e)break}n.push(h),k()}for(h.inserted=h.block,x();n.length;){var i=n.pop();x(),Un(i,"block")&&(h.block=i.block),Un(i,"loop")&&(h.loop=i.loop)}}function T(e,n){return e===n||e.isPrototypeOf(n)}function A(e,n){return T(e.start,e.end)||T(e.start,n.start)}}),ht.DEFMETHOD("drop_unused",function(S){if(S.option("unused")){var T=this,A=!(T instanceof vt)||S.toplevel.funcs,D=!(T instanceof vt)||S.toplevel.vars,O=/keep_assign/.test(S.option("unused"))?Mn:function(e,n){var t,i=!1;if(e instanceof Ei?!e.write_only&&"="!=e.operator||(t=r(e.left,n)):e instanceof bi&&e.write_only&&(t=r(e.expression,n)),t instanceof Ji){n=t.definition();if(!o[n.id]&&!S.exposed(n)&&pe(t,S,i))return t}function r(e,n){if(e instanceof vi){var t=e.expression;if(!t.may_throw_on_access(S,!0))return i=!0,n&&e instanceof _i&&n.unshift(e.property),r(t,n)}else if(e instanceof Ei&&"="==e.operator){e.write_only="p";t=r(e.right);return n?(n.assign=e,t instanceof Ji?t:e.left):t}return e}},$=Object.create(null),o=Object.create(null),c=function(e){return(c=function e(n,t,i){var r=S.parent(t);if(!r)return i;n=r instanceof mt&&zn(n,r.argnames);return e(r,t+1,n?function(e){var n=i(e);if(n)return n;if(n=r.variables.get(e)){e=n.orig[0];if(e instanceof Li||e instanceof Vi)return n}}:r.variables?function(e){return i(e)||r.variables.get(e)}:i)}(T,0,Cn))(e)},z=Object.create(null),u=[],q=Object.create(null),l=Object.create(null),p=Object.create(null),C=Object.create(null);T instanceof vt&&S.top_retain&&T.variables.each(function(e){!S.top_retain(e)||e.id in q||(q[e.id]=!0,u.push(e))});var d=new Ln,h=new Ln,M=this;(v=new vr(function(s,e){if(s instanceof mt&&s.uses_arguments&&!v.has_directive("use strict")&&s.each_argname(function(e){e=e.definition();e.id in q||(q[e.id]=!0,u.push(e))}),s!==T){if(M===T){if(s instanceof Ft){var t=s.name.definition();A&&!t.exported||t.id in q||(q[t.id]=!0,u.push(t)),s.extends&&s.extends.walk(v);var i=!1;return v.parent()instanceof si&&(i=!0,o[t.id]=!0),s.properties.forEach(function(e){var n;e.key instanceof Wn&&e.key.walk(v),e.value&&(i||e instanceof Nt&&e.static?(n=M,M=s,e.value.walk(v),M=n):h.add(t.id,e.value))}),!0}if(s instanceof Ot){t=s.name.definition();if(A&&!t.exported||t.id in q||(q[t.id]=!0,u.push(t)),h.add(t.id,s),!(v.parent()instanceof si))return!0;o[t.id]=!0}if(s instanceof ni)return s.definitions.forEach(function(i){var r=i.value,o=r&&(i.name instanceof Di||r.has_side_effects(S)),a=o&&"="==r.tail_node().operator;i.name.mark_symbol(function(e){if(e instanceof Ii){var n,t=e.definition();return C[t.id]=(C[t.id]||0)+1,s instanceof ri&&t.orig[0]instanceof Gi&&((n=t.redefined())&&(C[n.id]=(C[n.id]||0)+1)),t.id in q||D&&!t.exported&&(s instanceof ti?!t.redefined():!t.const_redefs)&&(s instanceof ri||an(t))||(q[t.id]=!0,u.push(t)),r&&(o?a&&g(t,e,p[t.id]):h.add(t.id,r),d.add(t.id,i)),!0}},v),o&&r.walk(v)}),!0;if(s instanceof Li){t=s.definition();return C[t.id]=(C[t.id]||0)+1,d.add(t.id,s),!0}if(s instanceof Yi)return(t=s.definition()).id in q||D&&an(t)||(q[t.id]=!0,u.push(t)),!0}return r(s,e,!0)}})).directives=Object.create(S.directives),T.walk(v);var F=S.option("keep_fnames")?Mn:S.option("ie")?function(e){return!S.exposed(e)&&e.references.length==e.replaced}:function(e){return!(e.id in q)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof Li||Bn(e.references,function(e){return!e.in_arg}))};S.option("ie")&&h.each(function(e,n){n in q||e.forEach(function(e){e.walk(new vr(function(e){return e instanceof At&&e.name&&!F(e.name.definition())?(e.walk(v),!0):e instanceof ht||void 0}))})});for(var v=new vr(r),e=0;e<u.length;e++){var n=h.get(u[e].id);n&&n.forEach(function(e){e.walk(v)})}Object.keys($).forEach(function(e){var n,t=$[e];t?(t=t.reduce(function(n,e){return e.forEach(function(e){In(n,e)}),n},[]),n=(d.get(e)||[]).filter(function(n){return qn(n instanceof bi?function(e){return e===n}:function(e){return e===n||!(e instanceof bi)&&i(e)===i(n)},t)}),t.length==n.length?$[e]=n:delete $[e]):delete $[e]});var j=[],P=[],N=[],I=[],H=new mr(function(i){if(i instanceof ui)return w(H,i);if(i instanceof Di&&i.rest&&(i.rest=i.rest.transform(H)),i instanceof Oi){for(var e=!i.rest,n=i.elements.length;0<=--n;){var t=i.elements[n].transform(H);t?(i.elements[n]=t,e=!1):e?i.elements.pop():i.elements[n]=ve(ur,i.elements[n])}return i}if(i instanceof zi){var r=[];return i.properties.forEach(function(e){var n,t=!1;e.key instanceof Wn&&(e.key=e.key.transform(Y),t=e.key.has_side_effects(S)),(t||i.rest)&&((n=e.value)instanceof ui?n.name:n)instanceof Ii?(e.value=e.value.transform(Y),r.push(e)):(n=!(n=e.value.transform(H))&&i.rest?e.value instanceof Oi?ve(Oi,e.value,{elements:[]}):ve(zi,e.value,{properties:[]}):n)&&(e.value=n,r.push(e))}),i.properties=r,i}return i instanceof Ii?i.definition().id in q?i:null:void 0}),Y=new mr(function(d,n,e){var t,i,r,h=Y.parent();if(D){var o,a,s=[],f=O(d,s);if(f){if(a=d,i=(t=f).definition(),(!(r=q[i.id])||a[a instanceof Ei?"left":"expression"]===t&&(r===t&&i.references.length-i.replaced==1||U(i,a)<0))&&(d instanceof Ei&&(o=V(d),!0===d.write_only&&(o=o.drop_side_effect_free(S))),o=o||ve(rr,d,{value:0})),o)switch(!s.assign||(a=s.assign.drop_side_effect_free(S))&&(a.write_only=!0,s.unshift(a)),h instanceof di&&h.tail_node()!==d&&!o.has_side_effects(S)||s.push(o),s.length){case 0:return Nn.skip;case 1:return me(0,h,d,s[0].transform(Y));default:return J(d,s.map(function(e){return e.transform(Y)}))}}else if(d instanceof wi&&d.expression instanceof Ji&&U(d.expression.definition(),d)<0)return ve(yi,d,{operator:"+",expression:d.expression})}if(d instanceof li&&N.push(d),M===T){if(A&&d!==T&&d instanceof Ft){var c=d.name.definition();if(!(c.id in q))return(R(d.name,"Dropping unused class {name}"),c.eliminated++,n(d,Y),h instanceof si)?Re(d,!0):(k=(k=d.drop_side_effect_free(S,!0))===d?Re(d,!0):k)?ve(Zn,d,{body:k}):e?Nn.skip:ve(Kn,d)}if(d instanceof jt&&d.name&&F(d.name.definition())&&P.push(d),d instanceof mt){if(A&&d!==T&&d instanceof Ot)if(!((c=d.name.definition()).id in q))return R(d.name,"Dropping unused function {name}"),c.eliminated++,h instanceof si?(E(),Be(d,!0)):e?Nn.skip:ve(Kn,d);if(d instanceof gt&&d.name&&F(d.name.definition())&&P.push(d),!(d instanceof _t)){d.rest&&((o=d.rest.transform(H))instanceof Di&&!o.rest&&(!d.uses_arguments||Y.has_directive("use strict"))&&(o instanceof Oi?0==o.elements.length&&(o=null):0==o.properties.length&&(o=null)),d.rest=o);for(var u=d.argnames,l=S.drop_fargs(d,h)&&!d.rest,p=l?-1:d.length(),v=u.length;0<=--v;)(f=u[v])instanceof Li?(c=f.definition()).id in q?(l=!1,U(c,f)<0&&(f.__unused=null)):l?(R(f,"Dropping unused function argument {name}"),u.pop()):f.__unused=!0:f.transform(H)?l=!1:l?(R(f.name,"Dropping unused default argument {name}"),u.pop()):p<v?(R(f.name,"Dropping unused default argument assignment {name}"),f.name.__unused=!0,u[v]=f.name):(R(f.name,"Dropping unused default argument value {name}"),f.value=ve(rr,f,{value:0}));I.push(d)}}if(d instanceof Zt&&d.argname instanceof Di&&d.argname.transform(H),d instanceof ni&&!(h instanceof ut&&h.init===d)){var m=[],_=[],g=[],b=[],y=0,w=d instanceof ri;switch(d.definitions.forEach(function(e){e.value&&(e.value=e.value.transform(Y));var n=e.value;if(e.name instanceof Di){var t=W(e.name,n,function(e){return!D||e.definition().id in q||l(e)||w&&!pe(e)?e:null},!0);t.name?(e=ve(oi,e,{name:t.name,value:n=t.value}),p()):t.value&&b.push(t.value)}else{var i,r,o,a,s,f=e.name.definition(),c=w?pe(e.name):an(f);if(!c||!D||f.id in q)if(n&&U(f,e)<0&&((n=n.drop_side_effect_free(S))&&(Wn.warn("Side effects in last use of variable {name} [{file}:{line},{col}]",B(e.name)),b.push(n)),n=null,j.push(e)),n||d instanceof ii)if(S.option("functions")&&!S.option("ie")&&c&&1==C[f.id]&&0==f.assignments&&n instanceof gt&&!ue(f)&&!bt(n)&&(a=n,0==(s=f.references).length?a===e.name.fixed_value():Bn(s,function(e){return a===e.fixed_value()}))&&(o=n,w&&!S.has_directive("use strict")&&o instanceof At?h instanceof tt||h instanceof ct&&h.init===d||h instanceof Wt:h instanceof ht)&&!1!==(i=function(t,i){if(!t.name)return null;var r,e=t.name.definition();if(1<e.orig.length)return null;if(0<e.assignments)return!1;if(e.name==i)return e;switch(i){case"await":r=yt;break;case"yield":r=wt}return Bn(e.references,function(e){var n=e.scope;if(n.find_variable(i)===f){if(r)do{if(n=n.resolve(),r(n))return}while(n!==t&&(n=n.parent_scope));return 1}})&&e}(n,e.name.name))){switch(Wn.warn("Declaring {name} as function [{file}:{line},{col}]",B(e.name)),n.CTOR){case St:r=$t;break;case Tt:r=zt;break;case At:r=qt;break;case Dt:r=Ct}t=ve(r,e,n);t.name=ve(Ui,e.name,e.name);var u=e.name.scope.resolve().def_function(t.name);i&&i.forEach(function(e){e.name=u.name,e.thedef=u,e.reference()}),m.push(t)}else c&&1<C[f.id]&&!(h instanceof ai)&&f.orig.indexOf(e.name)>f.eliminated&&(C[f.id]--,y++),p();else h instanceof ai?p():c&&1<C[f.id]?(Wn.info("Dropping declaration of variable {name} [{file}:{line},{col}]",B(e.name)),C[f.id]--,f.eliminated++):_.push(e);else l(e.name)?((n=n&&n.drop_side_effect_free(S))&&b.push(n),1<C[f.id]?(Wn.warn("Dropping duplicated declaration of variable {name} [{file}:{line},{col}]",B(e.name)),C[f.id]--,f.eliminated++):(e.value=null,_.push(e))):((n=n&&!n.single_use&&n.drop_side_effect_free(S))?(Wn.warn("Side effects in initialization of unused variable {name} [{file}:{line},{col}]",B(e.name)),b.push(n)):R(e.name,"Dropping unused variable {name}"),f.eliminated++)}function l(e){var n=e.definition();return n.orig[0]instanceof Gi&&n.scope.resolve()===e.scope.resolve()}function p(){0<b.length&&(0==g.length?m.push(ve(Zn,d,{body:J(d,b)})):n?(b.push(n),e.value=J(n,b)):e.value=ve(yi,e,{operator:"void",expression:J(e,b)}),b=[]),g.push(e)}}),_.length){case 0:if(0==g.length)break;if(g.length==y){[].unshift.apply(b,g.map(function(e){Wn.info("Dropping duplicated definition of variable {name} [{file}:{line},{col}]",B(e.name));var n=e.name.definition(),t=ve(Ji,e.name,e.name);n.references.push(t);t=ve(Ei,e,{operator:"=",left:t,right:e.value}),e=U(n,e);return 0<=e&&($[n.id][e]=t),n.eliminated++,t}));break}case 1:if(0==g.length){var x=_[0].name.definition().id;if(x in z){d.definitions=_,z[x].init=d;break}}default:d.definitions=_.concat(g),m.push(d)}return 0<b.length&&m.push(ve(Zn,d,{body:J(d,b)})),L(m,d,e)}if(d instanceof Ei)return(n(d,Y),d.left instanceof Di)?(k=W(d.left,d.right,function(e){return e},!0===d.write_only)).name?ve(Ei,d,{operator:d.operator,left:k.name,right:k.value}):k.value||(h instanceof di&&h.tail_node()!==d?Nn.skip:ve(rr,d,{value:0})):d;if(d instanceof rt&&d.body instanceof ct){if(n(d,Y),d.body instanceof it){var k=d.body;return d.body=k.body.pop(),k.body.push(d),e?Nn.splice(k.body):k}return d}return d instanceof ht?(E(),d):d instanceof Yi?!S.option("imports")||d.definition().id in q?d:e?Nn.skip:null:void 0}function E(){var e=M;n(M=d,Y),M=e}},function(e,n){if(e instanceof it)return Pe(e,Y.parent(),n);if(e instanceof ct)return e.init instanceof it&&(r=e.init,e.init=r.body.pop(),r.body.push(e)),e.init instanceof qt?((r=r||ve(it,e,{body:[e]})).body.splice(-1,0,e.init),e.init=null):e.init instanceof Zn?e.init=e.init.body:Q(e.init)&&(e.init=null),r?n?Nn.splice(r.body):r:e;if(e instanceof lt){if(!D||!S.option("loops"))return;if(!Q(e.body))return;var t=b(e);if(!t)return;var i=t.definition();if(i.id in q)return;R(t,"Dropping unused loop variable {name}"),z[i.id]===e&&delete z[i.id];var r=[],t=e.object.drop_side_effect_free(S);return t&&(Wn.warn("Side effects in object of for-in loop [{file}:{line},{col}]",t.start),r.push(ve(Zn,e,{body:t}))),e.init instanceof ni&&i.orig[0]instanceof Gi&&r.push(e.init),L(r,e,n)}return e instanceof ci?(e.properties&&0==e.properties.length&&(e.properties=null),e):e instanceof di&&!(1<e.expressions.length)?me(0,Y.parent(),e,e.expressions[0]):void 0});Y.push(S.parent()),T.transform(Y),T instanceof mt&&1==T.body.length&&T.body[0]instanceof Xn&&"use strict"==T.body[0].value&&(T.body.length=0),j.forEach(function(e){e.value=null}),P.forEach(function(e){e.name=null}),N.forEach(function(e){dn(e,S,I)})}function R(e,n){Wn[0<e.definition().references.length?"info":"warn"](n+" [{file}:{line},{col}]",B(e))}function B(e){return{name:e.name,file:e.start.file,line:e.start.line,col:e.start.col}}function i(e){return e[e instanceof Ei?"right":"value"]}function L(e,n,t){switch(e.length){case 0:return t?Nn.skip:ve(Kn,n);case 1:return e[0];default:return t?Nn.splice(e):ve(it,n,{body:e})}}function m(e,n){return e.scope.resolve()===T&&(e.fixed&&n.fixed||($[e.id]=!1),!1!==$[e.id])}function _(e,n){$[e.id]||($[e.id]=[]),n.fixed.assigns&&In($[e.id],n.fixed.assigns)}function U(e,n){e=$[e.id];return e&&e.indexOf(n)}function g(e,n,t){e.id in q||(n&&t?(q[e.id]=n,u.push(e)):(l[e.id]=n,p[e.id]=t))}function V(e){var n=e.right;if(!e.write_only)return n;if(!(n instanceof xi&&we[n.operator]))return n;if(!(n.left instanceof Ji))return n;if(!(e.left instanceof Ji))return n;e=e.left.definition();return n.left.definition()!==e||n.right.has_side_effects(S)?n:(m(e,n.left)&&_(e,n.left),n.right)}function b(e){var n=e.init;if(n instanceof ni)return(n=n.definitions[0].name)instanceof Ii&&n;for(;n instanceof vi;)n=n.expression.tail_node();return n instanceof Ji?n:void 0}function r(e,n,t){e instanceof Ei&&e.left instanceof Ji&&(i=e.left.definition()).scope.resolve()===T&&d.add(i.id,e),e instanceof bi&&e.expression instanceof Ji&&(i=e.expression.definition()).scope.resolve()===T&&d.add(i.id,e);var i,r=[],o=O(e,r);if(o&&((f=o.definition()).scope.resolve()===T||T.variables.get(o.name)===f)&&(!ue(f)||Bn(T.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof Li){e=e.definition();return e.references.length>e.replaced}},!0)}))){if("p"===e.write_only&&e.right.may_throw_on_access(S,!0))return;var a,s=r.assign;return s&&(s.write_only=!0,s.walk(v)),r.forEach(function(e){e.walk(v)}),e instanceof Ei&&(s=V(e),r=!1,t&&!0===e.write_only&&!s.has_side_effects(S)?h.add(f.id,s):(s.walk(v),r="="==s.tail_node().operator),e.left===o?e.write_only&&!r||g(f,o,p[f.id]):(a=o.fixed_value())&&a.is_constant()||g(f,l[f.id],!0)),m(f,o)&&Er(o,e)!==o&&_(f,o),!0}if(e instanceof lt){if(e.init instanceof Ji&&M===T&&((a=e.init.definition().id)in z||(z[a]=e)),!D||!S.option("loops"))return;if(!Q(e.body))return;if(e.init.has_side_effects(S))return;if(!(o=b(e)))return;if((i=o.definition()).scope.resolve()!==T){o=c(o.name);if(o===i||o&&o.redefined()===i)return}return e.object.walk(v),!0}if(e instanceof Ji)return(f=e.definition()).id in q||(q[f.id]=!0,u.push(f)),y(f.scope,e.scope)&&(!(i=f.redefined())||i.id in q||(q[i.id]=!0,u.push(i))),m(f,e)&&_(f,e),!0;if(e instanceof ht){var f=M;return M=e,n(),M=f,!0}}function w(e,n){if(n.value=n.value.transform(Y),!n.name.transform(e)){if(n.name instanceof Di)return null;e=n.value.drop_side_effect_free(S);if(!e)return null;R(n.name,"Side effects in default value of unused variable {name}"),n.name.__unused=null,n.value=e}return n}function W(e,v,m,_){var g=new mr(function(r){if(r instanceof ui){if(!(S.option("default_values")&&v&&v.is_defined(S))){var e=_;_=!1;var n=w(g,r);return _=e,!n&&_&&v&&(v=v.drop_side_effect_free(S)),n}r=r.name}if(r instanceof Oi){var e=_,t=v;v instanceof Ji&&(_=!1,v=v.fixed_value());var i=v instanceof Ai&&v.elements,o=[],a=_&&[],s=0;if(r.elements.forEach(function(e,n){(v=i&&i[n])instanceof ur?v=null:v instanceof gi&&(_&&(a.length=s,Ye(t,a),[].push.apply(a,i.slice(n)),t.elements=a),v=i=!1),(e=e.transform(g))&&(o[s]=e),_&&v&&(a[s]=v),!e&&!v&&_&&i||s++}),v=i&&ve(Ai,t,{elements:i.slice(r.elements.length)}),r.rest&&(n=_,_=!1,r.rest=r.rest.transform(S.option("rests")?g:Y),_=n,r.rest&&(o.length=s)),_&&(v=(v=v&&!r.rest?v.drop_side_effect_free(S):v)instanceof Ai?v.elements:v instanceof di?v.expressions:v&&[v])&&v.length&&(a.length=s,[].push.apply(a,v)),v=t,_=e,i&&a&&(Ye(v,a),v.elements=a),!r.rest&&(v instanceof Ai||v&&v.is_string(S)))switch(o.length){case 0:return _&&(v=v.drop_side_effect_free(S)),null;case 1:if(!_)break;var f=o[0];if(!(f instanceof Ni))break;return v=ve(_i,r,{expression:v,property:ve(rr,r,{value:0})}),f}return Ye(r,o),r.elements=o,r}if(r instanceof zi){var c,u,e=_,t=v;v instanceof Ji&&(_=!1,v=v.fixed_value()),v instanceof qi&&(c=[],u=Object.create(null),v.properties.forEach(function(e,n){if(e instanceof gi)return u=!1;var t=e.key;(t=t instanceof Wn?t.evaluate(S,!0):t)instanceof Wn?u=!1:!u||e instanceof ji||(u[t]=e),c[n]=t})),r.rest&&(v=!1,r.rest=r.rest.transform(S.option("rests")?g:Y));var l=Object.create(null),p=_&&Object.create(null),d=[];if(r.properties.map(function(e){var n=e.key;return n instanceof Wn&&(e.key=n=n.transform(Y),n=n.evaluate(S,!0)),n instanceof Wn?p=!1:l[n]=!(n in l),n}).forEach(function(e,n){var t,i=r.properties[n];e instanceof Wn?(v=_=!1,t=i.value.transform(g)||y(i.value)):(_=p&&l[e],(!(n=u&&u[e])||(v=n.value)instanceof _t)&&(v=!1),(t=i.value.transform(g))?p&&(p[e]=!1):((r.rest||b(i))&&(t=y(i.value)),!p||e in p||(n?(p[e]=n,null===v&&(u[e]=b(n)&&ve(Mi,n,{key:n.key,value:ve(rr,n,{value:0})}))):p[e]=!0)),v&&(n.value=v)),t&&(i.value=t,d.push(i))}),v=t,_=e,p&&c&&(v.properties=Nn(v.properties,function(e,n){if(e instanceof gi)return e;var t=c[n];if(t instanceof Wn)return e;if(t in p){n=p[t];if(!n)return e;if(n===e)return u[t]||Nn.skip}else if(r.rest)return e;t=e.value.drop_side_effect_free(S);return t?(e.value=t,e):b(e)?ve(Mi,e,{key:e.key,value:ve(rr,e,{value:0})}):Nn.skip})),v&&!r.rest)switch(d.length){case 0:if(v.may_throw_on_access(S,!0))break;return _&&(v=v.drop_side_effect_free(S)),null;case 1:if(!_)break;var h=d[0];if(h.key instanceof Wn)break;if(!(h.value instanceof Ni))break;return v=ve(_i,r,{expression:v,property:X(h.key,h)}),h.value}return r.properties=d,r}return!(r=r instanceof ur?null:m(r))&&_&&v&&(v=v.drop_side_effect_free(S)),r});return{name:e.transform(g),value:v};function b(e){return e.key instanceof Wn&&e.key.has_side_effects(S)}function y(e){return e instanceof ui?y(e.name):e instanceof Di?(null===v?v=ve(rr,e,{value:0}):v&&(!0===v.tail_node().write_only||v.may_throw_on_access(S,!0))&&(v=ve(Ai,e,{elements:v instanceof di?v.expressions:[v]})),ve(zi,e,{properties:[]})):(e.__unused=null,e)}}}),ht.DEFMETHOD("hoist_declarations",function(a){var s,f,c,n,u,l,p,d,h,v,m;a.has_directive("use asm")||(s=a.option("hoist_funs"),f=a.option("hoist_vars"),c=this,f&&(n=0,c.walk(new vr(function(e){return 1<n||(e instanceof ai||(e instanceof ht&&e!==c||(e instanceof ri?(n++,!0):void 0)))})),n<=1&&(f=!1)),(s||f)&&(u=Object.create(null),l=[],p=[],d=new Ln,h=0,v=new mr(function(e,n,t){if(e!==c){if(e instanceof Xn)return l.push(e),t?Nn.skip:ve(Kn,e);var i;if(e instanceof Ot)return s?(i=v.parent())instanceof ai||i instanceof si||i!==c&&a.has_directive("use strict")?e:(p.push(e),t?Nn.skip:ve(Kn,e)):e;if(e instanceof ri){if(!f)return e;if((i=v.parent())instanceof ai)return e;if(!Bn(e.definitions,function(e){e=e.name;return e instanceof Bi&&!u[e.name]&&c.find_variable(e.name)===e.definition()}))return e;e.definitions.forEach(function(e){d.set(e.name.name,e),++h});var r=e.to_assignments();if(i instanceof ut&&i.init===e){if(r)return r;var o=e.definitions[0].name;return ve(Ji,o,o)}return i instanceof ct&&i.init===e?r:r?ve(Zn,e,{body:r}):t?Nn.skip:ve(Kn,e)}return e instanceof ht?e:e instanceof Hi?(u[e.name]=!0,e):void 0}}),c.transform(v),0<h&&(m=[],c instanceof mt&&c.each_argname(function(e){d.del(e.name)}),d.each(function(e,n){(e=e.clone()).value=null,m.push(e),d.set(n,e)}),0<m.length&&(function e(n){for(;n.length;){var t=n[0];if(t instanceof Zn){var i,r,o,a=t.body;if(a instanceof Ei&&"="==a.operator&&(i=a.left)instanceof Ni&&d.has(i.name)){if((o=d.get(i.name)).value)break;var s=a.right;s instanceof di&&(s=s.clone()),o.value=s,Yn(m,o),m.push(o),n.shift();continue}if(a instanceof di&&(r=a.expressions[0])instanceof Ei&&"="==r.operator&&(i=r.left)instanceof Ni&&d.has(i.name)){if((o=d.get(i.name)).value)break;o.value=r.right,Yn(m,o),m.push(o),t.body=J(a,a.expressions.slice(1));continue}}if(t instanceof Kn)n.shift();else{if(!(t instanceof it)||e(t.body))break;n.shift()}}return n.length}(c.body),m=ve(ri,c,{definitions:m}),p.push(m))),c.body=l.concat(p,c.body)))}),ht.DEFMETHOD("process_boolean_returns",Cn),qt.DEFMETHOD("process_boolean_returns",function(e){var n;e.option("booleans")&&(n=Ue(this),Ve(this.name.definition(),n,e)&&(e.parent()instanceof si||We(this,e)))}),At.DEFMETHOD("process_boolean_returns",function(e){if(e.option("booleans")){var n=Ue(this);if(!this.name||Ve(this.name.definition(),n,e)){var t=e.parent();if(t instanceof Ei){if("="!=t.operator)return;if(!((i=t.left)instanceof Ji))return;if(!Ve(i.definition(),n,e))return}else if(t instanceof li&&t.expression!==this){var i,r=t.expression;if(!((r=r instanceof Ji?r.fixed_value():r)instanceof mt))return;if(r.uses_arguments||r.pinned())return;if((i=(i=r.argnames[t.args.indexOf(this)])instanceof ui?i.name:i)instanceof Li&&!Ve(i.definition(),n,e))return}else{if("Call"!=t.TYPE)return;e.pop();t=e.in_boolean_context();if(e.push(this),!t)return}We(this,e)}}}),et.DEFMETHOD("var_names",function(){var t=this._var_names;return t||(this._var_names=t=Object.create(null),this.enclosed.forEach(function(e){t[e.name]=!0}),this.variables.each(function(e,n){t[n]=!0})),t}),ht.DEFMETHOD("make_var",function(e,n,t){var i=[this];n instanceof Ii&&n.definition().references.forEach(function(e){var n=e.scope;if(!zn(n,i))for(;In(i,n),(n=n.parent_scope)&&n!==this;);});for(var r=t=t.replace(/(?:^[^a-z_$]|[^a-z0-9_$])/gi,"_"),o=0;!Bn(i,function(e){return!e.var_names()[r]});o++)r=t+"$"+o;var n=ve(e,n,{name:r,scope:this}),a=this.def_variable(n);return i.forEach(function(e){e.enclosed.push(a),e.var_names()[r]=!0}),n}),ht.DEFMETHOD("hoist_properties",function(r){var s,o,f;function c(e,n,t){if(e instanceof Ni){var i=e.definition();return i.assignments==t?!i.direct_access&&(1!=i.escaped.depth&&(i.references.length-i.replaced!=t&&(!i.single_use&&(!o(i)&&(e.fixed_value()===n&&(n instanceof qi&&0<n.properties.length&&Bn(n.properties,$n)&&Bn(i.references,function(e){return e.fixed_value()===n})&&pe(e,r))))))):void 0}}r.option("hoist_props")&&!r.has_directive("use asm")&&(o=(s=this)instanceof vt&&r.top_retain||Mn,f=Object.create(null),s.transform(new mr(function(t,e){if(t instanceof Ei){if("="!=t.operator)return;if(!t.write_only)return;if(!c(t.left,t.right,1))return;e(t,this);var i=new Ln,r=[],o=[];return t.right.properties.forEach(function(e){var n=a(Bi,t.left,e.key);o.push(ve(oi,t,{name:n,value:null}));n=ve(Ji,t,{name:n.name,scope:s,thedef:n.definition()});n.reference(),r.push(ve(Ei,t,{operator:"=",left:n,right:e.value}))}),f[t.left.definition().id]=i,s.body.splice(s.body.indexOf(this.stack[1])+1,0,ve(ri,t,{definitions:o})),J(t,r)}if(t instanceof ht)return t===s?void 0:t;if(t instanceof oi&&c(t.name,t.value,0)){e(t,this);var i=new Ln,n=[];return t.value.properties.forEach(function(e){n.push(ve(oi,t,{name:a(t.name.CTOR,t.name,e.key),value:e.value}))}),f[t.name.definition().id]=i,Nn.splice(n)}function a(e,n,t){n=s.make_var(e,n,n.name+"_"+t);return i.set(t,n.definition()),n}})),s.transform(new mr(function(e,n){if(e instanceof vi){if(!(e.expression instanceof Ji))return;var t=f[e.expression.definition().id];if(!t)return;t=t.get(e.get_property()),t=ve(Ji,e,{name:t.name,scope:e.expression.scope,thedef:t});return t.reference(),t}if(e instanceof Ji&&e.definition().id in f)return ve(qi,e,{properties:[]})})))}),(se=function(e,n){e.DEFMETHOD("drop_side_effect_free",n)})(Wn,jn),se(_t,Pn),se(Ai,function(e,n){n=Je(this.elements,e,n,Xe);return n?n===this.elements&&Bn(n,function(e){return e instanceof gi})?this:J(this,n.map(Ke)):null}),se(Ei,function(e){var n=this.left;if(n instanceof vi){var t=n.expression;if(t.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&t.is_constant())return this}if(n.has_side_effects(e))return this;t=this.right;return!we[this.operator.slice(0,-1)]&&(this.write_only=!0,hi(n).is_constant_expression(e.find_parent(ht)))?t.drop_side_effect_free(e):this}),se(Si,function(e){if(!e.option("awaits"))return this;var n=this.expression;if(!yn(e,n))return this;var t=this.clone();return t.expression=n.drop_side_effect_free(e)||ve(rr,this,{value:0}),t}),se(xi,function(e,n){var t=this.left,i=this.right,r=this.operator;if("in"==r&&!bn(i))return(o=t.drop_side_effect_free(e,n))===t?this:((s=this.clone()).left=o||ve(rr,t,{value:0}),s);var o,a=i.drop_side_effect_free(e,n);if(!a)return t.drop_side_effect_free(e,n);if(we[r]&&a.has_side_effects(e)){var s=this;if(a!==i&&((s=s.clone()).right=a.drop_side_effect_free(e)),"??"==r)return s;r=ve(xi,this,{operator:"&&"==r?"||":"&&",left:t.negate(e,n),right:s.right});return(n?V:ne)(s,r)}return(o=t.drop_side_effect_free(e,n))?(a=a.drop_side_effect_free(e))?J(this,[o,a]):o:a}),se(li,function(e,n){var t=this;if(t.is_expr_pure(e)){t.pure&&Wn.warn("Dropping __PURE__ call [{file}:{line},{col}]",t.start);var i=Je(t.args,e,n,Xe);return i&&J(t,i.map(Ke))}var r=t.expression;if(t.is_call_pure(e))return(a=t.args.slice()).unshift(r.expression),(a=Je(a,e,n,Xe))&&J(t,a.map(Ke));if(e.option("yields")&&wt(r)){i=t.clone();i.expression=ve(At,r,r),i.expression.body=[];var o=i.transform(e);if(o!==i)return o.drop_side_effect_free(e,n)}o=Qe(e,r);if(o&&((t=t.clone()).expression=o,r._squeezed&&(t.expression._squeezed=!0)),t instanceof pi){var a,o=r;if((o=o instanceof Ji?o.fixed_value():o)instanceof mt){if(function(e,n){e.new=!0;var t=Bn(e.body,function(e){return!e.has_side_effects(n)})&&Bn(e.argnames,function(e){return!e.match_symbol(Mn)})&&!(e.rest&&e.rest.match_symbol(Mn));return delete e.new,t}(o,e))return(a=t.args.slice()).unshift(r),(a=Je(a,e,n,Xe))&&J(t,a.map(Ke));o.contains_this()||(t=ve(li,t,t))}}return t.call_only=!0,t}),se(jt,function(e,n){var t=this.name;return t&&t.fixed_value()!==this&&0<t.definition().references.length?this:Ze(this,e,n)}),se(ki,function(e){var n,t,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(n=[],i instanceof At&&(n.push(i),i=null),r instanceof At&&(n.push(r),r=null)),i?r?((t=this.clone()).consequent=i,t.alternative=r):t=ve(xi,this,{operator:"&&",left:this.condition,right:i}):t=r?ve(xi,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),e.option("ie")?(t&&n.push(t),0==n.length?null:J(this,n)):t)}),se(tr,Pn),se(Ft,function(e,n){return Ze(this,e,n)}),se(mi,function(e,n){var t=this.expression;return!this.optional&&t.may_throw_on_access(e)?this:t.drop_side_effect_free(e,n)}),se(At,function(e){return Ge(this,e)?null:this}),se(gt,Pn),se(qi,function(e,n){var t=[];this.properties.forEach(function(e){e instanceof gi?t.push(e):(e.key instanceof Wn&&t.push(e.key),t.push(e.value))});n=Je(t,e,n,function(e,n,t){var i=e.expression;return De(i)?e:i.drop_side_effect_free(n,t)});return n?n!==t||Bn(n,function(e){return!(e instanceof gi)})?J(this,n.map(function(e){return e instanceof gi?ve(qi,e,{properties:[e]}):e})):this:null}),se(Ki,Pn),se(di,function(e,n){var t=Je(this.expressions,e,n);if(!t)return null;var i,r,o,a=t.length-1,s=t[a];return e.option("awaits")&&0<a&&s instanceof Si&&s.expression.is_constant()&&(t=t.slice(0,-1),s.expression=t[--a],t[a]=s),e.option("conditionals")&&0<a&&(i=t[a-1])instanceof Ei&&"="==i.operator&&(o=i.left)instanceof Ji&&(r=hn(e,o.definition(),i.right,s))&&((i=i.clone()).right=r,(t=t.slice(0,-2)).push(i.drop_side_effect_free(e,n))),t===this.expressions?this:J(this,t)}),se(_i,function(e,n){var t=this.expression,i=this.property;if(t.may_throw_on_access(e)){if(!this.optional)return this;if(i.has_side_effects(e)){if(!(i=i.drop_side_effect_free(e)))return t.drop_side_effect_free(e,n);var r=this.clone();return r.property=i,r}}return(t=t.drop_side_effect_free(e,n))?(i=i.drop_side_effect_free(e))?J(this,[t,i]):t:i.drop_side_effect_free(e,n)}),se(Ji,function(e){return this.is_declared(e)&&pe(this,e)?null:this}),se(nr,function(e,n){var t=this;if(t.is_expr_pure(e)){var i=t.expressions;return 0==i.length?null:J(t,i).drop_side_effect_free(e,n)}n=t.tag,e=Qe(e,n);return e&&((t=t.clone()).tag=e,n._squeezed&&(t.tag._squeezed=!0)),t}),se(bi,function(e,n){var t=this.expression;if(kr[this.operator])return this.write_only=!t.has_side_effects(e),this;if("typeof"==this.operator&&t instanceof Ji&&pe(t,e))return null;var i=t.drop_side_effect_free(e,n);return n&&i&&Z(i)?i===t&&"!"==this.operator?this:i.negate(e,n):i}),e(Zn,function(e,n){if(n.option("side_effects")){var t=e.body,n=t.drop_side_effect_free(n,!0);if(!n)return Wn.warn("Dropping side-effect-free statement [{file}:{line},{col}]",e.start),ve(Kn,e);if(n!==t)return ve(Zn,e,{body:n})}return e}),e(ft,function(e,n){return n.option("loops")?ve(ct,e,e).optimize(n):e}),e(st,function(t,e){if(!e.option("loops"))return t;var n=tn(e,t.condition);if(!(n instanceof Wn)){if(n&&!en(t,e.parent(),Vt))return ve(ct,t,{body:ve(it,t.body,{body:[t.body,ve(Zn,t.condition,{body:t.condition})]})}).optimize(e);if(!en(t,e.parent()))return ve(it,t.body,{body:[t.body,ve(Zn,t.condition,{body:t.condition})]}).optimize(e)}if(t.body instanceof it&&!en(t,e.parent(),Vt)){for(var i=t.body.body,r=i.length;0<=--r;){var o=i[r];if(o instanceof Wt&&!o.alternative&&o.body instanceof Ut&&e.loopcontrol_target(o.body)===t){if(a(o.condition))break;t.condition=ve(xi,t,{operator:"&&",left:o.condition.negate(e),right:t.condition}),i.splice(r,1)}else if(o instanceof Zn){if(a(o.body))break;t.condition=J(t,[o.body,t.condition]),i.splice(r,1)}else if(!N(o,!0))break}t.body=Pe(t.body,e.parent())}return t.body instanceof Kn?ve(ct,t,t).optimize(e):t.body instanceof Zn?ve(ct,t,{condition:J(t.condition,[t.body.body,t.condition]),body:ve(Kn,t)}).optimize(e):t;function a(e){var n=!1;return e.walk(new vr(function(e){return!!n||(e instanceof Ji?(zn(e.definition(),t.enclosed)||(n=!0),!0):void 0)})),n}}),e(ct,function(e,n){if(!n.option("loops"))return e;if(n.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(n)),e.step&&(e.step=e.step.drop_side_effect_free(n))),e.condition){var t=tn(n,e.condition);if(t)t instanceof Wn||(e.body=ve(it,e.body,{body:[ve(Zn,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(n.option("dead_code")){t=[];return Qn(e.init)?t.push(e.init):e.init&&t.push(ve(Zn,e.init,{body:e.init})),t.push(ve(Zn,e.condition,{body:e.condition})),Y(n,e.body,t),ve(it,e,{body:t}).optimize(n)}}return function n(t,i){var e=a(t.body);if(i.option("dead_code")&&(e instanceof Ut||e instanceof Vt&&s(e)||e instanceof Yt)){var r=[];Qn(t.init)?r.push(t.init):t.init&&r.push(ve(Zn,t.init,{body:t.init}));var o=s(e)||e instanceof Yt;return t.condition&&o?r.push(ve(Wt,t,{condition:t.condition,body:e,alternative:null})):t.condition?r.push(ve(Zn,t.condition,{body:t.condition})):o&&r.push(e),Y(i,t.body,r),ve(it,t,{body:r})}if(e instanceof Wt){if((o=a(e.body))instanceof Ut&&!s(o))return t.condition?t.condition=ve(xi,t.condition,{left:t.condition,operator:"&&",right:e.condition.negate(i)}):t.condition=e.condition.negate(i),r=F(e.alternative),Y(i,e.body,r),f(r);if((o=a(e.alternative))instanceof Ut&&!s(o))return t.condition?t.condition=ve(xi,t.condition,{left:t.condition,operator:"&&",right:e.condition}):t.condition=e.condition,r=F(e.body),Y(i,e.alternative,r),f(r)}return t;function a(e){return e instanceof it?e.body[0]:e}function s(e){return i.loopcontrol_target(e)!==i.self()}function f(e){return t.body instanceof it?(t.body=t.body.clone(),t.body.body=e.concat(t.body.body.slice(1)),t.body=t.body.transform(i)):t.body=ve(it,t.body,{body:e}).transform(i),n(t,i)}}(e,n)}),e(ut,function(e,n){var t;return n.option("varify")&&C(e.init)&&(((t=e.init.definitions[0].name)instanceof Di||t instanceof Ri)&&!t.match_symbol(function(e){if(e instanceof Ii){e=e.definition();return!kn(e)||sn(n,e)}},!0)&&(e.init=fn(e.init))),e}),e(Wt,function(e,f){if(Q(e.alternative)&&(e.alternative=null),!f.option("conditionals"))return e;if(f.option("booleans")&&!e.condition.has_side_effects(f)&&rn(f,e.condition),f.option("dead_code")){var n=tn(f,e.condition);if(!n){Wn.warn("Condition always false [{file}:{line},{col}]",e.condition.start);var t=[ve(Zn,e.condition,{body:e.condition})];return Y(f,e.body,t),e.alternative&&t.push(e.alternative),ve(it,e,{body:t}).optimize(f)}if(!(n instanceof Wn)){Wn.warn("Condition always true [{file}:{line},{col}]",e.condition.start);t=[ve(Zn,e.condition,{body:e.condition}),e.body];return e.alternative&&Y(f,e.alternative,t),ve(it,e,{body:t}).optimize(f)}}var i=e.condition.negate(f),r=e.condition.print_to_string().length,o=i.print_to_string().length,a=o<r;e.alternative&&a&&(a=!1,e.condition=i,u=e.body,e.body=e.alternative||ve(Kn,e),e.alternative=u);var t=[],s=[],c=[],n=p(e.body,t,s,c),u=p(e.alternative,t,s,c);if(n&&u)return 0<s.length&&t.push(ve(ri,e,{definitions:s})),0==n.length?t.push(ve(Zn,e.condition,{body:0<u.length?ve(xi,e,{operator:"||",left:e.condition,right:J(e.alternative,u)}).transform(f):e.condition.clone()}).optimize(f)):0==u.length?(r===o&&!a&&e.condition instanceof xi&&"||"==e.condition.operator&&(a=!0),t.push(ve(Zn,e,{body:ve(xi,e,{operator:a?"||":"&&",left:a?i:e.condition,right:J(e.body,n)}).transform(f)}).optimize(f))):t.push(ve(Zn,e,{body:ve(ki,e,{condition:e.condition,consequent:J(e.body,n),alternative:J(e.alternative,u)})}).optimize(f)),c.forEach(function(e){e.definition().references.push(e)}),ve(it,e,{body:t}).optimize(f);if((e=Q(e.body)?ve(Wt,e,{condition:i,body:e.alternative,alternative:null}):e).body instanceof Yt&&e.alternative instanceof Yt&&e.body.TYPE==e.alternative.TYPE){var l=ve(e.body.CTOR,e,{value:ve(ki,e,{condition:e.condition,consequent:e.body.value||ve(cr,e.body).transform(f),alternative:e.alternative.value||ve(cr,e.alternative).transform(f)})});return l instanceof Rt&&(l.in_bool=e.body.in_bool||e.alternative.in_bool),l}if(Me((e=e.body instanceof Wt&&!e.body.alternative&&!e.alternative?ve(Wt,e,{condition:ve(xi,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null}):e).body)&&e.alternative){l=e.alternative;return e.alternative=null,ve(it,e,{body:[e,l]}).optimize(f)}if(Me(e.alternative)){t=e.body;return e.body=e.alternative,e.condition=a?i:e.condition.negate(f),e.alternative=null,ve(it,e,{body:[e,t]}).optimize(f)}return f.option("typeofs")&&nn(e.condition,e.body,e.alternative),e;function p(e,n,t,i){if(null==e)return[];if(e instanceof it){for(var r=[],o=0;o<e.body.length;o++){var a=e.body[o];if(a instanceof Ot)n.push(a);else if(!(a instanceof Kn))if(a instanceof Zn){if(!f.option("sequences")&&0<r.length)return;r.push(a.body)}else{if(!(a instanceof ri))return;if(!f.option("sequences")&&0<r.length)return;a.remove_initializers(f,t),a.definitions.forEach(s)}}return r}if(e instanceof Ot)return n.push(e),[];if(e instanceof Kn)return[];if(e instanceof Zn)return[e.body];if(e instanceof ri){r=[];return e.remove_initializers(f,t),e.definitions.forEach(s),r}function s(e){e.value&&r.push(ve(Ei,e,{operator:"=",left:e.name.convert_symbol(Ji,function(e){i.push(e)}),right:e.value}))}}}),e(Gt,function(i,t){if(!t.option("switches"))return i;if(!t.option("dead_code"))return i;for(var e,n,r,o=[],a=[],s=[],f=0,c=i.body.length;f<c;f++){if((e=i.body[f])instanceof Xt){var u=o[o.length-1];if(n||y(e.body[0],t)&&(!u||Me(u))){x(e,u);continue}n=e}else{var l=e.expression,p=ve(xi,i,{operator:"===",left:i.expression,right:l}).evaluate(t,!0);if(!p){l.has_side_effects(t)&&s.push(l),x(e,o[o.length-1]);continue}if(!(p instanceof Wn))for(n&&(p=o.indexOf(n),o.splice(p,1),x(n,o[p-1]),n=null),l.has_side_effects(t)?r=e:n=e=ve(Xt,e,e);++f<c;)x(i.body[f],e)}if(c<=f+1||Me(e)){var d,u=o[o.length-1],h=e.body;if(Me(u))switch(u.body.length-h.length){case 1:if(!y(d=u.body[u.body.length-1],t))break;h=h.concat(d);case 0:var v=ve(it,u,u),m=ve(it,e,{body:h});v.equivalent_to(m)&&(u.body=[])}}s.length&&(e instanceof Xt?o.push(ve(Kt,i,{expression:J(i,s),body:[]})):(s.push(e.expression),e.expression=J(i,s)),s=[]),o.push(e)}for(s.length&&!r&&o.push(ve(Kt,i,{expression:J(i,s),body:[]}));e=o[o.length-1];){if(y(d=e.body[e.body.length-1],t)&&e.body.pop(),e===n){if(!j(e))break}else{if(e.expression.has_side_effects(t))break;if(n){if(!j(n))break;if(o[o.length-2]!==n)break;n.body=n.body.concat(e.body),e.body=[]}else if(!j(e))break}x(e),o.pop()===n&&(n=null)}if(!e)return a.push(ve(Zn,i.expression,{body:i.expression})),s.length&&a.push(ve(Zn,i,{body:J(i,s)})),ve(it,i,{body:a}).optimize(t);if(e===n)for(;(e=o[o.length-2])&&!(e instanceof Xt)&&j(e);){if((l=e.expression).has_side_effects(t)){if((u=o[o.length-3])&&!Me(u))break;n.body.unshift(ve(Zn,i,{body:l}))}x(e),o.splice(-2,1)}if(o[0].body=a.concat(o[0].body),i.body=o,t.option("conditionals"))switch(o.length){case 1:if(!w(o[0]))break;l=o[0].expression,h=o[0].body.slice();return o[0]!==n&&o[0]!==r?ve(Wt,i,{condition:ve(xi,i,{operator:"===",left:i.expression,right:l}),body:ve(it,i,{body:h}),alternative:null}).optimize(t):(l&&h.unshift(ve(Zn,l,{body:l})),h.unshift(ve(Zn,i.expression,{body:i.expression})),ve(it,i,{body:h}).optimize(t));case 2:if(!zn(n,o)||!w(o[1]))break;var _=(h=o[0].body.slice()).length&&y(h[h.length-1],t);if(_&&h.pop(),!Bn(h,w))break;var g=o[1].body.length&&ve(it,o[1],o[1]),b=ve(Wt,i,{condition:ve(xi,i,o[0]===n?{operator:"!==",left:i.expression,right:o[1].expression}:{operator:"===",left:i.expression,right:o[0].expression}),body:ve(it,o[0],{body:h}),alternative:_&&g||null});return(b=!_&&g?ve(it,i,{body:[b,g]}):b).optimize(t)}return i;function y(e,n){return e instanceof Ut&&n.loopcontrol_target(e)===i}function w(e){var n=!1,t=new vr(function(e){if(n||e instanceof mt||e instanceof Zn)return!0;y(e,t)&&(n=!0)});return t.push(i),e.walk(t),!n}function x(e,n){n&&!Me(n)?n.body=n.body.concat(e.body):Y(t,e,a)}}),e(Qt,function(e,n){if(e.body=H(e.body,n),n.option("dead_code")){if(j(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof Gi&&!pe(e)},!0))){var t=[];return e.bcatch&&(Y(n,e.bcatch,t),t.forEach(function(e){e instanceof ri&&e.definitions.forEach(function(e){var n=e.name.definition().redefined();n&&(e.name=e.name.clone(),e.name.thedef=n)})})),t.unshift(ve(it,e,e).optimize(n)),e.bfinally&&t.push(ve(it,e.bfinally,e.bfinally).optimize(n)),ve(it,e,{body:t}).optimize(n)}if(e.bfinally&&j(e.bfinally)){t=ve(it,e.bfinally,e.bfinally).optimize(n);if(t=e.body.concat(t),!e.bcatch)return ve(it,e,{body:t}).optimize(n);e.body=t,e.bfinally=null}}return e}),ti.DEFMETHOD("remove_initializers",on(function(e,n){return ve(cr,n).optimize(e)})),ii.DEFMETHOD("remove_initializers",on(Pn)),ri.DEFMETHOD("remove_initializers",on(Pn)),ni.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,n){var t,i,r=n.name.definition(),o=n.value;return o&&(o instanceof di&&(o=o.clone()),t=ve(Ji,n.name,n.name),i=ve(Ei,n,{operator:"=",left:t,right:o}),e.push(i),t.fixed=function(){return i.right},t.fixed.assigns=[i],r.references.forEach(function(e){e=e.fixed&&e.fixed.assigns;e&&e[0]===n&&(e[0]=i)}),r.references.push(t)),r.eliminated++,r.single_use=!1,e},[]);return 0==e.length?null:J(this,e)}),e(ti,un),e(ii,un),e(li,function(l,f){var a=l.expression,e=ln(l,f);if(e)return e;if(f.option("sequences"))if(a instanceof vi){if((b=pn(a))!==a){e=l.clone();return e.expression=b.expressions.pop(),b.expressions.push(e),b.optimize(f)}}else if(!K(0,a.tail_node()))if((b=pn(l))!==l)return b.optimize(f);if(f.option("unused")&&dn(l,f),f.option("unsafe"))if(ge(a))switch(a.name){case"Array":if(1==l.args.length){if((c=l.args[0])instanceof rr)try{var n=c.value;if(6<n)break;for(var t=Array(n),i=0;i<n;i++)t[i]=ve(ur,l);return ve(Ai,l,{elements:t})}catch(e){Wn.warn("Invalid array length: {length} [{file}:{line},{col}]",{length:n,file:l.start.file,line:l.start.line,col:l.start.col});break}if(!c.is_boolean(f)&&!c.is_string(f))break}return ve(Ai,l,{elements:l.args});case"Object":if(0==l.args.length)return ve(qi,l,{properties:[]});break;case"String":if(0==l.args.length)return ve(ir,l,{value:""});if(1==l.args.length)return ve(xi,l,{operator:"+",left:ve(ir,l,{value:""}),right:l.args[0]}).optimize(f);break;case"Number":if(0==l.args.length)return ve(rr,l,{value:0});if(1==l.args.length)return ve(yi,l,{operator:"+",expression:ve(xi,l,{operator:"+",left:ve(ir,l,{value:""}),right:l.args[0]})}).optimize(f);break;case"Boolean":if(0==l.args.length)return ve(dr,l).optimize(f);if(1==l.args.length)return ve(yi,l,{operator:"!",expression:ve(yi,l,{operator:"!",expression:l.args[0]})}).optimize(f);break;case"RegExp":var r=[];if(Bn(l.args,function(e){var n=e.evaluate(f);return r.unshift(n),e!==n}))try{return te(f,l,ve(ar,l,{value:RegExp.apply(RegExp,r)}))}catch(e){Wn.warn("Error converting {expr} [{file}:{line},{col}]",{expr:l,file:l.start.file,line:l.start.line,col:l.start.col})}}else if(a instanceof mi)switch(a.property){case"toString":var o=a.expression;if(0==l.args.length&&!(o.may_throw_on_access(f)||o instanceof Qi))return ve(xi,l,{operator:"+",left:ve(ir,l,{value:""}),right:o}).optimize(f);break;case"join":if(a.expression instanceof Ai&&l.args.length<2)e:{var s=l.args[0];if(0==a.expression.elements.length&&!(s instanceof gi))return s?J(l,[s,ve(ir,l,{value:""})]).optimize(f):ve(ir,l,{value:""});if(!(s&&(s=s.evaluate(f))instanceof Wn)){for(var c,t=[],u=[],i=0;i<a.expression.elements.length;i++){var p=a.expression.elements[i];if((E=p.evaluate(f))!==p)u.push(E);else{if(p instanceof gi)break e;0<u.length&&(t.push(ve(ir,l,{value:u.join(s)})),u.length=0),t.push(p)}}return(0<u.length&&t.push(ve(ir,l,{value:u.join(s)})),1==t.length)?t[0].is_string(f)?t[0]:ve(xi,t[0],{operator:"+",left:ve(ir,l,{value:""}),right:t[0]}):""==s?(c=t[0].is_string(f)||t[1].is_string(f)?t.shift():ve(ir,l,{value:""}),t.reduce(function(e,n){return ve(xi,n,{operator:"+",left:e,right:n})},c).optimize(f)):((M=l.clone()).expression=M.expression.clone(),M.expression.expression=M.expression.expression.clone(),M.expression.expression.elements=t,te(f,l,M))}}break;case"charAt":if(l.args.length<2)return(M=ve(xi,l,{operator:"||",left:ve(_i,l,{expression:a.expression,property:l.args.length?ve(xi,l.args[0],{operator:"|",left:ve(rr,l,{value:0}),right:l.args[0]}):ve(rr,l,{value:0})}).optimize(f),right:ve(ir,l,{value:""})})).is_string=Fn,M.optimize(f);break;case"apply":if(2==l.args.length&&l.args[1]instanceof Ai)return(z=l.args[1].elements.slice()).unshift(l.args[0]),ve(li,l,{expression:ve(mi,a,{expression:a.expression,property:"call"}),args:z}).optimize(f);break;case"call":o=a.expression;if((o=o instanceof Ji?o.fixed_value():o)instanceof mt&&!o.contains_this())return(l.args.length?J(this,[l.args[0],ve(li,l,{expression:a.expression,args:l.args.slice(1)})]):ve(li,l,{expression:a.expression,args:[]})).optimize(f)}if(f.option("unsafe_Function")&&ge(a)&&"Function"==a.name){if(0==l.args.length)return ve(At,l,{argnames:[],body:[]}).init_vars(a.scope);if(Bn(l.args,function(e){return e instanceof ir}))try{var d=xr(_="n(function("+l.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+l.args[l.args.length-1].value+"})"),h={ie:f.option("ie")};d.figure_out_scope(h);var v,m=new Sr(f.options);(d=d.transform(m)).figure_out_scope(h),d.compute_char_frequency(h),d.mangle_names(h),d.walk(new vr(function(e){return!!v||(e instanceof mt?(v=e,!0):void 0)}));var _=Tr();return it.prototype._codegen.call(v,_),l.args=[ve(ir,l,{value:v.argnames.map(function(e){return e.print_to_string()}).join()}),ve(ir,l.args[l.args.length-1],{value:_.get().replace(/^\{|\}$/g,"")})],l}catch(e){if(!(e instanceof br))throw e;Wn.warn("Error parsing code passed to new Function [{file}:{line},{col}]",l.args[l.args.length-1].start),Wn.warn(e.toString())}}var g=a instanceof Ji?a.fixed_value():a,b=f.parent(),y=f.self(),m=g instanceof mt&&(!yt(g)||f.option("awaits")&&b instanceof Si)&&(!wt(g)||f.option("yields")&&y instanceof Ti&&y.nested),h=m&&g.first_statement(),w=0,x=!1,k=!Bn(l.args,function(e){return!(e instanceof gi)}),d=m&&Bn(g.argnames,function(e,n){if(1==w&&l.args[n]instanceof gi&&(w=2),e instanceof ui){n=1==(w=w||1)&&l.args[n];if(n&&!ye(n)&&(w=2),j(e.value))return;e=e.name}return!(e instanceof Di&&(x=!0,j(e)))})&&!(g.rest instanceof Di&&j(g.rest)),_=d&&f.option("inline")&&!l.is_expr_pure(f);if(_&&h instanceof Rt){var E=h.value;if(a===g&&!g.name&&(!E||E.is_constant_expression())&&H(g))return J(l,N(E)).optimize(f)}if(m){var S=!1;if(_&&!g.uses_arguments&&!g.pinned()&&!(g.name&&g instanceof gt)&&(a===g||!xn(f,C=a.definition(),g)&&g.is_constant_expression(W(f)))&&!k&&(E=function(e){var n=g.body.length;if(n<2&&(e=R(e)))return e;if(f.option("inline")<3)return!1;e=null;for(var t=0;t<n;t++){var i=g.body[t];if(i instanceof ri){var r=S||!ee(i);if(r&&(S=!0,e))return!1}else if(!(i instanceof $t||i instanceof qt||i instanceof Kn)){if(e)return!1;e=i}}return R(e)}(h))&&!g.contains_this()){var T,A,D,O,$=a===g||C.single_use&&C.references.length-C.replaced==1;if(function(){if(!(w||x||S||g.rest)&&!(f.option("inline")<2&&g.argnames.length)&&g.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof Li})){var i,r=!1,o=I(),a=[],s=!1;if(E.walk(new vr(function(e,n){if(r)return!0;if(!(e instanceof xi&&we[e.operator]||e instanceof ki)){if(e instanceof ht)return r=!0;if(o&&e instanceof Ni&&o[e.name])return r=!0;if(e instanceof Ji){var t=e.definition();if(g.variables.get(e.name)!==t)return void(a=null);if(t.init instanceof Ot)return r=!0;if(Er(e,this.parent()))return r=!0;t=B(t);return(i<t||(i=t),a)?void(s?a=null:a.push(g.argnames[t])):void 0}return e.has_side_effects(f)?(n(),s=!0):void 0}a=null})),!r){var e=l.args.length;if(a&&g.argnames.length>=e){for(e=g.argnames.length;e-- >i&&g.argnames[e]===a.pop(););e++}var n=s&&!a&&f.find_parent(ht);return e<=i||Bn(l.args.slice(i,e),n?function(e){return e.is_constant_expression(n)}:function(e){return!e.has_side_effects(f)})}}}()){var z=l.args.slice(),q=[];z.push(E.clone(!0).transform(new mr(function(e){if(e instanceof Ji){var n=e.definition();if(g.variables.get(e.name)!==n)return q.push(e),e;var t=B(n),n=z[t];if(!n)return ve(cr,l);z[t]=null;t=this.parent();return t?me(0,t,e,n):n}})));var C=g.inlined;a!==g&&(g.inlined=!0);var M=J(l,z.filter(function(e){return e})).optimize(f);if(g.inlined=C,M=me(0,b,y,M),$||ne(M,l)===M)return q.forEach(function(e){e.scope=a===g?g.parent_scope:a.scope,e.reference();e=e.definition();$&&e.replaced++,e.single_use=!1}),M;M.has_side_effects(f)||(l.drop_side_effect_free=Pn)}if($&&function(){var e,n=Object.create(null),t=0;O=y;do{if(O.variables&&O.variables.each(function(e){n[e.name]=!0}),e=O,(O=f.parent(t++))instanceof at)D=[];else if(O instanceof ct)O.init!==e&&(D=[]);else if(O instanceof ut)O.init!==e&&O.object!==e&&(D=[]);else if(O instanceof Ji&&O.fixed_value()instanceof ht)return!1}while(!(O instanceof ht));if(!(A=O.body.indexOf(e)+1))return!1;if(!H(g))return!1;var i=a!==g||g.parent_scope.resolve()===O;O instanceof vt&&(f.toplevel.vars?n.arguments=!0:i=!1);var r=f.option("inline");if(T=Object.create(n),!function(n,t,i){var r=!1;return g.each_argname(function(e){if(!r&&!e.__unused){if(!i||L(n,e.name))return r=!0;t[e.name]=!0,D&&D.push(e.definition())}}),!r}(n,T,2<=r&&i))return!1;var o=Object.create(T);return!!function(n,e,t){for(var i=0;i<g.body.length;i++){var r=g.body[i];if(r instanceof Ot){if(!t||L(e,r.name.name))return!1;if(!Bn(r.enclosed,function(e){return e.scope===r||!n[e.name]}))return!1;D&&D.push(r.name.definition())}else if(r instanceof ri){if(!t)return!1;for(var o=r.definitions.length;0<=--o;){var a=r.definitions[o].name;if(L(n,a.name))return!1;D&&D.push(a.definition())}}}return!0}(n,o,3<=r&&i)&&(!D||0==D.length||!Tn(g,D))}()){g._squeezed=!0,a!==g&&(g.parent_scope=a.scope);M=J(l,function(){var e=[],n=[];(1<w||x||g.rest?function(i,r){function n(e,n){var t=n.definition();t.references.push(e);n=ve(Bi,n,n);t.orig.push(n),U(i,r,n)}r.push(ve(Ei,l,{operator:"=",left:ve(Oi,l,{elements:g.argnames.map(function(e){return e.__unused?ve(ur,e):e.convert_symbol(Ji,n)}),rest:g.rest&&g.rest.convert_symbol(Ji,n)}),right:ve(Ai,l,{elements:l.args.slice()})}))}:function(e,n){for(var t=g.argnames.length,i=l.args.length;--i>=t;)n.push(l.args[i]);var r,o=[];for(i=t;0<=--i;){var a=g.argnames[i];r=a instanceof ui?(o.push(a),a.name):a;var s,f=l.args[i];r.__unused||O.var_names()[r.name]?f&&n.push(f):(s=ve(Bi,r,r),r.definition().orig.push(s),"__unused"in r?(U(e,n,s),f&&n.push(f)):(!f&&D&&a===r&&(f=ve(cr,l)),U(e,n,s,f)))}for(e.reverse(),n.reverse(),i=o.length;0<=--i;){var c,u=o[i];"__unused"in u.name?n.push(u.value):(c=ve(Ji,u.name,u.name),u.name.definition().references.push(c),n.push(ve(Ei,u,{operator:"=",left:c,right:u.value})))}})(e,n);var t=function(e,n){for(var t=[A,0],i=[],r=[],o=[],a=0;a<g.body.length;a++){var s=g.body[a];if(s instanceof Ot)D?((p=ve(Bi,s.name,V(s.name))).definition().orig.push(p),U(e,n,p,Be(s,!0))):(c=s.name.definition(),O.functions.set(c.name,c),O.variables.set(c.name,c),O.enclosed.push(c),O.var_names()[c.name]=!0,t.push(s));else if(s instanceof ri)for(var f=0;f<s.definitions.length;f++){var c,u,l=s.definitions[f],p=V(l.name);U(i,r,p,l.value),D&&!Un(T,p.name)&&(c=g.variables.get(p.name),u=ve(Ji,p,p),c.references.push(u),o.push(ve(Ei,l,{operator:"=",left:u,right:ve(cr,p)})))}}return[].push.apply(e,i),[].push.apply(n,o),[].push.apply(n,r),t}(e,n);n.push(E),e.length&&t.push(ve(ri,g,{definitions:e}));return[].splice.apply(O.body,t),g.enclosed.forEach(function(e){O.var_names()[e.name]||(O.enclosed.push(e),O.var_names()[e.name]=!0)}),n}()).optimize(f);return me(0,b,y,M)}}if(f.option("side_effects")&&d&&Bn(g.body,Q)&&(g===a?Ge(g,f):!w&&!x&&!g.rest)&&(!bt(g)||!g.value)&&H(g))return J(l,N()).optimize(f)}if(f.option("drop_console")&&a instanceof vi){for(var F=a.expression;F.expression;)F=F.expression;if(ge(F)&&"console"==F.name)return ve(cr,l).optimize(f)}return f.option("negate_iife")&&b instanceof Zn&&Z(y)?l.negate(f,!0):ae(f,l);function j(e){var n=!1;return e.walk(new vr(function(e){return!!n||(e instanceof Ji&&g.variables.get(e.name)===e.definition()?n=!0:void 0)})),n}function P(e){return ve(mi,e,{expression:ve(Ai,e,{elements:[]}),property:"e"})}function N(e){var a,t,n=l.args.slice(),i=1<w||x||g.rest;return(i||k)&&(n=[ve(Ai,l,{elements:n})]),i?(a=new mr(function(i,e){if(i instanceof ui)return ve(ui,i,{name:i.name.transform(a)||P(i),value:i.value});if(i instanceof Oi){var t=[];return i.elements.forEach(function(e,n){(e=e.transform(a))&&(t[n]=e)}),Ye(i,t),ve(Oi,i,{elements:t})}if(i instanceof zi){var r=[],o=[];return i.properties.forEach(function(e){var n=e.key,t=e.value.transform(a);t?(o.length&&(n instanceof Wn||(n=X(n,e)),o.push(n),n=J(i,o),o=[]),r.push(ve($i,e,{key:n,value:t}))):n instanceof Wn&&o.push(n)}),o.length&&r.push(ve($i,i,{key:J(i,o),value:P(i)})),ve(zi,i,{properties:r})}return i instanceof Li?null:void 0}),t=[],g.argnames.forEach(function(e,n){(e=e.transform(a))&&(t[n]=e)}),(i=g.rest&&g.rest.transform(a))&&(t.length=g.argnames.length),Ye(g,t),n[0]=ve(Ei,l,{operator:"=",left:ve(Oi,g,{elements:t,rest:i}),right:n[0]})):g.argnames.forEach(function(e){e instanceof ui&&n.push(e.value)}),n.push(e||ve(cr,l)),n}function I(){var e=[],n=O||f.find_parent(ht);return yt(n)&&e.push("await"),wt(n)&&e.push("yield"),e.length&&Rn(e)}function H(e){var t=I();if(!t)return 1;var i=!0,r=new vr(function(e){if(!i)return!0;if(e instanceof ht){if(e===g)return;if(bt(e))for(var n=0;i&&n<e.argnames.length;n++)e.argnames[n].walk(r);else e instanceof Ot&&t[e.name.name]&&(i=!1);return!0}e instanceof Ni&&t[e.name]&&e!==g.name&&(i=!1)});return e.walk(r),i}function Y(){return l.call_only?ve(rr,l,{value:0}):ve(cr,l)}function R(e){return e?e instanceof Rt?e.value||Y():e instanceof Zn?l.call_only?e.body:ve(yi,e,{operator:"void",expression:e.body}):void 0:Y()}function B(e){for(var n=g.argnames.length;0<=--n;)if(g.argnames[n].definition()===e)return n}function L(e,n){return e[n]||G[n]||O.var_names()[n]}function U(e,n,t,i){var r=t.definition();O.var_names()[t.name]||(O.var_names()[t.name]=!0,e.push(ve(oi,t,{name:t,value:null}))),O.variables.set(t.name,r),O.enclosed.push(r),i&&(t=ve(Ji,t,t),r.references.push(t),n.push(ve(Ei,l,{operator:"=",left:t,right:i})))}function V(e){var n=e.definition().redefined();return n&&((e=e.clone()).thedef=n),e}}),e(pi,function(e,n){if(n.option("sequences")){var t=pn(e);if(t!==e)return t.optimize(n)}if(n.option("unused")&&dn(e,n),n.option("unsafe")){t=e.expression;if(ge(t))switch(t.name){case"Object":case"RegExp":case"Function":case"Error":case"Array":return ve(li,e,e).transform(n)}}return e}),e(di,function(e,o){var a=function(){if(!o.option("side_effects"))return e.expressions;var t=[],i=Vn(o),r=e.expressions.length-1;return e.expressions.forEach(function(e,n){(e=n<r?e.drop_side_effect_free(o,i):e)&&(q(t,e),i=!1)}),t}(),s=a.length-1;return function(){for(var e=1;e<s;e++){var n=a[e-1],t=f(n);if(t){var i=a[e];if(o.option("conditionals")){var r=hn(o,t,n.right,i);if(r){n.right=r,a.splice(e--,1),s--;continue}}o.option("dead_code")&&f(i)===t&&i.right.is_constant_expression(t.scope.resolve())&&(a[--e]=n.right)}}}(),function(){if(o.option("side_effects")){for(;0<s&&ye(a[s],o);)s--;s<a.length-1&&(a[s]=ve(yi,e,{operator:"void",expression:a[s]}),a.length=s+1)}}(),0==s?(e=me(0,o.parent(),o.self(),a[0]))instanceof di?e:e.optimize(o):(e.expressions=a,e);function f(e){return e instanceof Ei&&"="==e.operator&&e.left instanceof Ji&&e.left.definition()}}),e(wi,function(e,n){if(n.option("sequences")){var t=pn(e);if(t!==e)return t.optimize(n)}return ae(n,e)});var vn=Rn("+ -"),mn=Rn("* / %");e(yi,function(e,n){var t=e.operator,i=e.expression;if(n.option("evaluate")&&"delete"==t&&!a(i))return J(e,[i,ve(hr,e)]).optimize(n);if(n.option("sequences")&&function(){switch(t){case"delete":return!a(i.tail_node());case"typeof":return!ge(i.tail_node());default:return!0}}()){var r=pn(e);if(r!==e)return r.optimize(n)}if(n.option("side_effects")&&"void"==t)return(i=i.drop_side_effect_free(n))?(e.expression=i,e):ve(cr,e).optimize(n);if(n.option("booleans")){if("!"==t&&i.is_truthy())return J(e,[i,ve(dr,e)]).optimize(n);if(n.in_boolean_context())switch(t){case"!":if(i instanceof yi&&"!"==i.operator)return i.expression;i instanceof xi&&(e=te(n,e,i.negate(n,Vn(n))));break;case"typeof":Wn.warn("Boolean expression always true [{file}:{line},{col}]",e.start);var o=[ve(hr,e)];return i instanceof Ji&&pe(i,n)||o.unshift(i),J(e,o).optimize(n)}}return"-"==t&&i instanceof lr&&(i=i.transform(n)),n.option("evaluate")&&i instanceof xi&&vn[t]&&mn[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(n))?ve(xi,e,{operator:i.operator,left:ve(yi,i.left,{operator:t,expression:i.left}),right:i.right}):"-"==t&&(i instanceof rr||i instanceof lr)?e:ae(n,e);function a(e){return e instanceof lr||e instanceof fr||e instanceof er||e instanceof vi||e instanceof Ji||e instanceof cr}}),e(Si,function(e,n){if(!n.option("awaits"))return e;if(n.option("sequences")){var t=pn(e);if(t!==e)return t.optimize(n)}if(n.option("side_effects")){var i=e.expression;if(i instanceof Si)return i.optimize(n);if(i instanceof yi){if(i.expression instanceof Si)return i.optimize(n);if("void"==i.operator)return ve(yi,e,{operator:"void",expression:ve(Si,e,{expression:i.expression})}).optimize(n)}for(var r,o=0,a=e;r=n.parent(o++);a=r){if(bt(r)){if(r.value===a)return i.optimize(n)}else if(r instanceof Rt){var s=!0;do{if(a=r,(r=n.parent(o++))instanceof Qt&&r.bfinally&&r.bfinally!==a){s=!1;break}}while(r&&!(r instanceof ht));if(s)return i.optimize(n)}else if(r instanceof di&&r.tail_node()===a)continue;break}}return e}),e(Ti,function(e,n){if(!n.option("yields"))return e;if(n.option("sequences")){var t=pn(e);if(t!==e)return t.optimize(n)}t=e.expression;if(e.nested&&"Call"==t.TYPE){n=t.clone().optimize(n);if("Call"!=n.TYPE)return n}return e}),xi.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof vi){if(!(this.left.expression instanceof di))return this;var n=this.left.expression.expressions.slice();return(t=this.clone()).left=t.left.clone(),t.left.expression=n.pop(),n.push(t),J(this,n)}if(this.left instanceof di){n=this.left.expressions.slice();return(t=this.clone()).left=n.pop(),n.push(t),J(this,n)}if(this.right instanceof di){if(this.left.has_side_effects(e))return this;for(var t,i="="==this.operator&&this.left instanceof Ji,r=(n=this.right.expressions).length-1,o=0;o<r&&(i||!n[o].has_side_effects(e));o++);if(o==r)return n=n.slice(),(t=this.clone()).right=n.pop(),n.push(t),J(this,n);if(0<o)return(t=this.clone()).right=J(this.right,n.slice(o)),(n=n.slice(0,o)).push(t),J(this,n)}return this});var _n=Rn("indexOf lastIndexOf"),gn=Rn("== === != !== * & | ^");function bn(e){return e instanceof Ei?"="==e.operator&&bn(e.right):e instanceof di?bn(e.tail_node()):e instanceof Ji?bn(e.fixed_value()):e instanceof Ai||e instanceof Mt||e instanceof mt||e instanceof pi||e instanceof qi}function yn(e,n){if(n.is_constant())return!0;if(n instanceof Ei)return"="!=n.operator||yn(e,n.right);if(n instanceof xi)return!we[n.operator]||yn(e,n.left)&&yn(e,n.right);if(n instanceof ki)return yn(e,n.consequent)&&yn(e,n.alternative);if(n instanceof di)return yn(e,n.tail_node());if(n instanceof Ji){var t=n.fixed_value();return t&&yn(e,t)}return n instanceof nr?!n.tag||En(e,n.tag):n instanceof bi||void 0}function wn(e,n){return n instanceof mi?wn(e,n.expression):n instanceof _i?wn(e,n.expression)&&wn(e,n.property):n instanceof Ni||!n.has_side_effects(e)}function xn(e,n,t){var i=0,r=e.self();do{if(r===t)return r;if(v(r)&&r.name&&r.name.definition()===n)return r}while(r=e.parent(i++))}function kn(e){var n=e.scope.resolve();return Bn(e.references,function(e){return n===e.scope.resolve()})}function En(e,n){return e.option("unsafe")&&n instanceof mi&&"raw"==n.property&&ge(n.expression)&&"String"==n.expression.name}function Sn(e,n){return e instanceof Ji||e.TYPE===n.TYPE}function Tn(t,n){var i=!1,r=new vr(function(e){return!!i||(e instanceof Ji&&zn(e.definition(),n)?i=!0:void 0)}),o=new vr(function(e){if(i)return!0;if(e instanceof mt&&e!==t){if(!(e.name||yt(e)||wt(e))){var n=o.parent();if(n instanceof li&&n.expression===e)return}return e.walk(r),!0}});return t.walk(o),i}e(xi,function(t,a){function n(){return t.left.is_constant()||t.right.is_constant()||!t.left.has_side_effects(a)&&!t.right.has_side_effects(a)}function e(e){n()&&(e&&(t.operator=e),e=t.left,t.left=t.right,t.right=e)}function i(){var e=t.right;t.left=ve(xi,t,{operator:t.operator,left:t.left,right:e.left,start:t.left.start,end:e.left.end}),t.right=e.right,t.left=t.left.transform(a)}if(!gn[t.operator]||!t.right.is_constant()||t.left.is_constant()||t.left instanceof xi&&wr[t.left.operator]>=wr[t.operator]||e(),a.option("sequences")){var r=t.lift_sequences(a);if(r!==t)return r.optimize(a)}if(a.option("assignments")&&we[t.operator]){var o=t.right;if(t.left instanceof Ji&&o instanceof Ei&&"="==o.operator&&t.left.equivalent_to(o.left))return t.right=o.right,o.right=t,o}if(a.option("comparisons"))switch(t.operator){case"===":case"!==":if(ye(t.left,a)&&t.right.is_defined(a))return Wn.warn("Expression always defined [{file}:{line},{col}]",t.start),J(t,[t.right,ve("==="==t.operator?dr:hr,t)]).optimize(a);var s=!0;(t.left.is_string(a)&&t.right.is_string(a)||t.left.is_number(a)&&t.right.is_number(a)||t.left.is_boolean(a)&&t.right.is_boolean(a)||wn(a,t.left)&&t.left.equivalent_to(t.right))&&(t.operator=t.operator.slice(0,2));case"==":case"!=":if(!s&&ye(t.left,a))t.left=ve(sr,t.left);else if(a.option("typeofs")&&t.left instanceof ir&&"undefined"==t.left.value&&t.right instanceof yi&&"typeof"==t.right.operator){var f=t.right.expression;(f instanceof Ji?!f.is_declared(a):f instanceof vi&&a.option("ie"))||(t.right=f,t.left=ve(cr,t.left).optimize(a),2==t.operator.length&&(t.operator+="="))}else if(t.left instanceof Ji&&t.right instanceof Ji&&t.left.definition()===t.right.definition()&&bn(t.left))return ve("="==t.operator[0]?hr:dr,t).optimize(a);break;case"&&":case"||":if((d=(d=t.left).operator==t.operator?d.right:d)instanceof xi&&d.operator==("&&"==t.operator?"!==":"===")&&t.right instanceof xi&&d.operator==t.right.operator&&(ye(d.left,a)&&t.right.left instanceof sr||d.left instanceof sr&&ye(t.right.left,a))&&!d.right.has_side_effects(a)&&d.right.equivalent_to(t.right.right)){f=ve(xi,t,{operator:d.operator.slice(0,-1),left:ve(sr,t),right:d.right});return f=d!==t.left?ve(xi,t,{operator:t.operator,left:t.left.left,right:f}):f}}var c,u,l=!1,p=a.parent();if(a.option("booleans")){var d=t.left;if(we[t.operator]&&!d.has_side_effects(a)){if(d.equivalent_to(t.right))return me(0,p,a.self(),d).optimize(a);rn(a,d)}l=a.in_boolean_context()}if(l)switch(t.operator){case"+":var h=t.left.evaluate(a),v=t.right.evaluate(a);if(h&&"string"==typeof h)return Wn.warn("+ in boolean context always true [{file}:{line},{col}]",t.start),J(t,[t.right,ve(hr,t)]).optimize(a);if(v&&"string"==typeof v)return Wn.warn("+ in boolean context always true [{file}:{line},{col}]",t.start),J(t,[t.left,ve(hr,t)]).optimize(a);break;case"==":if(t.left instanceof ir&&""==t.left.value&&t.right.is_string(a))return ve(yi,t,{operator:"!",expression:t.right}).optimize(a);break;case"!=":if(t.left instanceof ir&&""==t.left.value&&t.right.is_string(a))return t.right.optimize(a)}if(a.option("comparisons")&&t.is_boolean(a)){if(!(p instanceof xi)||p instanceof Ei){o=te(a,t,ve(yi,t,{operator:"!",expression:t.negate(a,Vn(a))}));if(o!==t)return o}switch(t.operator){case">":e("<");break;case">=":e("<=")}}if(a.option("conditionals")&&we[t.operator]&&t.right instanceof xi&&t.operator==t.right.operator&&i(),a.option("strings")&&"+"==t.operator){if(t.right instanceof ir&&""==t.right.value&&t.left.is_string(a))return t.left.optimize(a);if(t.left instanceof ir&&""==t.left.value&&t.right.is_string(a))return t.right.optimize(a);if(t.left instanceof xi&&"+"==t.left.operator&&t.left.left instanceof ir&&""==t.left.left.value&&t.right.is_string(a))return t.left=t.left.right,t.optimize(a);t.right instanceof xi&&t.operator==t.right.operator&&(t.left.is_string(a)&&t.right.is_string(a)||t.right.left.is_string(a)&&(t.left.is_constant()||!t.right.right.has_side_effects(a)))&&i()}if(a.option("evaluate")){var m,_=!0;switch(t.operator){case"&&":if(!(h=tn(a,t.left)))return Wn.warn("Condition left of && always false [{file}:{line},{col}]",t.start),me(0,p,a.self(),t.left).optimize(a);if(!(h instanceof Wn))return Wn.warn("Condition left of && always true [{file}:{line},{col}]",t.start),J(t,[t.left,t.right]).optimize(a);if(v=t.right.evaluate(a)){if(!(v instanceof Wn)&&(l||"&&"==p.operator&&p.left===a.self()))return Wn.warn("Dropping side-effect-free && [{file}:{line},{col}]",t.start),t.left.optimize(a)}else{if(l)return Wn.warn("Boolean && always false [{file}:{line},{col}]",t.start),J(t,[t.left,ve(dr,t)]).optimize(a);t.falsy=!0}if("||"==t.left.operator)if(!(b=tn(a,t.left.right)))return ve(ki,t,{condition:t.left.left,consequent:t.right,alternative:t.left.right}).optimize(a);break;case"??":var g=!0;case"||":var b,h=tn(a,t.left,g);if(g?null==h:!h)return Wn.warn("Condition left of {operator} always {value} [{file}:{line},{col}]",{operator:t.operator,value:g?"nulish":"false",file:t.start.file,line:t.start.line,col:t.start.col}),J(t,[t.left,t.right]).optimize(a);if(!(h instanceof Wn))return Wn.warn("Condition left of {operator} always {value} [{file}:{line},{col}]",{operator:t.operator,value:g?"defined":"true",file:t.start.file,line:t.start.line,col:t.start.col}),me(0,p,a.self(),t.left).optimize(a);if(v=t.right.evaluate(a)){if(!(g||v instanceof Wn)){if(l)return Wn.warn("Boolean || always true [{file}:{line},{col}]",t.start),J(t,[t.left,ve(hr,t)]).optimize(a);t.truthy=!0}}else if(l||"||"==p.operator&&p.left===a.self())return Wn.warn("Dropping side-effect-free {operator} [{file}:{line},{col}]",{operator:t.operator,file:t.start.file,line:t.start.line,col:t.start.col}),t.left.optimize(a);if(!g&&"&&"==t.left.operator)if((b=tn(a,t.left.right))&&!(b instanceof Wn))return ve(ki,t,{condition:t.left.left,consequent:t.left.right,alternative:t.right}).optimize(a);break;case"+":if((t=(t=t.left instanceof tr&&t.right instanceof xi&&"+"==t.right.operator&&t.right.left instanceof tr&&t.right.is_string(a)?ve(xi,t,{operator:"+",left:ve(ir,t.left,{value:""+t.left.value+t.right.left.value,start:t.left.start,end:t.right.left.end}),right:t.right.right}):t).right instanceof tr&&t.left instanceof xi&&"+"==t.left.operator&&t.left.right instanceof tr&&t.left.is_string(a)?ve(xi,t,{operator:"+",left:t.left.left,right:ve(ir,t.right,{value:""+t.left.right.value+t.right.value,start:t.left.right.start,end:t.right.end})}):t).right instanceof yi&&"-"==t.right.operator&&t.left.is_number(a)){t=ve(xi,t,{operator:"-",left:t.left,right:t.right.expression});break}if(t.left instanceof yi&&"-"==t.left.operator&&n()&&t.right.is_number(a)){t=ve(xi,t,{operator:"-",left:t.right,right:t.left.expression});break}if(a.option("unsafe_math")&&t.left instanceof xi&&wr[t.left.operator]==wr[t.operator]&&t.right.is_constant()&&(t.right.is_boolean(a)||t.right.is_number(a))&&t.left.is_number(a)&&!t.left.right.is_constant()&&(t.left.left.is_boolean(a)||t.left.left.is_number(a))){t=ve(xi,t,{operator:t.left.operator,left:ve(xi,t,{operator:t.operator,left:t.right,right:t.left.left}),right:t.left.right});break}case"-":if(t.right instanceof yi&&"-"==t.right.operator&&t.left.is_number(a)&&t.right.expression.is_number(a)){t=ve(xi,t,{operator:"+",left:t.left,right:t.right.expression});break}case"*":case"/":_=a.option("unsafe_math"),"+"!=t.operator&&["left","right"].forEach(function(e){var n=t[e];n instanceof yi&&"+"==n.operator&&(((n=n.expression).is_boolean(a)||n.is_number(a)||n.is_string(a))&&(t[e]=n))});case"&":case"|":case"^":if("-"==t.operator||"/"==t.operator||!t.left.is_boolean(a)&&!t.left.is_number(a)||!t.right.is_boolean(a)&&!t.right.is_number(a)||!n()||t.left instanceof xi&&t.left.operator!=t.operator&&wr[t.left.operator]>=wr[t.operator]||(m=ve(xi,t,{operator:t.operator,left:t.right,right:t.left}),t=t.right instanceof tr&&!(t.left instanceof tr)?te(a,m,t):te(a,t,m)),!_||!t.is_number(a))break;!(t.right instanceof xi&&"%"!=t.right.operator&&wr[t.right.operator]==wr[t.operator]&&t.right.is_number(a)&&("+"!=t.operator||t.right.left.is_boolean(a)||t.right.left.is_number(a)))||"-"==t.operator&&t.left.is_negative_zero()||!t.right.left.is_constant_expression()&&t.right.right.has_side_effects(a)||(c=t.right.right,u=!1,c.walk(new vr(function(e){if(u)return!0;if(e instanceof Ei){if(e.left instanceof vi)return u=!0}else if(e instanceof bi&&kr[e.operator]&&e.expression instanceof vi)return u=!0})),u)||"+"!=(t=ve(xi,t,{operator:k(t.operator,t.right.operator),left:ve(xi,t.left,{operator:t.operator,left:t.left,right:t.right.left,start:t.left.start,end:t.right.left.end}),right:t.right.right})).operator||t.right.is_boolean(a)||t.right.is_number(a)||(t.right=ve(yi,t.right,{operator:"+",expression:t.right})),t.right instanceof tr&&t.left instanceof xi&&"%"!=t.left.operator&&wr[t.left.operator]==wr[t.operator]&&t.left.is_number(a)&&(t.left.left instanceof tr?(d=E(t.left,t.operator,t.left.left,t.right,t.left.left.start,t.right.end),t=E(t,t.left.operator,ae(a,d),t.left.right)):t.left.right instanceof tr&&(m=k(t.left.operator,t.operator),!(m=ae(a,E(t.left,m,t.left.right,t.right))).is_constant()||"-"==t.left.operator&&0!=t.right.value&&0==+m.value&&t.left.left.is_negative_zero()||(t=E(t,t.left.operator,t.left.left,m))))}if(!(p instanceof yi&&"delete"==p.operator)){if(t.left instanceof rr&&!t.right.is_constant())switch(t.operator){case"+":if(0==t.left.value){if(t.right.is_boolean(a))return ve(yi,t,{operator:"+",expression:t.right}).optimize(a);if(t.right.is_number(a)&&!t.right.is_negative_zero())return t.right}break;case"*":if(1==t.left.value)return t.right.is_number(a)?t.right:ve(yi,t,{operator:"+",expression:t.right}).optimize(a)}if(t.right instanceof rr&&!t.left.is_constant())switch(t.operator){case"+":if(0==t.right.value){if(t.left.is_boolean(a))return ve(yi,t,{operator:"+",expression:t.left}).optimize(a);if(t.left.is_number(a)&&!t.left.is_negative_zero())return t.left}break;case"-":if(0==t.right.value)return t.left.is_number(a)?t.left:ve(yi,t,{operator:"+",expression:t.left}).optimize(a);break;case"/":if(1==t.right.value)return t.left.is_number(a)?t.left:ve(yi,t,{operator:"+",expression:t.left}).optimize(a)}}}if(a.option("typeofs"))switch(t.operator){case"&&":nn(t.left,t.right,null);break;case"||":nn(t.left,null,t.right)}if(a.option("unsafe")){var y=S(t.right);if(l&&y&&("=="==t.operator||"!="==t.operator)&&t.left instanceof rr&&0==t.left.value)return("=="==t.operator?ve(yi,t,{operator:"!",expression:t.right}):t.right).optimize(a);var w=S(t.left);if(a.option("comparisons")&&function(){switch(t.operator){case"<=":return y&&t.left instanceof rr&&0==t.left.value;case"<":if(w&&t.right instanceof rr&&0==t.right.value)return!0;case"==":case"!=":return y?t.left instanceof rr&&-1==t.left.value||t.left instanceof yi&&"-"==t.left.operator&&t.left.expression instanceof rr&&1==t.left.expression.value:!1}}()){var x=ve(yi,t,{operator:"!",expression:ve(yi,t,{operator:"~",expression:w?t.left:t.right})});switch(t.operator){case"<":if(w)break;case"<=":case"!=":x=ve(yi,t,{operator:"!",expression:x})}return x.optimize(a)}}return ae(a,t);function k(e,n){switch(e){case"-":return"+"==n?"-":"+";case"/":return"*"==n?"/":"*";default:return n}}function E(e,n,t,i,r,o){return"+"==n&&(t.is_boolean(a)||t.is_number(a)||(t=ve(yi,t,{operator:"+",expression:t})),i.is_boolean(a)||i.is_number(a)||(i=ve(yi,i,{operator:"+",expression:i}))),ve(xi,e,{operator:n,left:t,right:i,start:r,end:o})}function S(e){return"Call"==e.TYPE&&e.expression instanceof mi&&_n[e.expression.property]}}),e(Xi,function(e){return e}),e(Ji,function(e,n){if(!n.option("ie")&&ge(e)&&(!e.scope.resolve().uses_with||!n.find_parent(dt)))switch(e.name){case"undefined":return ve(cr,e).optimize(n);case"NaN":return ve(fr,e).optimize(n);case"Infinity":return ve(lr,e).optimize(n)}var t=n.parent();if(n.option("reduce_vars")&&Er(n.self(),t)!==n.self()){var i,r,o,a,s=e.definition(),f=e.fixed_value(),t=s.single_use&&!(t instanceof li&&t.is_expr_pure(n));if(t)if(v(f)){if(s.scope===e.scope.resolve()&&!s.in_loop||n.option("reduce_funcs")&&1!=s.escaped.depth&&!f.inlined)if(xn(n,s,f))t=!1;else if(f.name&&f.name.definition()!==s)t=!1;else if(f.parent_scope!==e.scope||le(s)){if("f"==(t=f.is_constant_expression(e.scope)))for(var c=e.scope;(c instanceof Ot||c instanceof gt)&&(c.inlined=!0),c=c.parent_scope;);}else(f.name&&("await"==f.name.name&&yt(f)||"yield"==f.name.name&&wt(f))||f.has_side_effects(n)||n.option("ie")&&f instanceof Mt)&&(t=!1);else t=!1;t&&(f.parent_scope=e.scope)}else(!f||0<s.recursive_refs||!f.is_constant_expression()||f.drop_side_effect_free(n))&&(t=!1);if(t)return s.single_use=!1,f._squeezed=!0,f.single_use=!0,v(f=(f=f instanceof Ft?Re(f):f)instanceof Ot?Be(f):f)&&(c=e.scope.resolve(),f.enclosed.forEach(function(e){f.variables.has(e.name)||c.var_names()[e.name]||(c.enclosed.push(e),c.var_names()[e.name]=!0)})),0<s.recursive_refs?(i=(d=f.clone(!0)).name.definition(),r=d.variables.get(d.name.name),o=r&&r.orig[0],l=d instanceof Mt?(a="def_function",Wi):(a="def_variable",Vi),o instanceof l||(((o=ve(l,d.name,d.name)).scope=d).name=o,(r=d[a](o)).recursive_refs=s.recursive_refs),d.walk(new vr(function(e){var n,t;e instanceof Ii?e!==o&&((n=e.definition()).orig.push(e),n.eliminated++):e instanceof Ji&&((n=e.definition())===i?e.thedef=n=r:(n.single_use=!1,v(t=e.fixed_value())&&t.name&&t.name.definition()===n&&n.scope===t.name.scope&&f.variables.get(t.name.name)===n&&(t.name=t.name.clone(),e.thedef=n=d.variables.get(t.name.name)||d[a](t.name))),n.references.push(e))}))):(f instanceof ht?(n.push(f),d=f.optimize(n),n.pop()):d=f.optimize(n),d=d.transform(new mr(function(e,n){return e instanceof ht||n(e=e.clone(),this),e}))),s.replaced++,d;var u,l,p,d,t=e.fixed!==s.fixed;if(f&&(t||!1!==s.should_replace))if(f instanceof Zi?!le(s)&&kn(s)&&(u=f):(p=f.evaluate(n,!0))!==f&&"function"!=typeof p&&(null===p||"object"!=typeof p||n.option("unsafe_regexp")&&p instanceof RegExp&&!s.cross_loop&&kn(s))&&(u=X(p,f)),u)if(t||void 0!==s.should_replace||(l=u.optimize(n).print_to_string().length,h(f)||(l=Math.min(l,f.print_to_string().length)),p=s.name.length,n.option("unused")&&!n.exposed(s)&&(p+=(p+2+l)/(s.references.length-s.replaced-s.assignments)),p=l-Math.floor(p),s.should_replace=p<n.eval_threshold),t||s.should_replace)return h(f)?(d=u.optimize(n))===u&&(d=d.clone(!0)):(d=ne(u.optimize(n),f))!==u&&d!==f||(d=d.clone(!0)),s.replaced++,d}return e;function h(e){var n;return e.walk(new vr(function(e){if(n=e instanceof Ji?!0:n)return!0})),n}}),e(nr,function(e,n){if(!n.option("templates"))return e;var t=e.tag;if(!t||En(n,t)){for(var i=e.expressions.slice(),r=e.strings.slice(),o=!1,a=i.length;0<=--a;){var s=i[a],f=s.evaluate(n);f!==s&&(t&&/\r|\\|`/.test(f)||(f=(""+f).replace(/\r|\\|`/g,function(e){return"\\"+("\r"==e?"r":e)})).length>s.print_to_string().length+3||(f=r[a]+f+r[a+1],typeof ve(nr,e,{expressions:[],strings:[f],tag:t}).evaluate(n)==typeof ve(nr,e,{expressions:[s],strings:r.slice(a,a+2),tag:t}).evaluate(n)&&(i.splice(a,1),r.splice(a,2,f),o=!0)))}o&&(e.expressions=i,e.strings=r)}return ae(n,e)}),e(cr,function(e,n){if(n.option("unsafe_undefined")){var t=W(n).find_variable("undefined");if(t){t=ve(Ji,e,{name:"undefined",scope:t.scope,thedef:t});return t.is_undefined=!0,t}}n=Er(n.self(),n.parent());return n&&Sn(n,e)?e:ve(yi,e,{operator:"void",expression:ve(rr,e,{value:0})})}),e(lr,function(e,n){var t=Er(n.self(),n.parent());return(!t||!Sn(t,e))&&(!n.option("keep_infinity")||t||W(n).find_variable("Infinity"))?ve(xi,e,{operator:"/",left:ve(rr,e,{value:1}),right:ve(rr,e,{value:0})}):e}),e(fr,function(e,n){var t=Er(n.self(),n.parent());return(!t||!Sn(t,e))&&(t||W(n).find_variable("NaN"))?ve(xi,e,{operator:"/",left:ve(rr,e,{value:0}),right:ve(rr,e,{value:0})}):e});var An=Rn("+ - * / % >> << >>> | ^ &"),Dn=Rn("* | ^ &");function On(e,n){if(e){var t=n.parent();return"Call"!=t.TYPE?1:t.expression!==n.self()||(!(e instanceof Ji)||(e=e.fixed_value()))&&(e instanceof mt&&!e.contains_this())}}function $n(e){return e instanceof Mi&&"string"==typeof e.key&&!(e instanceof Fi&&e.value.contains_super())}e(Ei,function(o,a){if(a.option("dead_code"))if(o.left instanceof vi){if("="==o.operator){if(o.__drop){var e=[o.left.expression];return o.left instanceof _i&&e.push(o.left.property),e.push(o.right),J(o,e).optimize(a)}if(o.left.equivalent_to(o.right)&&!o.left.has_side_effects(a))return o.right;e=o.left.expression;if(e instanceof mt||!a.has_directive("use strict")&&e instanceof tr&&!e.may_throw_on_access(a))return o.left instanceof mi?o.right:J(o,[o.left.property,o.right]).optimize(a)}}else if(o.left instanceof Ji&&pe(o.left,a)){if("="==o.operator&&o.left.equivalent_to(o.right)&&!((c=a.parent())instanceof yi&&"delete"==c.operator))return o.right;if(o.left.is_immutable())return v();var n,t,i=o.left.definition(),s=i.scope.resolve(),r=s===a.find_parent(mt),f=0,c=a.self();if(!s.uses_arguments||!le(i)||a.has_directive("use strict"))do{if(n=c,(c=a.parent(f++))instanceof Ei){var u=!1;if(c.left.match_symbol(function(e){if(e instanceof vi)return!0;if(!u&&e instanceof Ji&&e.definition()===i){if(h(f,c))return!0;u=!0}}))break;if(!u)continue;return v(i)}if(c instanceof Yt){if(!r)break;if(h(f,c))break;if(Tn(s,[i]))break;return v(i)}if(c instanceof Zn){if(!r)break;if(Tn(s,[i]))break;do{if(t=c,(c=a.parent(f++))===s&&I(c.body,t))return v(i)}while(l=t,(p=c)instanceof it||p instanceof Zt||p instanceof ei?I(p.body,l):p instanceof Wt?p.body===l||p.alternative===l:p instanceof Qt?p.bfinally?p.bfinally===l:p.bcatch===l:void 0);break}if(c instanceof oi&&c.name instanceof Ii&&c.name.definition()===i){if(h(f,c))break;return v(i)}}while(function(e,n){if(n instanceof xi)return n.right===e||n.right.is_constant_expression(s);if(n instanceof ki)return n.condition!==e||n.consequent.is_constant_expression(s)&&n.alternative.is_constant_expression(s);if(n instanceof di){var t=n.expressions,i=t.indexOf(e);if(i<0)return!1;for(var r=t.length;--r>i;)if(!t[r].is_constant_expression(s))return!1;return!0}if(n instanceof yi)return!0}(n,c))}var l,p;if(a.option("sequences")){var d=o.lift_sequences(a);if(d!==o)return d.optimize(a)}if(a.option("assignments")){if("="==o.operator&&o.left instanceof Ji&&o.right instanceof xi){if(o.right.left instanceof Ji&&o.right.left.name==o.left.name&&An[o.right.operator])return ve(Ei,o,{operator:o.right.operator+"=",left:o.left,right:o.right.right});if(o.right.right instanceof Ji&&o.right.right.name==o.left.name&&Dn[o.right.operator]&&!o.right.left.has_side_effects(a))return ve(Ei,o,{operator:o.right.operator+"=",left:o.left,right:o.right.left})}if(("-="==o.operator||"+="==o.operator&&(o.left.is_boolean(a)||o.left.is_number(a)))&&o.right instanceof rr&&1==o.right.value){d=o.operator.slice(0,-1);return ve(yi,o,{operator:d+d,expression:o.left})}}return ae(a,o);function h(e,n){var t=o.right;o.right=ve(sr,t);var i,r=n.may_throw(a);for(o.right=t;i=a.parent(e++);n=i){if(i===s)return;if(i instanceof Qt){if(i.bfinally&&i.bfinally!==n)return 1;if(r&&i.bcatch&&i.bcatch!==n)return 1}}}function v(e){return e&&(e.fixed=!1),("="!=o.operator?ve(xi,o,{operator:o.operator.slice(0,-1),left:o.left,right:o.right}):me(0,a.parent(),o,o.right)).optimize(a)}}),e(ki,function(r,n){if(n.option("sequences")&&r.condition instanceof di){var e=r.condition.expressions.slice();return r.condition=e.pop(),e.push(r),J(r,e)}if(!n.option("conditionals"))return r;var o=r.condition;if(n.option("booleans")&&!o.has_side_effects(n)&&rn(n,o),!(o=tn(n,o)))return Wn.warn("Condition always false [{file}:{line},{col}]",r.start),J(r,[r.condition,r.alternative]).optimize(n);if(!(o instanceof Wn))return Wn.warn("Condition always true [{file}:{line},{col}]",r.start),J(r,[r.condition,r.consequent]).optimize(n);var t=o.negate(n,Vn(n));te(n,o,t)===t&&(r=ve(ki,r,{condition:t,consequent:r.alternative,alternative:r.consequent}),t=o,o=r.condition);var i=r.consequent,a=r.alternative;if(wn(n,o)){if(o.equivalent_to(i))return ve(xi,r,{operator:"||",left:o,right:a}).optimize(n);if(o.equivalent_to(a))return ve(xi,r,{operator:"&&",left:o,right:i}).optimize(n)}var s=i.tail_node();if(s instanceof Ei){var f="="==s.operator,e=f?a.tail_node():a;if((f||i===s)&&e instanceof Ei&&s.operator==e.operator&&s.left.equivalent_to(e.left)&&(f&&s.left instanceof Ji||!o.has_side_effects(n)&&m(i)&&m(a)))return ve(Ei,r,{operator:s.operator,left:s.left,right:ve(ki,r,{condition:o,consequent:_(i),alternative:_(a)})})}if(i.equivalent_to(a))return J(r,[o,i]).optimize(n);var c,f=function e(n,t,i){if(!v(n,t))return!i&&ve(ki,r,{condition:o,consequent:n,alternative:t});i=n.clone();i.expression=e(n.expression,t.expression);return i}(i,a,!0);if(f)return f;if(i instanceof li&&a.TYPE==i.TYPE&&0<=(c=h(i,a))&&i.expression.equivalent_to(a.expression)&&!o.has_side_effects(n)&&!i.expression.has_side_effects(n)){s=i.clone(),f=i.args[c];return s.args[c]=f instanceof gi?ve(gi,r,{expression:ve(ki,r,{condition:o,consequent:f.expression,alternative:a.args[c].expression})}):ve(ki,r,{condition:o,consequent:f,alternative:a.args[c]}),s}if(i instanceof ki&&i.alternative.equivalent_to(a))return ve(ki,r,{condition:ve(xi,r,{left:o,operator:"&&",right:i.condition}),consequent:i.consequent,alternative:a});if(i instanceof ki&&i.consequent.equivalent_to(a))return ve(ki,r,{condition:ve(xi,r,{left:t,operator:"||",right:i.condition}),consequent:a,alternative:i.alternative});if(a instanceof ki&&i.equivalent_to(a.consequent))return ve(ki,r,{condition:ve(xi,r,{left:o,operator:"||",right:a.condition}),consequent:i,alternative:a.alternative});if(a instanceof ki&&i.equivalent_to(a.alternative))return ve(ki,r,{condition:ve(xi,r,{left:t,operator:"&&",right:a.condition}),consequent:a.consequent,alternative:i});if((i instanceof di||a instanceof di)&&i.tail_node().equivalent_to(a.tail_node()))return J(r,[ve(ki,r,{condition:o,consequent:g(i),alternative:g(a)}),i.tail_node()]).optimize(n);if(i instanceof xi&&"&&"==i.operator&&i.right.equivalent_to(a))return ve(xi,r,{operator:"&&",left:ve(xi,r,{operator:"||",left:t,right:i.left}),right:a}).optimize(n);if(i instanceof xi&&"||"==i.operator&&i.right.equivalent_to(a))return ve(xi,r,{operator:"||",left:ve(xi,r,{operator:"&&",left:o,right:i.left}),right:a}).optimize(n);if(a instanceof xi&&"&&"==a.operator&&a.right.equivalent_to(i))return ve(xi,r,{operator:"&&",left:ve(xi,r,{operator:"||",left:o,right:a.left}),right:i}).optimize(n);if(a instanceof xi&&"||"==a.operator&&a.right.equivalent_to(i))return ve(xi,r,{operator:"||",left:ve(xi,r,{operator:"&&",left:t,right:a.left}),right:i}).optimize(n);var u=n.option("booleans")&&n.in_boolean_context();return p(i)?d(a)?l(o):ve(xi,r,{operator:"||",left:l(o),right:a}):d(i)?p(a)?l(o.negate(n)):ve(xi,r,{operator:"&&",left:l(o.negate(n)),right:a}):p(a)?ve(xi,r,{operator:"||",left:l(o.negate(n)),right:i}):d(a)?ve(xi,r,{operator:"&&",left:l(o),right:i}):(n.option("typeofs")&&nn(o,i,a),r);function l(e){return e.is_boolean(n)?e:ve(yi,e,{operator:"!",expression:e.negate(n)})}function p(e){return e instanceof hr||u&&e instanceof tr&&e.value||e instanceof yi&&"!"==e.operator&&e.expression instanceof tr&&!e.expression.value}function d(e){return e instanceof dr||u&&(e instanceof tr&&!e.value||e instanceof yi&&"void"==e.operator&&!e.expression.has_side_effects(n))||e instanceof yi&&"!"==e.operator&&e.expression instanceof tr&&e.expression.value}function h(e,n){var t=e.args,i=n.args,r=t.length;if(r!=i.length)return-2;for(var o=0;o<r;o++)if(!t[o].equivalent_to(i[o])){if(t[o]instanceof gi!=i[o]instanceof gi)return-3;for(var a=o+1;a<r;a++)if(!t[a].equivalent_to(i[a]))return-2;return o}return-1}function v(e,n){if(e.TYPE==n.TYPE&&e.optional==n.optional){if(e instanceof li)return-1!=h(e,n)?void 0:"Call"!=e.TYPE||!(e.expression instanceof vi||n.expression instanceof vi)||v(e.expression,n.expression);if(e instanceof vi){var t=e.property,i=n.property;return(t instanceof Wn?t.equivalent_to(i):t==i)&&!(e.expression instanceof Qi||n.expression instanceof Qi)}}}function m(e){return e===e.tail_node()||Bn(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(n)})}function _(e){if(!(e instanceof di))return e.right;var n=e.expressions.slice();return n.push(n.pop().right),J(e,n)}function g(e){return e instanceof di?J(e,e.expressions.slice(0,-1)):ve(rr,e,{value:0})}}),e(pr,function(e,n){if(!n.option("booleans"))return e;if(n.in_boolean_context())return ve(rr,e,{value:+e.value});n=n.parent();return n instanceof xi&&("=="==n.operator||"!="==n.operator)?(Wn.warn("Non-strict equality against boolean: {operator} {value} [{file}:{line},{col}]",{operator:n.operator,value:e.value,file:n.start.file,line:n.start.line,col:n.start.col}),ve(rr,e,{value:+e.value})):ve(yi,e,{operator:"!",expression:ve(rr,e,{value:1-e.value})})}),e(gi,function(e,n){var t=e.expression;return n.option("spreads")&&t instanceof Ai&&!(n.parent()instanceof qi)?Nn.splice(t.elements.map(function(e){return e instanceof ur?ve(cr,e).optimize(n):e})):e}),e(_i,function(e,t){var n=e.expression,i=e.property,r=ln(e,t);if(r)return r;if(t.option("properties")){var o=i.evaluate(t);if(o!==i){"string"==typeof o&&("undefined"==o?o=void 0:(m=parseFloat(o)).toString()==o&&(o=m));var i=e.property=ne(i,X(o,i).transform(t)),a=""+o;if(_r(a)&&a.length<=i.print_to_string().length+1)return ve(mi,e,{optional:e.optional,expression:n,property:a}).optimize(t)}}var s,f,c,u,l=t.parent(),r=Er(t.self(),l);if(t.option("arguments")&&n instanceof Ji&&ue(s=n.definition())&&!n.in_arg&&i instanceof rr&&Math.floor(h=i.value)==h&&(f=s.scope)===function(){var e,n=0;for(;e=t.parent(n++);)if(e instanceof mt){if(e instanceof _t)return;if(!bt(e))return c=t.parent(n),e}}()&&f.uses_arguments<(r?2:3)){l instanceof yi&&"delete"==l.operator&&(s.deleted||(s.deleted=[]),s.deleted[h]=!0);var p=f.argnames[h];if(s.deleted&&s.deleted[h])p=null;else if(p)(!(p instanceof Li&&"await"!=p.name&&n.scope.find_variable(p.name)===(d=p.definition()))||(t.has_directive("use strict")||f.name||f.rest||!(c instanceof li&&h<c.args.length&&Bn(c.args.slice(0,h+1),function(e){return!(e instanceof gi)}))||!Bn(f.argnames,function(e){return e instanceof Li}))&&(w()||d.assignments||1<d.orig.length))&&(p=null);else if((r||!w())&&h<f.argnames.length+5&&t.drop_fargs(f,c)&&!f.rest)for(;h>=f.argnames.length;)p=f.make_var(Li,f,"argument_"+f.argnames.length),f.argnames.push(p);if(p&&qn(function(e){return e.name===p.name},f.argnames)===p){r&&s.reassigned--;var d=ve(Ji,e,p);return d.reference(),delete p.__unused,d}}if(r)return e;if(t.option("sequences")&&"Call"!=l.TYPE&&!(l instanceof ut&&l.init===e)){l=pn(e);if(l!==e)return l.optimize(t)}if(o===i||(v=e.flatten_object(a,t))&&(n=e.expression=v.expression,i=e.property=v.property),t.option("properties")&&t.option("side_effects")&&i instanceof rr&&n instanceof Ai&&Bn(u=n.elements,function(e){return!(e instanceof gi)})){var h,v=u[h=i.value];if(On(v,t)){for(var m,_=v instanceof ur,g=!_,b=[],y=u.length;--y>h;)(m=u[y].drop_side_effect_free(t))&&(b.unshift(m),g&&m.has_side_effects(t)&&(g=!1));for(g||b.unshift(v);0<=--y;)(m=u[y].drop_side_effect_free(t))?b.unshift(m):_?b.unshift(ve(ur,u[y])):h--;return g?(b.push(v),J(e,b).optimize(t)):ve(_i,e,{expression:ve(Ai,n,{elements:b}),property:ve(rr,i,{value:h})})}}return ae(t,e);function w(){return!t.option("reduce_vars")||s.reassigned}}),kt.DEFMETHOD("contains_super",Mn),Et.DEFMETHOD("contains_super",Mn),mt.DEFMETHOD("contains_super",function(){var n,t=this;return t.walk(new vr(function(e){return!!n||(e instanceof Qi?n=!0:e!==t&&e instanceof ht&&!bt(e)||void 0)})),n}),Ot.DEFMETHOD("contains_super",Mn),ht.DEFMETHOD("contains_super",Mn),kt.DEFMETHOD("contains_this",Mn),Et.DEFMETHOD("contains_this",Mn),Wn.DEFMETHOD("contains_this",function(){var n,t=this;return t.walk(new vr(function(e){return!!n||(e instanceof Zi?n=!0:e!==t&&e instanceof ht&&!bt(e)||void 0)})),n}),vi.DEFMETHOD("flatten_object",function(e,n){if(n.option("properties")&&"__proto__"!==e){var t=this.expression;if(t instanceof qi)for(var i=t.properties,r=i.length;0<=--r;){var o=i[r];if(o.key===e){if(!Bn(i,$n))break;if(!On(o.value,n))break;if(i=i.map(function(e){return e.value}),o instanceof Fi&&o.value instanceof At&&!(n.parent()instanceof li)){if(o.value.uses_arguments)break;i[r]=ve(kt,o.value,o.value)}return ve(_i,this,{expression:ve(Ai,t,{elements:i}),property:ve(rr,this,{value:r})})}}}}),e(mi,function(e,n){"arguments"!=e.property&&"caller"!=e.property||Wn.warn("Function.prototype.{prop} not supported [{file}:{line},{col}]",{prop:e.property,file:e.start.file,line:e.start.line,col:e.start.col});var t=n.parent();if(Er(n.self(),t))return e;var i=ln(e,n);if(i)return i;if(n.option("sequences")&&"Call"!=t.TYPE&&!(t instanceof ut&&t.init===e)){var r=pn(e);if(r!==e)return r.optimize(n)}if(n.option("unsafe_proto")&&e.expression instanceof mi&&"prototype"==e.expression.property){var o=e.expression.expression;if(ge(o))switch(o.name){case"Array":e.expression=ve(Ai,e.expression,{elements:[]});break;case"Function":e.expression=ve(At,e.expression,{argnames:[],body:[]}).init_vars(o.scope);break;case"Number":e.expression=ve(rr,e.expression,{value:0});break;case"Object":e.expression=ve(qi,e.expression,{properties:[]});break;case"RegExp":e.expression=ve(ar,e.expression,{value:/t/});break;case"String":e.expression=ve(ir,e.expression,{value:""})}}r=e.flatten_object(e.property,n);return r?r.optimize(n):ae(n,e)}),e(Oi,function(e,n){return n.option("rests")&&e.rest instanceof Oi?ve(Oi,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),e($i,function(e,n){var t;return!n.option("objects")||(t=e.key)instanceof Wn&&(t=t.evaluate(n))!==e.key&&(e.key=""+t),e}),e(qi,function(t,i){if(!i.option("objects"))return t;var e,r=!1,o=!1,a=!1,s=i.has_directive("use strict"),f=new Ln,c=[];return t.properties.forEach(function(e){if(!(e instanceof gi))return l(e);o=!0;var n=e.expression;i.option("spreads")&&n instanceof qi&&Bn(n.properties,function(e){return!(e instanceof Pi)&&(!(e instanceof gi)&&("__proto__"!==e.key||(e instanceof ji||!e.value.has_side_effects(i))))})?(r=!0,n.properties.forEach(function(e){var n=e.key,t=e instanceof ji;if("__proto__"===n){if(!t)return;n=X(n,e)}l(t?ve(Mi,e,{key:n,value:ve(cr,e).optimize(i)}):e)})):(a=!0,u(),c.push(e))}),u(),r?(o&&a&&1==c.length&&((e=c[0])instanceof Ci&&e.key instanceof rr&&(e.key=""+e.key.value)),ve(qi,t,{properties:c})):t;function u(){f.each(function(e){if(1==e.length)return c.push(e[0]);r=!0;var n=s&&!a&&e.pop();c.push(1==e.length?e[0]:ve(Mi,t,{key:e[0].key,value:J(t,e.map(function(e){return e.value}))})),n&&c.push(n)}),f=new Ln}function l(e){var n=e.key;n instanceof Wn&&(o=!0,(n=n.evaluate(i))===e.key||"__proto__"===n?a=!0:n=e.key=""+n),$n(e)?(e.value.has_side_effects(i)&&u(),f.add(n,e)):(u(),c.push(e)),o&&!a&&"string"==typeof n&&p.test(n)&&(a=!0,(e=f.has(n)?f.get(n)[0]:e).key=ve(rr,e,{value:+n}))}}),e(Rt,function(e,n){return n.option("side_effects")&&e.value&&ye(e.value,n)&&!z(n.find_parent(ht))&&(e.value=null),e})}(function(e,n){e.DEFMETHOD("optimize",function(e){if(this._optimized)return this;if(e.has_directive("use asm"))return this;e=n(this,e);return e._optimized=!0,e})}),function(){function e(e,n){e.DEFMETHOD("_codegen",n)}var a=!1;Wn.DEFMETHOD("print",function(e,n){var t=this;function i(){e.prepend_comments(t),t.add_source_map(e),t._codegen(e),e.append_comments(t)}e.push_node(t),n||t.needs_parens(e)?e.with_parens(i):i(),e.pop_node()});var n=Tr({inline_script:!1,shebang:!1,width:!1});function t(e,n){e.DEFMETHOD("needs_parens",n)}function i(e){var n=e.parent();return!e.has_parens()&&Vn(e,!1,!0)?this.name||!(n instanceof si):!!(e.option("webkit")&&n instanceof vi&&n.expression===this)||(!!(e.option("wrap_iife")&&n instanceof li&&n.expression===this)||void 0)}function r(e){return!e.has_parens()&&Vn(e,!0)}function o(e){e=e.parent();return e instanceof xi?"**"==e.operator&&e.left===this:e instanceof li?e.expression===this:e instanceof Mt||(e instanceof vi?e.expression===this:e instanceof nr?e.tag===this:void 0)}function s(e,n){return!!e.terminal&&((n instanceof li||n instanceof vi)&&n.expression===e)}function f(e,n){n=n.parent();return n instanceof Si||(n instanceof xi?!(n instanceof Ei):n instanceof li?n.expression===e:n instanceof Mt||(n instanceof ki?n.condition===e:n instanceof vi?n.expression===e:n instanceof nr?n.tag===e:n instanceof bi||void 0))}function c(e,t,i,n){var r=e.length-1,o=n,n=a;e.forEach(function(e,n){o&&(e instanceof Xn?"use asm"==e.value&&(a=!0):e instanceof Kn||(e instanceof Zn&&e.body instanceof ir&&i.force_semicolon(),o=!1)),e instanceof Kn||(i.indent(),e.print(i),n==r&&t||(i.newline(),t&&i.newline()))}),a=n}function u(e,n){n.print("{"),n.with_indent(function(){n.append_comments(e,!0)}),n.print("}")}function l(e,n,t){0<e.body.length?n.with_block(function(){c(e.body,!1,n,t)}):u(e,n)}function p(t,i){return function(e){var n=this;e.print(t),e.space(),e.with_parens(function(){n.init.print(e),e.space(),e.print(i),e.space(),n.object.print(e)}),$(n.body,e)}}function d(e,t){t.with_parens(function(){e.argnames.forEach(function(e,n){n&&t.comma(),e.print(t)}),e.rest&&(e.argnames.length&&t.comma(),t.print("..."),e.rest.print(t))})}function h(e,n){1==e.argnames.length&&e.argnames[0]instanceof Li&&!e.rest?e.argnames[0].print(n):d(e,n),n.space(),n.print("=>"),n.space(),e.value?e.value.print(n):l(e,n,!0)}function v(e,n){e.name&&(n.space(),e.name.print(n)),d(e,n),n.space(),l(e,n,!0)}function m(e){e.print("async"),e.space(),e.print("function"),v(this,e)}function _(e){e.print("async"),e.space(),e.print("function*"),v(this,e)}function g(e){e.print("function*"),v(this,e)}function b(e,n){var t=e.value;yt(t)&&(n.print("async"),n.space()),wt(t)&&n.print("*"),A(e,n),v(e.value,n)}function y(t,i){return function(e){e.print(t);var n=this[i];n&&(e.space(),n.print(e)),e.semicolon()}}function w(e,n){n.newline(),e.body.forEach(function(e){n.indent(),e.print(n),n.newline()})}function x(n){return function(t){t.print(n),t.space(),this.definitions.forEach(function(e,n){n&&t.comma(),e.print(t)});var e=t.parent();e instanceof ot&&e.init===this||t.semicolon()}}function k(e,n,t){var i=!1;t&&e.walk(new vr(function(e){return!!i||(e instanceof xi&&"in"==e.operator?i=!0:e instanceof ht&&(!bt(e)||!e.value)||void 0)})),e.print(n,i)}function E(e,n){if(n.option("annotations")&&e.pure){var t,i=0,r=e;do{if(t=r,(r=n.parent(i++))instanceof li&&r.expression===t)return}while(r instanceof vi&&r.expression===t);n.print("string"==typeof e.pure?"/*"+e.pure+"*/":"/*@__PURE__*/")}}function S(e,t){(e.expression instanceof li||e.expression instanceof mt)&&t.add_mapping(e.start),t.with_parens(function(){e.args.forEach(function(e,n){n&&t.comma(),e.print(t)})})}function T(e,t,i){var n=e.properties;0<n.length?t.with_block(function(){n.forEach(function(e,n){n&&(i||t.print(","),t.newline()),t.indent(),e.print(t)}),t.newline()}):u(e,t)}function A(e,n){var t=e.key;if(t instanceof Wn)return n.with_square(function(){t.print(n)});var i=e.start&&e.start.quote;if(n.option("quote_keys")||i&&n.option("keep_quoted_props"))n.print_string(t,i);else if(""+ +t==t&&0<=t)n.print(q(t));else if(e.private)n.print_name(t);else{if(j[t]?!n.option("ie"):_r(t))return n.print_name(t),t;n.print_string(t,i)}}function D(n){return function(e){this.static&&(e.print("static"),e.space()),e.print(n),e.space(),A(this,e),v(this.value,e)}}function O(e){var n=e.definition();return n&&n.mangled_name||e.name}function $(e,n){n.option("braces")&&!(e instanceof ti||e instanceof ii)?C(e,n):e instanceof Kn?n.force_semicolon():(n.space(),e.print(n))}function z(e,n){return 0<e.args.length||n.option("beautify")}function q(e){var n,t,i=e.toString(10).replace(/^0\./,".").replace("e+","e"),r=[i];return Math.floor(e)===e&&(e<0?r.push("-0x"+(-e).toString(16).toLowerCase()):r.push("0x"+e.toString(16).toLowerCase())),(n=/^\.0+/.exec(i))?(t=n[0].length,e=i.slice(t),r.push(e+"e-"+(e.length+t-1))):(n=/0+$/.exec(i))?(t=n[0].length,r.push(i.slice(0,-t)+"e"+t)):(n=/^(\d)\.(\d+)e(-?\d+)$/.exec(i))&&r.push(n[1]+n[2]+"e"+(n[3]-n[2].length)),function(e){for(var n=e[0],t=n.length,i=1;i<e.length;++i)e[i].length<t&&(t=(n=e[i]).length);return n}(r)}function C(e,n){n.space(),e instanceof Kn?u(e,n):e instanceof it?e.print(n):n.with_block(function(){n.indent(),e.print(n),n.newline()})}function M(e,n){e.forEach(function(e){e.DEFMETHOD("add_source_map",n)})}Wn.DEFMETHOD("print_to_string",function(e){if(e){e=Tr(e);return this.print(e),e.get()}return this.print(n),n.reset()}),t(Wn,Mn),t(St,i),t(Tt,i),t(jt,i),t(At,i),t(Dt,i),t(qi,r),t(Si,o),t(bi,o),t(di,function(e){e=e.parent();return e instanceof Ai||bt(e)&&e.value===this||e instanceof Si||e instanceof xi||e instanceof li||e instanceof Mt||e instanceof Pt||e instanceof ki||e instanceof ui||e instanceof $i||e instanceof si||e instanceof oe||e instanceof Ci||e instanceof vi&&e.expression===this||e instanceof gi||e instanceof nr&&e.tag===this||e instanceof bi||e instanceof oi||e instanceof Ti}),t(xi,function(e){var n=e.parent();if(n instanceof Si)return!0;if(n instanceof xi){var t=n.operator,i=wr[t],r=this.operator,e=wr[r];return e<i||"??"==t&&("&&"==r||"||"==r)||i==e&&this===n["**"==t?"left":"right"]}return n instanceof li?n.expression===this:n instanceof Mt||(n instanceof vi?n.expression===this:n instanceof nr?n.tag===this:n instanceof bi||void 0)}),t(vi,function(e){e=e.parent();return e instanceof pi&&e.expression===this&&"Call"==hi(this).TYPE||s(this,e)}),t(li,function(e){var n=e.parent();if(n instanceof pi)return n.expression===this;if(e.option("webkit")&&this.expression instanceof At&&n instanceof vi&&n.expression===this){e=e.parent(1);if(e instanceof Ei&&e.left===n)return!0}return s(this,n)}),t(pi,function(e){if(z(this,e))return!1;e=e.parent();return e instanceof li?e.expression===this:e instanceof vi||(e instanceof nr?e.tag===this:void 0)}),t(rr,function(e){if(!e.option("galio"))return!1;e=e.parent();return e instanceof vi&&e.expression===this&&/^0/.test(q(this.value))}),t(kt,function(e){return f(this,e)}),t(Ei,function(e){return!!f(this,e)||(e.option("v8")?this.left instanceof Di:this.left instanceof zi?r(e):void 0)}),t(Et,function(e){return f(this,e)}),t(ki,function(e){return f(this,e)}),t(Ti,function(e){return f(this,e)}),e(Xn,function(e){var n=this.quote,t=this.value;switch(e.option("quote_style")){case 0:case 2:-1==t.indexOf('"')&&(n='"');break;case 1:-1==t.indexOf("'")&&(n="'")}e.print(n+t+n),e.semicolon()}),e(Jn,function(e){e.print("debugger"),e.semicolon()}),e(vt,function(e){c(this.body,!0,e,!0),e.print("")}),e(rt,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(Zn,function(e){this.body.print(e),e.semicolon()}),e(it,function(e){l(this,e)}),e(Kn,function(e){e.semicolon()}),e(st,function(e){var n=this;e.print("do"),C(n.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.semicolon()}),e(ft,function(e){var n=this;e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),$(n.body,e)}),e(ct,function(e){var n=this;e.print("for"),e.space(),e.with_parens(function(){n.init?(n.init instanceof ni?n.init.print(e):k(n.init,e,!0),e.print(";"),e.space()):e.print(";"),n.condition?(n.condition.print(e),e.print(";"),e.space()):e.print(";"),n.step&&n.step.print(e)}),$(n.body,e)}),e(pt,p("for await","of")),e(lt,p("for","in")),e(oe,p("for","of")),e(dt,function(e){var n=this;e.print("with"),e.space(),e.with_parens(function(){n.expression.print(e)}),$(n.body,e)}),e(ai,function(e){e.print("export"),e.space(),this.body.print(e)}),e(si,function(e){e.print("export"),e.space(),e.print("default"),e.space();var n=this.body;n.print(e),n instanceof jt&&!n.name||n instanceof Ft||n instanceof Ot||n instanceof gt&&!n.name&&!bt(n)||e.semicolon()}),e(fe,function(t){var i=this;t.print("export"),t.space();var n=i.keys.length;function r(e){var n=i.aliases[e],e=i.keys[e];t.print_name(e),n!=e&&(t.space(),t.print("as"),t.space(),t.print_name(n))}0==n?u(i,t):"*"==i.keys[0]?r(0):t.with_block(function(){t.indent(),r(0);for(var e=1;e<n;e++)t.print(","),t.newline(),t.indent(),r(e);t.newline()}),t.space(),t.print("from"),t.space(),t.print_string(i.path,i.quote),t.semicolon()}),e(fi,function(e){e.print("export"),e.space(),T(this,e),e.semicolon()}),e(ci,function(e){var n=this;e.print("import"),e.space(),n.default&&n.default.print(e),n.all&&(n.default&&e.comma(),n.all.print(e)),n.properties&&(n.default&&e.comma(),T(n,e)),(n.all||n.default||n.properties)&&(e.space(),e.print("from"),e.space()),e.print_string(n.path,n.quote),e.semicolon()}),e(kt,function(e){h(this,e)}),e(Et,function(e){e.print("async"),e.space(),h(this,e)}),e(mt,function(e){e.print("function"),v(this,e)}),e($t,m),e(St,m),e(zt,_),e(Tt,_),e(Ct,g),e(Dt,g),e(Mt,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),T(this,e,!0)}),e(Nt,function(e){this.static&&(e.print("static"),e.space()),A(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(ae,D("get")),e(se,D("set")),e(It,function(e){this.static&&(e.print("static"),e.space()),b(this,e)}),e(Rt,y("return","value")),e(Bt,y("throw","value")),e(Ut,y("break","label")),e(Vt,y("continue","label")),e(Wt,function(e){var n=this;e.print("if"),e.space(),e.with_parens(function(){n.condition.print(e)}),n.alternative?(function(e,n){var t=e.body;if(n.option("braces")&&!(t instanceof ti||t instanceof ii)||n.option("ie")&&t instanceof st)return C(t,n);if(!t)return n.force_semicolon();for(;;)if(t instanceof Wt){if(!t.alternative)return C(e.body,n);t=t.alternative}else{if(!(t instanceof F))break;t=t.body}$(e.body,n)}(n,e),e.space(),e.print("else"),n.alternative instanceof Wt?(e.space(),n.alternative.print(e)):$(n.alternative,e)):$(n.body,e)}),e(Gt,function(t){var e=this;t.print("switch"),t.space(),t.with_parens(function(){e.expression.print(t)}),t.space();var i=e.body.length-1;i<0?u(e,t):t.with_block(function(){e.body.forEach(function(e,n){t.indent(!0),e.print(t),n<i&&0<e.body.length&&t.newline()})})}),e(Xt,function(e){e.print("default:"),w(this,e)}),e(Kt,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),w(this,e)}),e(Qt,function(e){e.print("try"),e.space(),l(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(Zt,function(e){var n=this;e.print("catch"),n.argname&&(e.space(),e.with_parens(function(){n.argname.print(e)})),e.space(),l(n,e)}),e(ei,function(e){e.print("finally"),e.space(),l(this,e)}),e(ti,x("const")),e(ii,x("let")),e(ri,x("var")),e(oi,function(e){var n;this.name.print(e),this.value&&(e.space(),e.print("="),e.space(),n=(n=e.parent(1))instanceof ct||n instanceof ut,k(this.value,e,n))}),e(ui,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(li,function(e){E(this,e),this.expression.print(e),this.optional&&e.print("?."),S(this,e)}),e(pi,function(e){E(this,e),e.print("new"),e.space(),this.expression.print(e),z(this,e)&&S(this,e)}),e(di,function(t){this.expressions.forEach(function(e,n){0<n&&(t.comma(),t.should_break()&&(t.newline(),t.indent())),e.print(t)})}),e(mi,function(e){var n=this.expression;n.print(e);var t=this.property;e.option("ie")&&j[t]?(e.print(this.optional?"?.[":"["),e.add_mapping(this.end),e.print_string(t),e.print("]")):(n instanceof rr&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(this.optional?"?.":"."),e.add_mapping(this.end),e.print_name(t))}),e(_i,function(e){this.expression.print(e),e.print(this.optional?"?.[":"["),this.property.print(e),e.print("]")}),e(gi,function(e){e.print("..."),this.expression.print(e)}),e(yi,function(e){var n=this.operator,t=this.expression;e.print(n),(/^[a-z]/i.test(n)||/[+-]$/.test(n)&&t instanceof yi&&/^[+-]/.test(t.operator))&&e.space(),t.print(e)}),e(wi,function(e){this.expression.print(e),e.print(this.operator)}),e(xi,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(ki,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(Si,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(Ti,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(Ai,function(t){var e=this.elements,i=e.length;t.with_square(0<i?function(){t.space(),e.forEach(function(e,n){n&&t.comma(),e.print(t),n===i-1&&e instanceof ur&&t.comma()}),t.space()}:Cn)}),e(Oi,function(t){var e=this.elements,n=e.length,i=this.rest;t.with_square(n||i?function(){t.space(),e.forEach(function(e,n){n&&t.comma(),e.print(t)}),i?(n&&t.comma(),t.print("..."),i.print(t)):e[n-1]instanceof ur&&t.comma(),t.space()}:Cn)}),e($i,function(e){var n=A(this,e),t=this.value;if(n)if(t instanceof ui){if(t.name instanceof Ni&&n==O(t.name))return e.space(),e.print("="),e.space(),void t.value.print(e)}else if(t instanceof Ni&&n==O(t))return;e.colon(),t.print(e)}),e(zi,function(t){var e=this.properties,n=e.length,i=this.rest;n||i?t.with_block(function(){e.forEach(function(e,n){n&&(t.print(","),t.newline()),t.indent(),e.print(t)}),i&&(n&&(t.print(","),t.newline()),t.indent(),t.print("..."),i.print(t)),t.newline()}):u(this,t)}),e(qi,function(e){T(this,e)}),e(Mi,function(e){A(this,e),e.colon(),this.value.print(e)}),e(Fi,function(e){b(this,e)}),e(Pi,D("get")),e(ji,D("set")),e(Ni,function(e){e.print_name(O(this))}),e(Xi,function(e){var n=O(this);e.print_name(n);var t=this.alias;t!=n&&(e.space(),e.print("as"),e.space(),e.print_name(t))}),e(Yi,function(e){var n=O(this),t=this.key;t&&t!=n&&(e.print_name(t),e.space(),e.print("as"),e.space()),e.print_name(n)}),e(ur,Cn),e(nr,function(e){this.tag&&this.tag.print(e),e.print("`");for(var n=0;n<this.expressions.length;n++)e.print(this.strings[n]),e.print("${"),this.expressions[n].print(e),e.print("}");e.print(this.strings[n]),e.print("`")}),e(tr,function(e){e.print(""+this.value)}),e(ir,function(e){e.print_string(this.value,this.quote)}),e(rr,function(e){var n=this.start;a&&n&&null!=n.raw?e.print(n.raw):e.print(q(this.value))}),e(ar,function(e){var n=this.value,t=n.toString(),i=t.lastIndexOf("/");n.raw_source?t="/"+n.raw_source+t.slice(i):1==i?t="/(?:)"+t.slice(i):t.indexOf("/",1)<i&&(t="/"+t.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+t.slice(i)),e.print(e.to_utf8(t).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}));t=e.parent();t instanceof xi&&/^in/.test(t.operator)&&t.left===this&&e.print(" ")}),M([Wn,rt],Cn),M([Ai,it,Zt,tr,Jn,ni,Di,ei,Ht,mt,pi,qi,F,Ni,Gt,Jt,Qt],function(e){e.add_mapping(this.start)}),M([Pt,$i,Ci],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)})}();var X=e("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),K=X.reduce(function(e,n,t){return e[n]=t,e},Object.create(null));function Q(e){var n="";e=Math.abs(e)<<1|e>>>31;do{var t=31&e}while((e>>>=5)&&(t|=32),n+=X[t],e);return n}function Z(){var n=Object.create(null),t=[];return t.index=function(e){return Un(n,e)||(n[e]=t.length,t.push(e)),n[e]},t}function ee(l){var a,s=Z(),o=l.includeSources&&Object.create(null),f=Z(),c="";l.orig&&Object.keys(l.orig).forEach(function(e){var n=l.orig[e],t=[0,0,1,0,0];if(l.orig[e]={names:n.names,mappings:n.mappings.split(/;/).map(function(e){return t[0]=0,e.split(/,/).map(function(e){return t.slice(0,function(e,n){for(var t=0,i=0,r=0,o=0;r<n.length;r++){var a=K[n[r]];t+=(31&a)<<i,32&a?i+=5:(e[o++]+=1&t?2147483648|-(t>>1):t>>1,t=i=0)}return o}(t,e))})}),sources:n.sources},o&&n.sourcesContent)for(var i=0;i<n.sources.length;i++){var r=n.sourcesContent[i];r&&(o[n.sources[i]]=r)}});var u=1,p=0,d=0,h=1,v=0,m=0;return{add:l.orig?function(e,n,t,i,r,o){var a=l.orig[e];if(a){var s,f=a.mappings[i-1];if(!f)return;for(var c=0;c<f.length;c++){var u=f[c][0];if(u<=r&&(s=f[c]),r<=u)break}!s||s.length<4?e=null:(e=a.sources[s[1]],i=s[2],r=s[3],4<s.length&&(o=a.names[s[4]]))}_(e,n,t,i,r,o)}:_,setSourceContent:o?function(e,n){e in o||(o[e]=n)}:Cn,toString:function(){return JSON.stringify({version:3,file:l.filename||void 0,sourceRoot:l.root||void 0,sources:s,sourcesContent:o?s.map(function(e){return o[e]||null}):void 0,names:f,mappings:c})}};function _(e,n,t,i,r,o){if(null!=a||null!=e){if(a=e,u<n)for(p=0;c+=";",++u<n;);else c&&(c+=",");c+=Q(t-p),p=t,null!=e&&(e=s.index(e),c+=Q(e-d),d=e,c+=Q(i-h),h=i,c+=Q(r-v),v=r,l.names&&null!=o&&(o=f.index(o),c+=Q(o-m),m=o))}}}!function(){var i={Program:function(e){return new vt({start:s(e),end:f(e),body:r(e.body.map(l))})},ArrowFunctionExpression:function(e){var n=[],t=null;e.params.forEach(function(e){"RestElement"==e.type?t=l(e.argument):n.push(l(e))});var i=new(e.async?Et:kt)({start:s(e),end:f(e),argnames:n,rest:t}),e=l(e.body);return e instanceof it?(i.body=r(e.body),i.value=null):(i.body=[],i.value=e),i},FunctionDeclaration:function(e){var n=e.async?e.generator?zt:$t:e.generator?Ct:qt,t=[],i=null;return e.params.forEach(function(e){"RestElement"==e.type?i=l(e.argument):t.push(l(e))}),new n({start:s(e),end:f(e),name:l(e.id),argnames:t,rest:i,body:r(l(e.body).body)})},FunctionExpression:function(e){var n=e.async?e.generator?Tt:St:e.generator?Dt:At,t=[],i=null;return e.params.forEach(function(e){"RestElement"==e.type?i=l(e.argument):t.push(l(e))}),new n({start:s(e),end:f(e),name:l(e.id),argnames:t,rest:i,body:r(l(e.body).body)})},ClassDeclaration:function(e){return new Ft({start:s(e),end:f(e),name:l(e.id),extends:l(e.superClass),properties:e.body.body.map(l)})},ClassExpression:function(e){return new jt({start:s(e),end:f(e),name:l(e.id),extends:l(e.superClass),properties:e.body.body.map(l)})},MethodDefinition:function(e){var n=e.key,t=!1,n=e.computed?l(n):"PrivateIdentifier"==n.type?(t=!0,"#"+n.name):a(n),i=It,r=l(e.value);switch(e.kind){case"get":i=ae,r=new _t(r);break;case"set":i=se,r=new _t(r)}return new i({start:s(e),end:f(e),key:n,private:t,static:e.static,value:r})},PropertyDefinition:function(e){var n=e.key,t=!1,n=e.computed?l(n):"PrivateIdentifier"==n.type?(t=!0,"#"+n.name):a(n);return new Nt({start:s(e),end:f(e),key:n,private:t,static:e.static,value:l(e.value)})},ForOfStatement:function(e){return new(e.await?pt:oe)({start:s(e),end:f(e),init:l(e.left),object:l(e.right),body:l(e.body)})},TryStatement:function(e){var n=e.handlers||[e.handler];if(1<n.length||e.guardedHandlers&&e.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new Qt({start:s(e),end:f(e),body:l(e.block).body,bcatch:l(n[0]),bfinally:e.finalizer?new ei(l(e.finalizer)):null})},Property:function(e){var n=(e.computed?l:a)(e.key),n={start:s(e),end:f(e),key:n,value:l(e.value)};return"init"==e.kind?new(e.method?Fi:Mi)(n):(n.value=new _t(n.value),"get"==e.kind?new Pi(n):"set"==e.kind?new ji(n):void 0)},ArrayExpression:function(e){return new Ai({start:s(e),end:f(e),elements:e.elements.map(function(e){return null===e?new ur:l(e)})})},ArrayPattern:function(e){var n=[],t=null;return e.elements.forEach(function(e){null===e?n.push(new ur):"RestElement"==e.type?t=l(e.argument):n.push(l(e))}),new Oi({start:s(e),end:f(e),elements:n,rest:t})},ObjectPattern:function(e){var n=[],t=null;return e.properties.forEach(function(e){"RestElement"==e.type?t=l(e.argument):n.push(new $i(l(e)))}),new zi({start:s(e),end:f(e),properties:n,rest:t})},MemberExpression:function(e){return new(e.computed?_i:mi)({start:s(e),end:f(e),optional:e.optional,expression:l(e.object),property:e.computed?l(e.property):e.property.name})},MetaProperty:function(e){var n=l(e.meta),t=a(e.property);return"new"==n.name&&"target"==t?new er({start:s(e),end:f(e),name:"new.target"}):new mi({start:s(e),end:f(e),expression:n,property:t})},SwitchCase:function(e){return new(e.test?Kt:Xt)({start:s(e),end:f(e),expression:l(e.test),body:e.consequent.map(l)})},ExportAllDeclaration:function(e){var n=e.exported?a(e.exported):"*";return new fe({start:s(e),end:f(e),aliases:[n],keys:["*"],path:e.source.value})},ExportDefaultDeclaration:function(e){var n=l(e.declaration);if(!n.name)switch(n.CTOR){case $t:n=new St(n);break;case zt:n=new Tt(n);break;case Ft:n=new jt(n);break;case qt:n=new At(n);break;case Ct:n=new Dt(n)}return new si({start:s(e),end:f(e),body:n})},ExportNamedDeclaration:function(e){if(e.declaration)return new ai({start:s(e),end:f(e),body:l(e.declaration)});if(e.source){var n=[],t=[];return e.specifiers.forEach(function(e){n.push(a(e.exported)),t.push(a(e.local))}),new fe({start:s(e),end:f(e),aliases:n,keys:t,path:e.source.value})}return new fi({start:s(e),end:f(e),properties:e.specifiers.map(function(e){var n=new Xi(l(e.local));return n.alias=a(e.exported),n})})},ImportDeclaration:function(e){var t=null,i=null,r=null;return e.specifiers.forEach(function(e){var n=new Yi(l(e.local));switch(e.type){case"ImportDefaultSpecifier":(i=n).key="";break;case"ImportNamespaceSpecifier":(t=n).key="*";break;default:n.key=e.imported.name||syn.name,(r=r||[]).push(n)}}),new ci({start:s(e),end:f(e),all:t,default:i,properties:r,path:e.source.value})},ImportExpression:function(e){var n=s(e),t=l(e.source);return new li({start:n,end:f(e),expression:new Ji({start:n,end:t.start,name:"import"}),args:[t]})},VariableDeclaration:function(e){return new({const:ti,let:ii}[e.kind]||ri)({start:s(e),end:f(e),definitions:e.declarations.map(l)})},Literal:function(e){var n={start:s(e),end:f(e)};if(e.bigint)return n.value=e.bigint.toLowerCase()+"n",new or(n);var t=e.value;if(null===t)return new sr(n);var i=e.regex;if(i&&i.pattern)return n.value=new RegExp(i.pattern,i.flags),n.value.raw_source=i.pattern,new ar(n);if(i)return n.value=e.regex&&e.raw?e.raw:t,new ar(n);switch(typeof t){case"string":return n.value=t,new ir(n);case"number":if(isNaN(t))return new fr(n);var r,o=isFinite(t)?(n.value=(r=1/t<0)?-t:t,new rr(n)):(r=t<0,new lr(n));return r?new yi({start:n.start,end:n.end,operator:"-",expression:o}):o;case"boolean":return new(t?hr:dr)(n)}},TemplateLiteral:function(e){return new nr({start:s(e),end:f(e),expressions:e.expressions.map(l),strings:e.quasis.map(function(e){return e.value.raw})})},TaggedTemplateExpression:function(e){var n=l(e.quasi);return n.start=s(e),n.end=f(e),n.tag=l(e.tag),n},Identifier:function(e){for(var n,t=u.length-1;"ArrayPattern"==(n=u[--t]).type||"AssignmentPattern"==n.type&&n.left===u[t+1]||"ObjectPattern"==n.type||"Property"==n.type&&n.value===u[t+1]||"VariableDeclarator"==n.type&&n.id===u[t+1];);var i=Ji;switch(n.type){case"ArrowFunctionExpression":n.body!==u[t+1]&&(i=Li);break;case"BreakStatement":case"ContinueStatement":i=le;break;case"CatchClause":i=Gi;break;case"ClassDeclaration":n.id===u[t+1]&&(i=ce);break;case"ClassExpression":n.id===u[t+1]&&(i=Wi);break;case"FunctionDeclaration":i=n.id===u[t+1]?Ui:Li;break;case"FunctionExpression":i=n.id===u[t+1]?Vi:Li;break;case"LabeledStatement":i=ue;break;case"VariableDeclaration":i={const:Hi,let:Ri}[n.kind]||Bi}return new i({start:s(e),end:f(e),name:e.name})},Super:function(e){return new Qi({start:s(e),end:f(e),name:"super"})},ThisExpression:function(e){return new Zi({start:s(e),end:f(e),name:"this"})},ParenthesizedExpression:function(e){var n=l(e.expression);return n.start.parens||(n.start.parens=[]),n.start.parens.push(s(e)),n.end.parens||(n.end.parens=[]),n.end.parens.push(f(e)),n},ChainExpression:function(e){e=l(e.expression);return e.terminal=!0,e}};function e(i){return function(e){var n=e.key instanceof Wn,t=n?h(e.key):e.private?{type:"PrivateIdentifier",name:e.key.slice(1)}:{type:"Literal",value:e.key};return{type:"MethodDefinition",kind:i,computed:n,key:t,static:e.static,value:h(e.value)}}}function n(n){return function(e){return{type:"ForOfStatement",await:n,left:h(e.init),right:h(e.object),body:h(e.body)}}}function t(e){var n=e.value;return"number"==typeof n&&(n<0||0===n&&1/n<0)?{type:"UnaryExpression",operator:"-",prefix:!0,argument:{type:"Literal",value:-n,raw:e.start.raw}}:{type:"Literal",value:n,raw:e.start.raw}}function r(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof Zn))break;var i=t.body;if(!(i instanceof ir))break;if(t.start.pos!==i.start.pos)break;e[n]=new Xn(i)}return e}function o(e){if("Literal"==e.type)return null!=e.raw?e.raw:e.value+""}function s(e){var n=e.loc,t=n&&n.start,i=e.range;return new Y({file:n&&n.source,line:t&&t.line,col:t&&t.column,pos:i?i[0]:e.start,endline:t&&t.line,endcol:t&&t.column,endpos:i?i[0]:e.start,raw:o(e)})}function f(e){var n=e.loc,t=n&&n.end,i=e.range;return new Y({file:n&&n.source,line:t&&t.line,col:t&&t.column,pos:i?i[1]:e.end,endline:t&&t.line,endcol:t&&t.column,endpos:i?i[1]:e.end,raw:o(e)})}function a(e){return""+e["Identifier"==e.type?"name":"value"]}function c(e,n,t){var o=["start: my_start_token(M)","end: my_end_token(M)"],a=["type: "+JSON.stringify(e)];t&&t.split(/\s*,\s*/).forEach(function(e){var n=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(e);if(!n)throw new Error("Can't understand property map: "+e);var t=n[1],i=n[2],r=n[3];switch(i){case"@":o.push(r+": M."+t+".map(from_moz)"),a.push(t+": M."+r+".map(to_moz)");break;case">":o.push(r+": from_moz(M."+t+")"),a.push(t+": to_moz(M."+r+")");break;case"=":o.push(r+": M."+t),a.push(t+": M."+r);break;case"%":o.push(r+": from_moz(M."+t+").body"),a.push(t+": to_moz_block(M)");break;default:throw new Error("Can't understand operator in propmap: "+e)}}),i[e]=new Function("U2","my_start_token","my_end_token","from_moz",["return function From_Moz_"+e+"(M) {","    return new U2.AST_"+n.TYPE+"({",o.join(",\n"),"    });","};"].join("\n"))(_,s,f,l),d(n,new Function("to_moz","to_moz_block","to_moz_scope",["return function To_Moz_"+e+"(M) {","    return {",a.join(",\n"),"    };","};"].join("\n"))(h,v,m))}i.UpdateExpression=i.UnaryExpression=function(e){return new(("prefix"in e?e.prefix:"UnaryExpression"==e.type)?yi:wi)({start:s(e),end:f(e),operator:e.operator,expression:l(e.argument)})},c("EmptyStatement",Kn),c("ExpressionStatement",Zn,"expression>body"),c("BlockStatement",it,"body@body"),c("IfStatement",Wt,"test>condition, consequent>body, alternate>alternative"),c("LabeledStatement",rt,"label>label, body>body"),c("BreakStatement",Ut,"label>label"),c("ContinueStatement",Vt,"label>label"),c("WithStatement",dt,"object>expression, body>body"),c("SwitchStatement",Gt,"discriminant>expression, cases@body"),c("ReturnStatement",Rt,"argument>value"),c("ThrowStatement",Bt,"argument>value"),c("WhileStatement",ft,"test>condition, body>body"),c("DoWhileStatement",st,"test>condition, body>body"),c("ForStatement",ct,"init>init, test>condition, update>step, body>body"),c("ForInStatement",lt,"left>init, right>object, body>body"),c("DebuggerStatement",Jn),c("VariableDeclarator",oi,"id>name, init>value"),c("CatchClause",Zt,"param>argname, body%body"),c("BinaryExpression",xi,"operator=operator, left>left, right>right"),c("LogicalExpression",xi,"operator=operator, left>left, right>right"),c("AssignmentExpression",Ei,"operator=operator, left>left, right>right"),c("AssignmentPattern",ui,"left>name, right>value"),c("ConditionalExpression",ki,"test>condition, consequent>consequent, alternate>alternative"),c("NewExpression",pi,"callee>expression, arguments@args, pure=pure"),c("CallExpression",li,"callee>expression, arguments@args, optional=optional, pure=pure"),c("SequenceExpression",di,"expressions@expressions"),c("SpreadElement",gi,"argument>expression"),c("ObjectExpression",qi,"properties@properties"),c("AwaitExpression",Si,"argument>expression"),c("YieldExpression",Ti,"argument>expression, delegate=nested"),d(vt,function(e){return m("Program",e)}),d(Ot,function(e){var n=e.argnames.map(h);return e.rest&&n.push({type:"RestElement",argument:h(e.rest)}),{type:"FunctionDeclaration",id:h(e.name),async:yt(e),generator:wt(e),params:n,body:m("BlockStatement",e)}}),d(mt,function(e){var n=e.argnames.map(h);return e.rest&&n.push({type:"RestElement",argument:h(e.rest)}),bt(e)?{type:"ArrowFunctionExpression",async:yt(e),params:n,body:e.value?h(e.value):m("BlockStatement",e)}:{type:"FunctionExpression",id:h(e.name),async:yt(e),generator:wt(e),params:n,body:m("BlockStatement",e)}}),d(Ft,function(e){return{type:"ClassDeclaration",id:h(e.name),superClass:h(e.extends),body:{type:"ClassBody",body:e.properties.map(h)}}}),d(jt,function(e){return{type:"ClassExpression",id:h(e.name),superClass:h(e.extends),body:{type:"ClassBody",body:e.properties.map(h)}}}),d(ae,e("get")),d(se,e("set")),d(It,e("method")),d(Nt,function(e){var n=e.key instanceof Wn;return{type:"PropertyDefinition",computed:n,key:n?h(e.key):e.private?{type:"PrivateIdentifier",name:e.key.slice(1)}:{type:"Literal",value:e.key},static:e.static,value:h(e.value)}}),d(pt,n(!0)),d(oe,n(!1)),d(Xn,function(e){return{type:"ExpressionStatement",expression:p(e,{type:"Literal",value:e.value})}}),d(Jt,function(e){return{type:"SwitchCase",test:h(e.expression),consequent:e.body.map(h)}}),d(Qt,function(e){return{type:"TryStatement",block:v(e),handler:h(e.bcatch),guardedHandlers:[],finalizer:h(e.bfinally)}}),d(Zt,function(e){return{type:"CatchClause",param:h(e.argname),guard:null,body:v(e)}}),d(ai,function(e){return{type:"ExportNamedDeclaration",declaration:h(e.body)}}),d(si,function(e){return{type:"ExportDefaultDeclaration",declaration:h(e.body)}}),d(fe,function(e){if("*"==e.keys[0])return{type:"ExportAllDeclaration",exported:"*"==e.aliases[0]?null:{type:"Identifier",name:e.aliases[0]},source:{type:"Literal",value:e.path}};for(var n=[],t=0;t<e.aliases.length;t++)n.push({type:"ExportSpecifier",exported:{type:"Identifier",name:e.aliases[t]},local:{type:"Identifier",name:e.keys[t]}});return{type:"ExportNamedDeclaration",specifiers:n,source:{type:"Literal",value:e.path}}}),d(fi,function(e){return{type:"ExportNamedDeclaration",specifiers:e.properties.map(function(e){return{type:"ExportSpecifier",local:h(e),exported:{type:"Identifier",name:e.alias}}})}}),d(ci,function(e){var n=e.properties?e.properties.map(function(e){return{type:"ImportSpecifier",local:h(e),imported:{type:"Identifier",name:e.key}}}):[];return e.all&&n.unshift({type:"ImportNamespaceSpecifier",local:h(e.all)}),e.default&&n.unshift({type:"ImportDefaultSpecifier",local:h(e.default)}),{type:"ImportDeclaration",specifiers:n,source:{type:"Literal",value:e.path}}}),d(ni,function(e){return{type:"VariableDeclaration",kind:e.TYPE.toLowerCase(),declarations:e.definitions.map(h)}}),d(vi,function(e){var n=e instanceof _i,n={type:"MemberExpression",object:h(e.expression),computed:n,optional:e.optional,property:n?h(e.property):{type:"Identifier",name:e.property}};return e.terminal?{type:"ChainExpression",expression:n}:n}),d(bi,function(e){return{type:"++"==e.operator||"--"==e.operator?"UpdateExpression":"UnaryExpression",operator:e.operator,prefix:e instanceof yi,argument:h(e.expression)}}),d(xi,function(e){return{type:"&&"==e.operator||"||"==e.operator?"LogicalExpression":"BinaryExpression",left:h(e.left),operator:e.operator,right:h(e.right)}}),d(Ai,function(e){return{type:"ArrayExpression",elements:e.elements.map(h)}}),d(Oi,function(e){var n=e.elements.map(h);return e.rest&&n.push({type:"RestElement",argument:h(e.rest)}),{type:"ArrayPattern",elements:n}}),d($i,function(e){var n=e.key instanceof Wn;return{type:"Property",kind:"init",computed:n,key:n?h(e.key):{type:"Literal",value:e.key},value:h(e.value)}}),d(zi,function(e){var n=e.properties.map(h);return e.rest&&n.push({type:"RestElement",argument:h(e.rest)}),{type:"ObjectPattern",properties:n}}),d(Ci,function(e){var n,t=e.key instanceof Wn,i=t?h(e.key):{type:"Literal",value:e.key};return e instanceof Mi?n="init":e instanceof Pi?n="get":e instanceof ji&&(n="set"),{type:"Property",kind:n,computed:t,method:e instanceof Fi,key:i,value:h(e.value)}}),d(Ni,function(e){var n=e.definition();return{type:"Identifier",name:n&&n.mangled_name||e.name}}),d(Qi,function(){return{type:"Super"}}),d(Zi,function(){return{type:"ThisExpression"}}),d(er,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"new"},property:{type:"Identifier",name:"target"}}}),d(ar,function(e){var n=e.value.toString().match(/[gimuy]*$/)[0],t="/"+e.value.raw_source+"/"+n;return{type:"Literal",value:t,raw:t,regex:{pattern:e.value.raw_source,flags:n}}}),d(or,function(e){e=e.value;return{type:"Literal",bigint:e.slice(0,-1),raw:e}}),d(pr,t),d(tr,t),d(sr,t),d(g,function(e){return{type:"Identifier",name:String(e.value)}}),d(nr,function(e){var t=e.strings.length-1,n={type:"TemplateLiteral",expressions:e.expressions.map(h),quasis:e.strings.map(function(e,n){return{type:"TemplateElement",tail:n==t,value:{raw:e}}})};return e.tag?{type:"TaggedTemplateExpression",tag:h(e.tag),quasi:n}:n}),tt.DEFMETHOD("to_mozilla_ast",it.prototype.to_mozilla_ast),ur.DEFMETHOD("to_mozilla_ast",Pn),Wn.DEFMETHOD("to_mozilla_ast",function(){throw new Error("Cannot convert AST_"+this.TYPE)});var u=null;function l(e){u.push(e);var n=null;if(e){if(!Un(i,e.type))throw new Error("Unsupported type: "+e.type);n=i[e.type](e)}return u.pop(),n}function p(e,n){var t=e.start,e=e.end;return null!=t.pos&&null!=e.endpos&&(n.range=[t.pos,e.endpos]),t.line&&(n.loc={start:{line:t.line,column:t.col},end:e.endline?{line:e.endline,column:e.endcol}:null},t.file&&(n.loc.source=t.file)),n}function d(e,n){e.DEFMETHOD("to_mozilla_ast",function(){return p(this,n(this))})}function h(e){return null!=e?e.to_mozilla_ast():null}function v(e){return{type:"BlockStatement",body:e.body.map(h)}}function m(e,n){var t=n.body.map(h);return n.body[0]instanceof Zn&&n.body[0].body instanceof ir&&t.unshift(h(new Kn(n.body[0]))),{type:e,body:t}}Wn.from_mozilla_ast=function(e){var n=u;u=[];e=l(e);return u=n,e.walk(new vr(function(e){if(e instanceof le){for(var n,t,i=0;(n=this.parent(i))&&!(n instanceof ht);i++)if(n instanceof rt&&n.label.name==e.name){e.thedef=n.label;break}e.thedef||(t=e.start,he("Undefined label "+e.name,t.file,t.line,t.col,t.pos))}})),e}}();var ne,te,ie,ye=(ne=[],["null","true","false","Infinity","-Infinity","undefined"].forEach(we),[Array,Boolean,Date,Error,Function,Math,Number,Object,RegExp,String].forEach(function(e){Object.getOwnPropertyNames(e).map(we),e.prototype&&(Object.getOwnPropertyNames(new e).map(we),Object.getOwnPropertyNames(e.prototype).map(we))}),Rn(ne));function we(e){ne.push(e)}function xe(e,n){e instanceof ki?(xe(e.consequent,n),xe(e.alternative,n)):e instanceof di?xe(e.tail_node(),n):e instanceof ir&&n(e.value)}function ke(n){try{return JSON.parse(n)}catch(e){throw new Error("invalid input source map: "+n)}}function Ee(n,t,e){e.forEach(function(e){t[e]&&("object"!=typeof t[e]&&(t[e]={}),n in t[e]||(t[e][n]=t[n]))})}function Se(e){e&&("props"in e?e.props instanceof Ln||(e.props=Ln.fromObject(e.props)):e.props=new Ln)}function Te(e){return{props:e.props.toObject()}}ie="undefined"==typeof Buffer?(te=atob,btoa):void 0===Buffer.alloc?(te=function(e){return new Buffer(e,"base64").toString()},function(e){return new Buffer(e).toString("base64")}):(te=function(e){return Buffer.from(e,"base64").toString()},function(e){return Buffer.from(e).toString("base64")}),_.Dictionary=Ln,_.is_statement=Qn,_.List=Nn,_.minify=function(i,r){try{(r=re(r,{annotations:void 0,compress:{},enclose:!1,ie:!1,ie8:!1,keep_fnames:!1,mangle:{},nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!1,v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&Wn.enable_validation();var e,n=r.timings&&{start:Date.now()};void 0===r.rename&&(r.rename=r.compress&&r.mangle),void 0!==r.annotations&&Ee("annotations",r,["compress","output"]),r.ie8&&(r.ie=r.ie||r.ie8),r.ie&&Ee("ie",r,["compress","mangle","output"]),r.keep_fnames&&Ee("keep_fnames",r,["compress","mangle"]),r.toplevel&&Ee("toplevel",r,["compress","mangle"]),r.v8&&Ee("v8",r,["mangle","output"]),r.webkit&&Ee("webkit",r,["compress","mangle","output"]),r.mangle&&(r.mangle=re(r.mangle,{cache:r.nameCache&&(r.nameCache.vars||{}),eval:!1,ie:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),r.mangle.properties&&("object"!=typeof r.mangle.properties&&(r.mangle.properties={}),r.mangle.properties.keep_quoted&&(e=r.mangle.properties.reserved,Array.isArray(e)||(e=[]),r.mangle.properties.reserved=e),!r.nameCache||"cache"in r.mangle.properties||(r.mangle.properties.cache=r.nameCache.props||{})),Se(r.mangle.cache),Se(r.mangle.properties.cache)),r.sourceMap&&(r.sourceMap=re(r.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0));var o,t=[];if(r.warnings&&Wn.log_function(function(e){t.push(e)},"verbose"==r.warnings),n&&(n.parse=Date.now()),i instanceof vt)o=i;else{"string"==typeof i&&(i=[i]),r.parse=r.parse||{},r.parse.toplevel=null;var a,s=r.sourceMap&&r.sourceMap.content;for(u in(s="string"==typeof s&&"inline"!=s?ke(s):s)&&(r.sourceMap.orig=Object.create(null)),i)Un(i,u)&&(r.parse.filename=u,r.parse.toplevel=o=xr(i[u],r.parse),"inline"==s?(a=function(e,n){for(var t=n.end.comments_after,i=t.length;0<=--i;){var r=t[i];if("comment1"!=r.type)break;r=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!r)break;if("sourceMappingURL"==r[1]){if(!(r=/^data:application\/json(;.*?)?;base64,(\S+)$/.exec(r[2])))break;return te(r[2])}}Wn.warn("inline source map not found: {name}",{name:e})}(u,o))&&(r.sourceMap.orig[u]=ke(a)):s&&(r.sourceMap.orig[u]=s))}e&&(h=e,o.walk(new vr(function(e){e instanceof Pt||e instanceof Ci?e.start&&e.start.quote&&d(e.key):e instanceof _i&&xe(e.property,d)}))),["enclose","wrap"].forEach(function(e){var n,t=r[e];t&&(n=o.print_to_string().slice(0,-1),o=o[e](t),i[o.start.file]=o.print_to_string().replace(n,""))}),r.validate&&o.validate_ast(),n&&(n.rename=Date.now()),r.rename&&(o.figure_out_scope(r.mangle),o.expand_names(r.mangle)),n&&(n.compress=Date.now()),r.compress&&(o=new Sr(r.compress).compress(o),r.validate&&o.validate_ast()),n&&(n.scope=Date.now()),r.mangle&&o.figure_out_scope(r.mangle),n&&(n.mangle=Date.now()),r.mangle&&(o.compute_char_frequency(r.mangle),o.mangle_names(r.mangle)),n&&(n.properties=Date.now()),r.mangle&&r.mangle.properties&&function(e,t){t=re(t,{builtins:!1,cache:null,debug:!1,keep_quoted:!1,regex:null,reserved:null},!0);var n=Object.create(t.builtins?null:ye);Array.isArray(t.reserved)&&t.reserved.forEach(function(e){n[e]=!0});var i,r=-1;t.cache?(i=t.cache.props).each(function(e){n[e]=!0}):i=new Ln;var o,a=t.regex,s=!1!==t.debug;s&&(o=!0===t.debug?"":t.debug);var f=Object.create(null),c=Object.create(n);function u(e){return!c[e]&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function l(e){return!n[e]&&((!a||a.test(e))&&(i.has(e)||f[e]))}function p(e){u(e)&&(f[e]=!0),l(e)||(c[e]=!0)}function d(e){if(!l(e))return e;var n,t=i.get(e);if(!t){if(!s||u(n="_$"+e+"$"+o+"_")&&(t=n),!t)for(;!u(t=S(++r)););/^#/.test(e)&&(t="#"+t),i.set(e,t)}return t}function h(e){e instanceof di?h(e.expressions.tail_node()):e instanceof ir?e.value=d(e.value):e instanceof ki&&(h(e.consequent),h(e.alternative))}e.walk(new vr(function(e){if(e instanceof xi)"in"==e.operator&&xe(e.left,p);else if("Call"==e.TYPE){var n=e.expression;if(n instanceof mi)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof Ji))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;xe(e.args[1],p);break;case"hasOwnProperty":if(e.args.length<1)break;xe(e.args[0],p)}}else e instanceof Pt?"string"==typeof e.key&&p(e.key):e instanceof mi?p(e.property):e instanceof Ci?"string"==typeof e.key&&p(e.key):e instanceof _i&&xe(e.property,p)})),e.walk(new vr(function(e){if(e instanceof xi)"in"==e.operator&&h(e.left);else if("Call"==e.TYPE){var n=e.expression;if(n instanceof mi)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof Ji))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;h(e.args[1]);break;case"hasOwnProperty":if(e.args.length<1)break;h(e.args[0])}}else e instanceof Pt?"string"==typeof e.key&&(e.key=d(e.key)):e instanceof mi?e.property=d(e.property):e instanceof Ci?"string"==typeof e.key&&(e.key=d(e.key)):e instanceof _i&&(t.keep_quoted||h(e.property))}))}(o,r.mangle.properties),n&&(n.output=Date.now());var f={},c=re(r.output,{ast:!1,code:!0});if(c.ast&&(f.ast=o),c.code){if(r.sourceMap&&(c.source_map=ee(r.sourceMap),r.sourceMap.includeSources)){if(i instanceof vt)throw new Error("original source content unavailable");for(var u in i)Un(i,u)&&c.source_map.setSourceContent(u,i[u])}delete c.ast,delete c.code;var l,p=Tr(c);o.print(p),f.code=p.get(),r.sourceMap&&(f.map=c.source_map.toString(),(l=r.sourceMap.url)&&(f.code=f.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),f.code+="inline"==l?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+ie(f.map):"\n//# sourceMappingURL="+l))}return r.nameCache&&r.mangle&&(r.mangle.cache&&(r.nameCache.vars=Te(r.mangle.cache)),r.mangle.properties&&r.mangle.properties.cache&&(r.nameCache.props=Te(r.mangle.properties.cache))),n&&(n.end=Date.now(),f.timings={parse:.001*(n.rename-n.parse),rename:.001*(n.compress-n.rename),compress:.001*(n.scope-n.compress),scope:.001*(n.mangle-n.scope),mangle:.001*(n.properties-n.mangle),properties:.001*(n.output-n.properties),output:.001*(n.end-n.output),total:.001*(n.end-n.start)}),t.length&&(f.warnings=t),f}catch(e){return{error:e}}finally{Wn.log_function(),Wn.disable_validation()}function d(e){In(h,e)}var h},_.parse=xr,_.push_uniq=In,_.TreeTransformer=mr,_.TreeWalker=vr}("undefined"==typeof UglifyJS?UglifyJS={}:UglifyJS);